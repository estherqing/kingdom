(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"047b":function(e,t,a){"use strict";var i=a("4fbd"),n=a.n(i);n.a},"05b7":function(e,t,a){"use strict";a.d(t,"a",function(){return u});var i=a("cebc"),n=(a("96cf"),a("3b8d")),s=a("b775"),r="/exscene/backend/card",o="/exscene/activity/card",l={Cookie:'token="0(Leba1(AeKEXPP8txVcWKSdEkeH6hovMIuKMWNOitJ4Mw(fkH1LWPByCik(lLSPADCBujI7Ak0)"; JSESSIONID=EE60CEB7CF5770516A35B05EA40BC040',"Content-Type":"application/json",Accept:"application/json","X-Real-IP":"172.25.66.172"},c={getList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"".concat(r,"/search"),method:"POST",data:t,headers:l});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getCard:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"".concat(r,"/getDetail"),method:"GET",params:{id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),delete:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"".concat(r,"/delete"),method:"GET",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),upperShelf:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"".concat(r,"/upperShelf"),method:"GET",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),offShelf:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,i=t.reason,e.next=3,Object(s["a"])({url:"".concat(r,"/offShelf"),method:"GET",params:{id:a,reason:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),forbid:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,i=t.reason,e.next=3,Object(s["a"])({url:"".concat(r,"/forbid"),method:"GET",params:{id:a,reason:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),audit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,i=t.approval,n=t.reason,e.next=3,Object(s["a"])({url:"".concat(r,"/audit"),method:"POST",data:{id:a,approval:i,reason:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"".concat(r,"/submit"),method:"POST",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),modify:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"".concat(r,"/modify"),method:"POST",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),uploadIcon:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"".concat(r,"/uploadIcon"),method:"POST",binary:!0,data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),uploadBanner:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.bannerFile,e.next=3,Object(s["a"])({url:"".concat(r,"/uploadBanner"),method:"POST",binary:!0,data:{bannerFile:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),downloadNotice:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,e.next=3,Object(s["a"])({url:"".concat(o,"/downloadNotice"),method:"GET",blob:!0,params:{id:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),uploadTranslateNotice:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,i=t.importFile,e.next=3,Object(s["a"])({url:"".concat(o,"/uploadTranslateNotice"),method:"POST",binary:!0,data:{id:a,importFile:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},u=function(){return function(e){e.prototype.$api={activity:Object(i["a"])({},c)}}}()},"0b6c":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoading,expression:"uploadLoading"}],staticClass:"activity-container"},[e.isEditPage?i("div",{staticClass:"maintitle-class box-class"},[i("span",{staticClass:"main-title"},[e._v("创建新卡片")]),i("div",{staticClass:"steps-class"},[i("el-steps",{attrs:{active:e.stepNumber,"align-center":!0}},[i("el-step",{attrs:{title:"基本信息设置",icon:"el-icon-edit"}}),i("el-step",{attrs:{title:"提交信息确认",icon:"el-icon-upload"}}),i("el-step",{attrs:{title:"完成创建",icon:"el-icon-success"}})],1)],1)]):e._e(),3!==e.stepNumber?i("div",{staticClass:"activity-preview box-class"},[i("span",{staticClass:"title-class"},[e._v("卡片预览")]),i("div",{staticClass:"card-box"},[i("div",{staticClass:"card-box-wrapper"},[e.basicDataForm.icon?e._e():i("div",{staticClass:"card-class"},[e._v("icon")]),e.basicDataForm.icon?i("img",{staticClass:"card-class",attrs:{src:e.basicDataForm.icon}}):e._e(),i("span",{staticClass:"card-box-title"},[e._v(e._s(e.basicDataForm.name||"活动名称"))])]),e.basicDataForm.banner?i("img",{staticClass:"card2-class",attrs:{src:e.basicDataForm.banner}}):e._e(),e.basicDataForm.banner?e._e():i("div",{staticClass:"card2-class"},[e._v("banner")])])]):e._e(),e.isEditPage&&1===e.stepNumber?i("div",{staticClass:"rules-area box-class"},[i("span",{staticClass:"title-class"},[e._v("基本信息设置")]),i("el-form",{ref:"basicDataForm",staticStyle:{width:"95%","margin-top":"20px"},attrs:{disabled:e.isEditPage&&1===e.baseData.status,"label-position":"left",model:e.basicDataForm,rules:e.basicDataRules,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"活动名称：",prop:"name"}},[i("el-input",{attrs:{autosize:{minRows:1,maxRows:4},type:"textarea",maxlength:"100"},model:{value:e.basicDataForm.name,callback:function(t){e.$set(e.basicDataForm,"name",t)},expression:"basicDataForm.name"}}),i("span",{staticStyle:{float:"right",color:"#909399"}},[e._v(e._s(e.basicDataForm.name.length)+"/100")])],1),i("el-form-item",{attrs:{label:"弹窗文案：",prop:"popup"}},[i("el-input",{attrs:{autosize:{minRows:1,maxRows:4},type:"textarea",maxlength:"100"},model:{value:e.basicDataForm.popup,callback:function(t){e.$set(e.basicDataForm,"popup",t)},expression:"basicDataForm.popup"}}),i("span",{staticStyle:{float:"right",color:"#909399"}},[e._v(e._s(e.basicDataForm.popup.length)+"/100")])],1),i("el-form-item",{attrs:{label:"活动icon：",prop:"icon"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/scene/uploadTipsIcon","http-request":e.uploadIcon,"show-file-list":!1,"on-success":e.handleIconSuccess,"before-upload":e.beforeIconUpload},model:{value:e.basicDataForm.icon,callback:function(t){e.$set(e.basicDataForm,"icon",t)},expression:"basicDataForm.icon"}},[e.basicDataForm.icon?i("img",{staticClass:"avatar",attrs:{src:e.basicDataForm.icon}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),i("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("（支持jpg/png格式,尺寸要求180*180,大小50k以内）")])],1),i("el-form-item",{attrs:{label:"banner上传：",prop:"banner"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/scene/uploadTipsIcon","http-request":e.uploadBanner,"show-file-list":!1,"on-success":e.handleBannerSuccess,"before-upload":e.beforeBannerUpload},model:{value:e.basicDataForm.banner,callback:function(t){e.$set(e.basicDataForm,"banner",t)},expression:"basicDataForm.banner"}},[e.basicDataForm.banner?i("img",{staticClass:"avatar",attrs:{src:e.basicDataForm.banner}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),i("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("（支持jpg/png/gif格式,尺寸要求1032*342,大小300k以内）")])],1),i("el-form-item",{attrs:{label:"卡片是否在负一屏展现：",prop:"cardPosition"}},[i("el-radio-group",{model:{value:e.basicDataForm.cardPosition,callback:function(t){e.$set(e.basicDataForm,"cardPosition",t)},expression:"basicDataForm.cardPosition"}},[i("el-radio",{attrs:{label:0}},[e._v("是")]),i("el-radio",{attrs:{label:1}},[e._v("否")])],1)],1),i("span",{staticClass:"title-class"},[e._v("跳转配置")]),i("el-form-item",{attrs:{label:"是否跳转：",prop:"bindType"}},[i("el-radio-group",{model:{value:e.basicDataForm.bindType,callback:function(t){e.$set(e.basicDataForm,"bindType",t)},expression:"basicDataForm.bindType"}},[i("el-radio",{attrs:{label:1}},[e._v("是")]),i("el-radio",{attrs:{label:0}},[e._v("否")])],1),e.basicDataForm.bindType?i("el-form-item",{attrs:{label:"跳转地址：",prop:"linkType"}},[i("el-radio-group",{model:{value:e.basicDataForm.linkType,callback:function(t){e.$set(e.basicDataForm,"linkType",t)},expression:"basicDataForm.linkType"}},[i("el-radio",{attrs:{label:1}},[e._v("跳转至Jovi智慧场景主页")]),i("el-radio",{attrs:{label:2}},[e._v("跳转至网页")]),i("el-radio",{attrs:{label:3}},[e._v("自定义跳转")])],1)],1):e._e(),2==e.basicDataForm.linkType&&1==e.basicDataForm.bindType?i("el-form-item",{attrs:{label:"网页地址：",prop:"webLink"}},[i("el-input",{staticClass:"limit-input",attrs:{placeholder:"请输入",type:"textarea",clearable:"",autosize:{minRows:2},maxlength:"1024"},model:{value:e.basicDataForm.webLink,callback:function(t){e.$set(e.basicDataForm,"webLink","string"===typeof t?t.trim():t)},expression:"basicDataForm.webLink"}}),i("span",{staticStyle:{float:"right",color:"#909399"}},[e._v(e._s(e.basicDataForm.webLink.length)+"/1024")])],1):e._e(),3==e.basicDataForm.linkType&&1==e.basicDataForm.bindType?i("el-form-item",{attrs:{label:"自定义地址：",prop:"selfLink"}},[i("el-input",{staticClass:"limit-input",attrs:{placeholder:"请输入",type:"textarea",clearable:"",autosize:{minRows:2},maxlength:"1024"},model:{value:e.basicDataForm.selfLink,callback:function(t){e.$set(e.basicDataForm,"selfLink","string"===typeof t?t.trim():t)},expression:"basicDataForm.selfLink"}}),i("span",{staticStyle:{float:"right",color:"#909399"}},[e._v(e._s(e.basicDataForm.selfLink.length)+"/1024")])],1):e._e()],1)],1)],1):e._e(),!e.isEditPage||2===e.stepNumber||e.isDetailpage?i("div",{staticClass:"rules-area box-class"},[i("span",{staticClass:"title-class"},[e._v("基本信息设置")]),i("el-form",{ref:"basicDataForm",attrs:{"label-position":"left",model:e.basicDataForm,rules:e.basicDataRules,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"活动名称："}},[i("span",[e._v(e._s(e.basicDataForm.name))])]),i("el-form-item",{attrs:{label:"弹窗文案："}},[i("span",[e._v(e._s(e.basicDataForm.popup))])]),i("el-form-item",{attrs:{label:"活动icon：",prop:"icon"}},[e.basicDataForm.icon?i("img",{staticClass:"avatar",attrs:{src:e.basicDataForm.icon}}):e._e(),i("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("（支持jpg/png格式,尺寸要求180*180,大小50k以内）")])]),i("el-form-item",{attrs:{label:"banner上传：",prop:"banner"}},[e.basicDataForm.banner?i("img",{staticClass:"avatar",attrs:{src:e.basicDataForm.banner}}):e._e(),i("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("（支持jpg/png/gif格式,尺寸要求1032*342,大小300k以内）")])]),i("el-form-item",{attrs:{label:"卡片是否在负一屏展现：",prop:"cardPosition"}},[0==e.basicDataForm.cardPosition?i("span",{attrs:{label:0}},[e._v("是")]):e._e(),1==e.basicDataForm.cardPosition?i("span",{attrs:{label:1}},[e._v("否")]):e._e()]),i("span",{staticClass:"title-class"},[e._v("跳转配置")]),i("el-form-item",{attrs:{label:"是否跳转：",prop:"bindType"}},[1==e.basicDataForm.bindType?i("span",[e._v("是")]):e._e(),2==e.basicDataForm.bindType?i("span",[e._v("否")]):e._e(),1==e.basicDataForm.bindType?i("el-form-item",{attrs:{label:"跳转地址："}},[1==e.basicDataForm.linkType?i("span",[e._v("跳转至Jovi智慧场景主页")]):e._e(),2==e.basicDataForm.linkType?i("span",[e._v("跳转至网页")]):e._e(),3==e.basicDataForm.linkType?i("span",[e._v("自定义跳转")]):e._e()]):e._e(),2==e.basicDataForm.linkType&&1==e.basicDataForm.bindType?i("el-form-item",{attrs:{label:"网页地址：",prop:"webLink"}},[i("div",[e._v(e._s(e.basicDataForm.webLink))])]):e._e(),3==e.basicDataForm.linkType&&1==e.basicDataForm.bindType?i("el-form-item",{attrs:{label:"自定义地址：",prop:"selfLink"}},[i("div",[e._v(e._s(e.basicDataForm.selfLink))])]):e._e()],1)],1)],1):e._e(),e.isEditPage&&1===e.stepNumber?i("div",{staticClass:"rules-area box-class"},[i("span",{staticClass:"title-class"},[e._v("触发与消失规则")]),i("el-form",{ref:"timeData",attrs:{"label-position":"left",model:e.timeData,"label-width":"180px",size:"small",rules:e.timeRules}},[i("el-form-item",{attrs:{label:"卡片触发和消失时间: ",prop:"time"}},[i("el-date-picker",{attrs:{disabled:e.isEditPage&&1===e.baseData.status,type:"datetime","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始日期"},on:{change:e.pickerTime},model:{value:e.timeData.time1,callback:function(t){e.$set(e.timeData,"time1",t)},expression:"timeData.time1"}}),i("span",{staticStyle:{margin:"0 10px"}},[e._v("至")]),i("el-date-picker",{attrs:{"picker-options":"pickerOptions","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"结束日期"},on:{change:e.pickerTime},model:{value:e.timeData.time2,callback:function(t){e.$set(e.timeData,"time2",t)},expression:"timeData.time2"}})],1),i("el-form-item",{attrs:{label:"消失规则：",prop:"clickType"}},[i("el-radio-group",{attrs:{disabled:e.isEditPage&&1===e.baseData.status},model:{value:e.timeData.clickType,callback:function(t){e.$set(e.timeData,"clickType",t)},expression:"timeData.clickType"}},[i("el-radio",{attrs:{label:0}},[e._v("点击消失")]),i("el-radio",{attrs:{label:1}},[e._v("点击不消失")])],1)],1)],1),e._m(0),i("el-form",{ref:"languageData",staticClass:"text-over",attrs:{disabled:e.isEditPage&&1===e.baseData.status,"label-position":"left",model:e.languageData,rules:e.languageRules,"label-width":"120px",size:"small"}},[i("el-form-item",{staticClass:"formitem-class",attrs:{label:"翻译语言：",prop:"language"}},[i("el-checkbox-group",{model:{value:e.languageData.language,callback:function(t){e.$set(e.languageData,"language",t)},expression:"languageData.language"}},[i("el-checkbox",{attrs:{label:"zh_CN"}},[e._v("中文")]),i("el-checkbox",{attrs:{label:"en_US"}},[e._v("英语")]),i("el-checkbox",{attrs:{label:"hi_IN"}},[e._v("印地语")])],1)],1)],1),e._m(1),i("el-form",{ref:"weightData",staticStyle:{width:"650px"},attrs:{"label-position":"left",model:e.weightData,rules:e.weightRules,"label-width":"120px",size:"small"}},[i("el-form-item",{staticClass:"formitem-class",attrs:{label:"初始权值(v0)：",prop:"order"}},[i("el-input",{attrs:{maxlength:"2",placeholder:"可填写数字0-50，“0”为优先级最低，“50”为优先级最高,权重越高，卡片越靠前"},model:{value:e.weightData.order,callback:function(t){e.$set(e.weightData,"order",t)},expression:"weightData.order"}})],1)],1)],1):e._e(),!e.isEditPage||2===e.stepNumber||e.isDetailpage?i("div",{staticClass:"rules-area box-class"},[i("span",{staticClass:"title-class"},[e._v("触发与消失规则")]),i("el-form",{ref:"timeData",attrs:{"label-position":"left",model:e.timeData,"label-width":"160px",size:"small",rules:e.timeRules}},[i("el-form-item",{attrs:{label:"卡片触发和消失时间: ",prop:"time"}},[i("span",[e._v(e._s(e.timeData.time1)+"--"+e._s(e.timeData.time2))])]),i("el-form-item",{attrs:{label:"消失规则：",prop:"clickType"}},[0==e.timeData.clickType?i("span",[e._v("点击消失")]):e._e(),1==e.timeData.clickType?i("span",[e._v("点击不消失")]):e._e()])],1),e._m(2),i("el-form",{ref:"languageData",staticClass:"text-over",attrs:{"label-position":"left",model:e.languageData,rules:e.languageRules,"label-width":"120px",size:"small"}},[i("el-form-item",{staticClass:"formitem-class",attrs:{label:"翻译语言：",prop:"language"}},e._l(e.languageData.language,function(t){return i("div",{key:t,staticStyle:{display:"inline-block",margin:"0 8px"}},["zh_CN"===t?i("span",[e._v("中文")]):e._e(),"en_US"===t?i("span",[e._v("英语")]):e._e(),"hi_IN"===t?i("span",[e._v("印地语")]):e._e()])}),0)],1),e._m(3),i("el-form",{ref:"weightData",staticClass:"text-over",attrs:{"label-position":"left",model:e.weightData,rules:e.weightRules,"label-width":"120px",size:"small"}},[i("el-form-item",{staticClass:"formitem-class",attrs:{label:"初始权值(v0)：",prop:"order"}},[i("span",[e._v(e._s(e.weightData.order))])])],1)],1):e._e(),e.noticeDialogVisible&&2===e.stepNumber||e.isDetailpage?i("div",{staticClass:"notice-area box-class"},[i("span",{staticClass:"title-class"},[e._v("通知")]),i("el-form",{staticClass:"text-over",attrs:{"label-position":"left",model:e.noticeData,"label-width":"165px",size:"small",rules:e.noticeRules}},[i("el-form-item",{staticClass:"formitem-class",attrs:{label:"通知标题：",prop:"title"}},[e._v("\n        "+e._s(e.noticeData.title)+"\n      ")]),i("el-form-item",{staticClass:"formitem-class",attrs:{label:"通知内容：",prop:"content"}},[e._v("\n        "+e._s(e.noticeData.content)+"\n      ")]),i("el-form-item",{staticClass:"formitem-class",attrs:{label:"通知触发和消失时间：",prop:"appearTime"}},[0==e.noticeData.appearTime?i("span",[e._v("跟随卡片触发和消失时间")]):e._e(),1==e.noticeData.appearTime?i("span",[e._v("自定义")]):e._e(),1==e.noticeData.appearTime?i("div",{staticClass:"time-box"},[i("span",[e._v(e._s(e.noticeData.time[0])+"--"+e._s(e.noticeData.time[1]))])]):e._e()])],1)],1):e._e(),3===e.stepNumber?i("div",{staticClass:"result-area box-class"},[i("img",{staticStyle:{width:"430px",height:"67px","margin-bottom":"20px"},attrs:{src:a("dbc4")}}),i("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.goHome()}}},[e._v("返回活动管理")])],1):e._e(),e.isEditPage&&1===e.stepNumber?i("div",{staticClass:"box-class"},[i("span",{staticClass:"title-class"},[e._v("通知")]),e.noticeDialogVisible?i("el-form",{ref:"noticeData",staticStyle:{width:"95%","margin-top":"20px"},attrs:{"label-position":"left",model:e.noticeData,"label-width":"165px",size:"small",rules:e.noticeRules}},[i("el-form-item",{attrs:{label:"通知标题：",prop:"title"}},[i("el-input",{attrs:{disabled:e.isEditPage&&1===e.baseData.status,type:"textarea",autosize:{minRows:1,maxRows:4},maxlength:"100"},model:{value:e.noticeData.title,callback:function(t){e.$set(e.noticeData,"title",t)},expression:"noticeData.title"}}),i("span",{staticStyle:{float:"right",color:"#909399"}},[e._v(e._s(e.noticeData.title.length)+"/100")])],1),i("el-form-item",{attrs:{label:"通知内容：",prop:"content"}},[i("el-input",{attrs:{maxlength:"100",autosize:{minRows:1,maxRows:4},type:"textarea"},model:{value:e.noticeData.content,callback:function(t){e.$set(e.noticeData,"content",t)},expression:"noticeData.content"}}),i("span",{staticStyle:{float:"right",color:"#909399"}},[e._v(e._s(e.noticeData.content.length)+"/100")])],1),i("el-form-item",{attrs:{label:"通知触发和消失时间：",prop:"appearTime"}},[i("el-radio-group",{attrs:{disabled:e.isEditPage&&1===e.baseData.status},on:{change:e.pickerChange},model:{value:e.noticeData.appearTime,callback:function(t){e.$set(e.noticeData,"appearTime",t)},expression:"noticeData.appearTime"}},[i("el-radio",{key:0,attrs:{label:0}},[e._v("跟随卡片触发和消失时间")]),i("el-radio",{key:1,attrs:{label:1}},[e._v("自定义")])],1),e.isShowRadioTip?i("div",{staticStyle:{color:"rgb(160, 160, 160)","margin-left":"20px"}},[e._v("已确认将在21：00~次日7：00期间出现通知")]):e._e(),1==e.noticeData.appearTime?i("el-form-item",{attrs:{prop:"time"}},[i("div",{staticClass:"time-box"},[i("el-date-picker",{attrs:{disabled:e.isEditPage&&1===e.baseData.status,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.checkTime},model:{value:e.noticeData.time,callback:function(t){e.$set(e.noticeData,"time",t)},expression:"noticeData.time"}})],1)]):e._e()],1)],1):e._e(),e.noticeDialogVisible?i("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{disabled:e.isEditPage&&1===e.baseData.status,type:"danger"},on:{click:function(t){return e.deleteNotice()}}},[e._v("删除")]):e._e(),e.noticeDialogVisible?e._e():i("el-button",{staticClass:"button-class",attrs:{disabled:e.isEditPage&&1===e.baseData.status,type:"primary",round:"",plain:""},on:{click:function(t){return e.addNoticeButton()}}},[e._v("添加通知"),i("i",{staticClass:"el-icon-plus el-icon--right"})])],1):e._e(),[2,3,4].includes(e.approvalData.status)&&e.isDetailpage||e.isCheckpage?i("div",{staticClass:"notice-area box-class"},[i("span",{staticClass:"title-class"},[e._v("审核进度")]),0===e.approvalData.approvalTestStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-remove",staticStyle:{color:"#909399"}}),e._v("测试人员未审核")]):1===e.approvalData.approvalTestStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-success",staticStyle:{color:"#409EFF"}}),e._v("测试人员审核：测试工程师"+e._s(e.approvalData.approvalTestUserName)+"审核通过")]):2===e.approvalData.approvalTestStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-error",staticStyle:{color:"#f56c6c"}}),e._v("测试人员审核：测试工程师"+e._s(e.approvalData.approvalTestUserName)+"审核不通过原因为："+e._s(e.approvalData.approvalTestReason))]):e._e(),0===e.approvalData.approvalOperationStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-remove",staticStyle:{color:"#909399"}}),e._v("运营人员未审核")]):1===e.approvalData.approvalOperationStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-success",staticStyle:{color:"#409EFF"}}),e._v("运营人员审核：运营经理"+e._s(e.approvalData.approvalOperationUserName)+"审核通过")]):2===e.approvalData.approvalOperationStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-error",staticStyle:{color:"#f56c6c"}}),e._v("运营人员审核：运营经理"+e._s(e.approvalData.approvalOperationUserName)+"审核不通过原因为："+e._s(e.approvalData.approvalOperationReason))]):e._e()]):e._e(),e.isDetailpage&&e.xiajiaReason?i("div",{staticClass:"box-class"},[i("div",{staticClass:"reason-area"},[i("div",{staticStyle:{"font-size":"19px","font-weight":"bold"}},[e._v("下架原因")]),i("div",[e._v(e._s(e.xiajiaReason))])])]):e._e(),e.isDetailpage&&e.jinyongReason?i("div",{staticClass:"box-class"},[i("div",{staticClass:"reason-area"},[i("div",{staticStyle:{"font-size":"19px","font-weight":"bold"}},[e._v("禁用原因")]),i("div",[e._v(e._s(e.jinyongReason))])])]):e._e(),e.isDetailpage&&e.bohuiReason?i("div",{staticClass:"box-class"},[i("div",{staticClass:"reason-area"},[i("div",{staticStyle:{"font-size":"19px","font-weight":"bold"}},[e._v("驳回原因")]),i("div",[e._v(e._s(e.bohuiReason))])])]):e._e(),e.isDetailpage?i("div",{staticClass:"buttons-area box-class"},[6===e.baseData.state?i("el-button",{staticClass:"button-class",attrs:{round:"",type:"success"},on:{click:function(t){return e.shangjia()}}},[e._v("上架")]):e._e(),9===e.baseData.state?i("el-button",{staticClass:"button-class",attrs:{round:"",type:"warning"},on:{click:function(t){return e.xiajia()}}},[e._v("下架")]):e._e(),9===e.baseData.state||12===e.baseData.state?i("el-button",{staticClass:"button-class",attrs:{round:"",type:"warning"},on:{click:function(t){return e.jinyong()}}},[e._v("禁用")]):e._e(),-1===e.baseData.upperOperateState||2===e.baseData.upperOperateState||0!==e.baseData.state&&12!==e.baseData.state&&-1!==e.baseData.state?e._e():i("el-button",{staticClass:"button-class",attrs:{round:"",type:"primary"},on:{click:function(t){return e.goEditPage()}}},[e._v("编辑")]),0===e.baseData.state?i("el-button",{staticClass:"button-class",attrs:{round:"",type:"danger"},on:{click:function(t){return e.handleDelete()}}},[e._v("删除")]):e._e(),9===e.baseData.state||12===e.baseData.state||-1===e.baseData.state?i("el-button",{staticClass:"button-class",attrs:{round:"",type:"primary",disabled:""},on:{click:function(t){return e.goDataPage()}}},[e._v("查看数据")]):e._e(),i("el-button",{staticClass:"button-class",attrs:{round:"",type:"primary"},on:{click:function(t){return e.goHome()}}},[e._v("返回")])],1):e._e(),e.isCheckpage?i("div",{staticClass:"buttons-area box-class"},[i("el-button",{staticClass:"button-class",attrs:{round:"",type:"primary"},on:{click:function(t){return e.goHome()}}},[e._v("返回")]),i("el-button",{staticClass:"button2-class",attrs:{type:"primary",round:"",disabled:e.isExam},on:{click:function(t){return e.passButton(!0)}}},[e._v("通过")]),i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:"",disabled:e.isExam},on:{click:function(t){return e.passButton(!1)}}},[e._v("不通过")])],1):e._e(),e.isEditPage&&3!==e.stepNumber?i("div",{staticClass:"buttons-area box-class"},[1===e.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(t){return e.cancelEditButton()}}},[e._v("取消编辑")]):e._e(),2===e.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(t){return e.lastStepButton()}}},[e._v("上一步")]):e._e(),1===e.stepNumber||2===e.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(t){return e.draftButton()}}},[e._v("保存为草稿")]):e._e(),1===e.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(t){return e.nextStepButton()}}},[e._v("下一步")]):e._e(),2===e.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(t){return e.saveButton()}}},[e._v("提交")]):e._e()],1):e._e(),i("el-dialog",{attrs:{title:"审核说明",visible:e.examDialogVisible,width:"600px","before-close":e.examDialogClose,center:""},on:{"update:visible":function(t){e.examDialogVisible=t}}},[i("el-form",{ref:"examData",attrs:{model:e.baseData,"label-width":"100px"}},[i("el-form-item",{attrs:{label:" 审核说明",prop:"reason",rules:e.applyRules}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:3},placeholder:"请填写审核说明",maxlength:"100"},model:{value:e.baseData.reason,callback:function(t){e.$set(e.baseData,"reason",t)},expression:"baseData.reason"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e._v(e._s(e.baseData.reason?e.baseData.reason.length:0)+"/100")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.examDialogClose(!0)}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.examDialogClose()}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"禁用申请",visible:e.jinyongDialogVisible,width:"600px","before-close":e.jinyongDialogClose,center:""},on:{"update:visible":function(t){e.jinyongDialogVisible=t}}},[i("el-form",{ref:"jinyongData",attrs:{model:e.baseData,"label-width":"100px"}},[i("el-form-item",{attrs:{label:" 禁用原因",prop:"reason",rules:e.applyRules}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:3},placeholder:"请填写禁用原因",maxlength:"100"},model:{value:e.baseData.reason,callback:function(t){e.$set(e.baseData,"reason",t)},expression:"baseData.reason"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e._v(e._s(e.baseData.reason?e.baseData.reason.length:0)+"/100")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.jinyongDialogClose(!0)}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.jinyongDialogClose()}}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"下架申请",visible:e.xiajiaDialogVisible,width:"600px","before-close":e.xiajiaDialogClose,center:""},on:{"update:visible":function(t){e.xiajiaDialogVisible=t}}},[i("el-form",{ref:"xiajiaData",attrs:{model:e.baseData,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"下架原因",prop:"reason",rules:e.applyRules}},[i("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请填写下架原因",maxlength:"100"},model:{value:e.baseData.reason,callback:function(t){e.$set(e.baseData,"reason",t)},expression:"baseData.reason"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e._v(e._s(e.baseData.reason?e.baseData.reason.length:0)+"/100")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.xiajiaDialogClose(!0)}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.xiajiaDialogClose()}}},[e._v("确 定")])],1)],1)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title2-class",staticStyle:{"margin-top":"10px"}},[a("span",[e._v("翻译语言")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title2-class",staticStyle:{"margin-top":"10px"}},[a("span",[e._v("排序规则")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-class",staticStyle:{"margin-top":"10px"}},[a("span",[e._v("翻译语言")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title2-class",staticStyle:{"margin-top":"10px"}},[a("span",[e._v("排序规则")])])}],s=(a("7f7f"),a("a481"),a("795b")),r=a.n(s),o=(a("96cf"),a("3b8d")),l=a("0a0d"),c=a.n(l),u=(a("c5f6"),a("e2e9"),{name:"activity-component",props:{isCheckpage:{type:Boolean,default:!1},isDetailpage:{type:Boolean,default:!1},baseData:{}},data:function(){var e=this,t=function(t,a,i){if(""===a)i(new Error("请输入初始权值"));else if(/^\d+$/.test(a)){var n=Number(a);e.weightData.order=n,console.log(n),n>=0&&n<=50?i():i(new Error("请输入整数0-50"))}else i(new Error("请输入整数0-50"))},a=function(e,t,a){/^\s+$/.test(t)?a(new Error("不能输入全空格")):a()},i=function(t,a,i){var n=/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/.test(a);2==e.basicDataForm.linkType&&!n&&a?i(new Error("格式错误，请填写正确的地址")):i()};return{pickerOptions:{disabledDate:function(e){return e.getTime()<c()()-864e5}},basicDataForm:{name:"",popup:"",icon:"",banner:"",bindType:"",linkType:1,webLink:"",selfLink:"",cardPosition:""},timeData:{type:"",cardsType:"",cardsVersion:"",time1:"",time2:"",clickType:""},languageData:{language:[]},weightData:{order:""},cardsType:[{label:"赛事",value:"赛事"},{label:"喝水",value:"喝水"},{label:"运动",value:"运动"},{label:"电影",value:"电影"},{label:"Jovi收藏",value:"Jovi收藏"},{label:"近场服务",value:"近场服务"},{label:"酒店",value:"酒店"},{label:"机票",value:"机票"}],approvalData:{},isShowRadioTip:!1,grayscaleDataTypes:[],excelFileName:"",excelFile:"",uploadLoading:!1,controlType:1,grayscaleType:1,downloadFileName:"",downloadFileUrl:"",isMantissaList1:!1,isMantissaList2:!1,mantissaList1:[],mantissaList2:[],isNoticeTimeError:!1,isTimeError1:!1,isTimeError2:!1,startTimeDisabled:!1,testCardUrl:"",isExam:!1,xiajiaDialogVisible:!1,jinyongDialogVisible:!1,isEditPage:!0,examDialogVisible:!1,checkType:"",testImgSrc:"",testDialogVisible:!1,xiajiaReason:"",jinyongReason:"",bohuiReason:"",noticeData:{title:"",content:"",appearTime:"",time:[]},noticeDialogVisible:!1,cardPreview:"",expandPreview:"",stepNumber:1,basicData:{peopleLabels:[],bindType:2},basicDataRules:{name:[{required:!0,message:"请填写活动名称",trigger:"change"}],popup:[{required:!0,message:"请填写弹窗文案",trigger:"change"}],icon:[{required:!0,message:"请上传图片",trigger:"change"}],banner:[{required:!0,message:"请上传图片",trigger:"change"}],bindType:[{required:!0,message:"请选择",trigger:"change"}],selfLink:[{required:!0,message:"请填写自定义地址",trigger:"change"}],webLink:[{required:!0,message:"请填写网页地址",trigger:"change"},{required:!0,validator:i,trigger:"blur"}],cardPosition:[{required:!0,message:"请选择",trigger:"change"}],linkType:[{required:!0,message:"请选择",trigger:"change"}]},timeRules:{type:[{required:!0,message:"请选择",trigger:"change"}],cardsType:[{required:!0,message:"请选择",trigger:"change"}],cardsVersion:[{required:!0,message:"请选择",trigger:"change"}],time1:[{required:!0,message:"请选择时间",trigger:"change"}],time2:[{required:!0,message:"请选择时间",trigger:"change"}],clickType:[{required:!0,message:"请选择消失规则",trigger:"change"}]},noticeRules:{title:[{required:!0,message:"请填写通知标题",trigger:"blur"},{required:!0,validator:a,trigger:"blur"}],content:[{required:!0,message:"请填写通知内容",trigger:"blur"},{required:!0,validator:a,trigger:"blur"}],appearTime:{required:!0,message:"请选择通知触发和消失时间",trigger:"blur"},time:{required:!0,message:"请选择时间",trigger:"blur"}},weightRules:{order:[{required:!0,validator:t,trigger:"blur"}]},languageRules:{language:[{required:!0,message:"请选择翻译语言",trigger:"blur"}]},applyRules:[{required:!0,message:"内容不能为空",trigger:"blur"},{required:!0,validator:a,trigger:"blur"}]}},methods:{pickerTime:function(e){0===this.noticeData.appearTime?this.pickerChange():this.checkTime()},checkTime:function(){var e=new Date(this.timeData.time2),t=new Date(this.noticeData.time[0]);t>=e&&(this.$message.error("选择的通知开始时间不能大于等于卡片结束时间"),this.noticeData.time=[])},pickerChange:function(){var e=this;if(1!==this.noticeData.appearTime){var t=new Date(this.timeData.time1),a=t.getHours(),i=t.getDate(),n=new Date(this.timeData.time2),s=n.getHours(),r=n.getDate();if(r-i===1&&a>=21&&s>0<7){var o="<p>当前活动出现时间为".concat(this.timeData.time1,"--").concat(this.timeData.time2,",</p><p>是否确认通知随活动出现？</p><p>(在这21：00-次日07：00期间出现通知，有可能会打扰用户，请慎重！)</p>");this.$confirm(o,"提示",{confirmButtonText:"确定",cancelButtonText:"返回修改活动时间",type:"warning",dangerouslyUseHTMLString:!0,center:!0}).then(function(){e.isShowRadioTip=!0}).catch(function(){e.timeData.time1="",e.timeData.time2=""})}}},uploadBanner:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.uploadLoading=!0,e.next=3,this.$api.activity.uploadBanner({bannerFile:t.file});case 3:a=e.sent,this.basicDataForm.banner=a.imageUrl,this.uploadLoading=!1;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),uploadIcon:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.uploadLoading=!0,console.log("data",t),e.next=4,this.$api.activity.uploadIcon({iconFile:t.file});case 4:a=e.sent,this.basicDataForm.icon=a.imageUrl,this.uploadLoading=!1;case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleBannerSuccess:function(e,t){},beforeBannerUpload:function(e){var t=this.checkImg(e,2);return t},handleIconSuccess:function(e,t){},beforeIconUpload:function(e){return this.checkImg(e,1)},checkImg:function(e,t){var a,i,n=this,s="image/jpeg"===e.type,o="image/gif"===e.type,l="image/png"===e.type,c=e.size/1024<50,u=e.size/1024<300;if(!s&&!l&&1===t&&!c)return this.$message.error("图片不符合要求，请检查后重新上传"),!1;if(!s&&!l&&2===t&&!u&&!o)return this.$message.error("图片不符合要求，请检查后重新上传"),!1;switch(t){case 1:a=180,i=180;break;default:a=1032,i=342}var p=new r.a(function(t,n){var s=window.URL||window.webkitURL,r=new Image;r.onload=function(){console.log("wh",r.width,r.height);var e=r.width===a&&r.height===i;e?t():n()},r.src=s.createObjectURL(e)}).then(function(){return e},function(){return n.$message.error("上传的图片不符合要求!尺寸须为".concat(a,"*").concat(i)),r.a.reject()});return p},getForNumber:function(e,t){var a=e-1;return 1===t?a+"":a<10?"0"+a:a+""},getFormatDate:function(e){if(e){var t="";return t="string"===typeof e?new Date(Date.parse(e.replace(/-/g,"/"))):new Date(e),t.Format("yyyy-MM-dd hh:mm:ss")}return""},numberChange:function(e){if(/^\d+$/.test(e)){var t=Number(e);this.isNoticeTimeError=!(t>=1&&t<=10080)}else this.isNoticeTimeError=!0},dateChange:function(e){var t=Date.parse(this.timeData.startTime),a=Date.parse(this.timeData.endTime),i=c()();e&&t<i?(this.isTimeError2=!0,this.isTimeError1=!1):!e&&a<i?(this.isTimeError2=!0,this.isTimeError1=!1):t>=a?(this.isTimeError1=!0,this.isTimeError2=!1):(this.isTimeError1=!1,this.isTimeError2=!1)},noticeRadio2Choose:function(){this.noticeData.endTime=120},timeRadioChoose:function(){this.timeData.holiday="",this.timeData.startTime="",this.timeData.endTime="",this.isTimeError1=!1,this.isTimeError2=!1},handleDelete:function(){var e=this,t="是否确定删除“"+this.baseData.name+"”的草稿？";this.$confirm(t,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var t={id:e.baseData.id,versionCode:e.baseData.versionCode};e.$http.post("/scene/del",t).then(function(t){t.data&&"0"==t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.$emit("activity-event",{type:"home-page"})):t.data.msg?e.$message.error(t.data.msg):e.$message.error("删除失败！")}).catch(function(){e.$message.error("删除失败！")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},xiajiaDialogClose:function(e){var t=this;"function"===typeof e?(this.baseData.reason="",e()):e?(this.baseData.reason="",this.xiajiaDialogVisible=!1):this.$refs["xiajiaData"].validate(function(e){if(!e)return t.$message.warning("请按要求填写"),!1;var a={id:t.baseData.id,versionCode:t.baseData.versionCode,lastState:t.baseData.state,state:12,explain:t.baseData.reason};t.$http.post("/scene/modifyState",a).then(function(e){e.data&&"0"==e.data.code?(t.$message({type:"success",message:"下架成功"}),t.xiajiaReason=t.baseData.reason,t.baseData.reason="",t.baseData.state=12,t.xiajiaDialogVisible=!1):e.data.msg?t.$message.error(e.data.msg):t.$message.error("下架失败！")}).catch(function(){t.$message.error("下架失败！")})})},xiajia:function(){this.xiajiaDialogVisible=!0},shangjia:function(){var e=this,t={id:this.baseData.id,versionCode:this.baseData.versionCode,lastState:this.baseData.state,state:9};this.$http.post("/scene/modifyState",t).then(function(t){t.data&&"0"==t.data.code?(e.baseData.state=9,e.$message({type:"success",message:"上架成功"})):t.data.msg?e.$message.error(t.data.msg):e.$message.error("上架失败！")}).catch(function(){e.$message.error("上架失败！")})},passButton:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return a={id:this.baseData.id,approval:t,reason:this.baseData.reason},e.next=4,this.$api.activity.audit(a);case 4:i=e.sent,i&&(this.$message({type:"success",message:"操作成功"}),this.isExam=!0,this.$emit("activity-event",{type:"home-page"})),e.next=10;break;case 8:this.examDialogVisible=!0,this.checkType=t;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),jinyongDialogClose:function(e){var t=this;"function"===typeof e?(this.baseData.reason="",e()):e?(this.baseData.reason="",this.jinyongDialogVisible=!1):this.$refs["jinyongData"].validate(function(e){if(!e)return t.$message.warning("请按要求填写"),!1;var a={id:t.baseData.id,versionCode:t.baseData.versionCode,lastState:t.baseData.state,state:-1,explain:t.baseData.reason};t.$http.post("/scene/modifyState",a).then(function(e){e.data&&"0"==e.data.code?(t.$message({type:"success",message:"禁用成功"}),t.jinyongReason=t.baseData.reason,t.baseData.reason="",t.baseData.state=-1,t.jinyongDialogVisible=!1):e.data.msg?t.$message.error(e.data.msg):t.$message.error("禁用失败！")}).catch(function(){t.$message.error("禁用失败！")})})},jinyong:function(){this.jinyongDialogVisible=!0},examDialogClose:function(e){var t=this;"function"===typeof e?(this.baseData.reason="",e()):e?(this.baseData.reason="",this.examDialogVisible=!1):this.$refs["examData"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return i={id:t.baseData.id,approval:t.checkType,reason:t.baseData.reason},e.next=4,t.$api.activity.audit(i);case 4:n=e.sent,n&&(t.isExam=!0,t.examDialogVisible=!1,t.$emit("activity-event",{type:"home-page"})),e.next=10;break;case 8:return t.$message.warning("请按要求填写"),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},goDataPage:function(){this.$emit("activity-event",{type:"data-page"})},goEditPage:function(){var e=Date.parse(this.baseData.endTime);0!==this.baseData.state&&c()()>e?this.$confirm("活动已结束, 无法编辑！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}):(this.stepNumber=1,this.isEditPage=!0,this.isCheckpage=!1,this.isDetailpage=!1)},deleteNotice:function(){this.noticeData={title:"",content:"",time:[],appearTime:""},this.isShowRadioTip=!1,this.noticeDialogVisible=!1},addNoticeButton:function(){this.noticeDialogVisible=!0},goHome:function(){this.$emit("activity-event",{type:"home-page"})},isEmpty:function(e){return"undefined"===typeof e||""===e||null===e},dataCheck:function(e){var t,a,i,n,s;return this.$refs.basicDataForm.validate(function(e){t=e}),this.noticeDialogVisible?this.$refs.noticeData.validate(function(e){i=e}):(i=!0,this.noticeData={}),this.$refs.timeData.validate(function(e){a=e}),this.$refs.languageData.validate(function(e){s=e}),this.$refs.weightData.validate(function(e){n=e}),console.log(t,a,i,n,s),t&&a&&i&&n&&s},draftButton:function(){this.dataCheck(!0)&&this.prepareEditData(0)},saveButton:function(){this.prepareEditData(1)},prepareEditData:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a={id:this.baseData.id,name:this.basicDataForm.name,popup:this.basicDataForm.popup,icon:this.basicDataForm.icon,banner:this.basicDataForm.banner,cardPosition:this.basicDataForm.cardPosition,jumpType:this.basicDataForm.bindType?this.basicDataForm.linkType:0,jumpUrl:1!==this.basicDataForm.linkType?2==this.basicDataForm.linkType?this.basicDataForm.webLink:this.basicDataForm.selfLink:"",weight:this.weightData.order,triggerStartTime:this.timeData.time1,triggerEndTime:this.timeData.time2,disapperType:this.timeData.clickType,noticeTitle:this.noticeData.title,noticeContent:this.noticeData.content,noticeType:this.noticeData.appearTime,noticeStartTime:this.noticeData.appearTime?this.noticeData.time[0]:void 0,noticeEndTime:this.noticeData.appearTime?this.noticeData.time[1]:void 0,translateLanguage:this.languageData.language,saveAction:t},this.basicDataForm.linkType||(a.jumpUrl=""),this.saveDataXhr(a);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),uploadExcel:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=new FormData,t.append("activityId",this.baseData.id),t.append("imeiFile",this.excelFile),e.abrupt("return",new r.a(function(e){a.$http.post("/scene/upoloadGreyImeiFile",t).then(function(t){if(t.data&&0==t.data.code){var i=t.data.data;e(i)}else a.uploadLoading=!1,t.data.msg?a.$message.error(t.data.msg):a.$message.error("操作失败！"),e("")}).catch(function(){a.uploadLoading=!1,a.$message.error("操作失败！"),e("")})}));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),saveDataXhr:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.baseData.id){e.next=6;break}return e.next=3,this.$api.activity.modify(t);case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,this.$api.activity.submit(t);case 8:a=e.sent;case 9:a&&(1===this.stepNumber?(this.goHome(),this.$message({type:"success",message:"草稿保存成功"})):this.stepNumber++);case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),lastStepButton:function(){this.stepNumber--},nextStepButton:function(){this.dataCheck(!1)&&this.stepNumber++},timeCompute:function(e,t){var a=new Date(e),i=a.getTime()+6e4*t,n=new Date(i);return n.Format("yyyy-MM-dd hh:mm:ss")},cancelEditButton:function(){var e=this;this.$confirm("是否确定取消编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"返回",type:"warning",center:!0}).then(function(){e.$emit("activity-event",{type:"home-page"})}).catch(function(){})},getDataXhr:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.activity.getCard(this.baseData.id);case 2:t=e.sent,this.basicDataForm.name=t.name,this.basicDataForm.icon=t.icon,this.basicDataForm.banner=t.banner,this.basicDataForm.cardPosition=t.cardPosition,this.basicDataForm.popup=t.popup,t.jumpType?(this.basicDataForm.bindType=1,this.basicDataForm.linkType=t.jumpType):(this.basicDataForm.bindType=0,this.basicDataForm.linkType=""),2==t.jumpType?this.basicDataForm.webLink=t.jumpUrl:3==t.jumpType&&(this.basicDataForm.selfLink=t.jumpUrl),this.weightData.order=t.weight,this.timeData.time1=t.triggerStartTime,this.timeData.time2=t.triggerEndTime,this.timeData.clickType=t.disapperType,t.noticeTitle&&(this.noticeDialogVisible=!0,this.noticeData.title=t.noticeTitle,this.noticeData.content=t.noticeContent,this.noticeData.appearTime=t.noticeType,this.noticeData.time=t.noticeType?[t.noticeStartTime,t.noticeEndTime]:[]),this.languageData.language=t.translateLanguage,this.xiajiaReason=t.offShelfReason,this.jinyongReason=t.forbidReason,this.approvalData.approvalTestUserName=t.approvalTestUserName,this.approvalData.approvalTestStatus=t.approvalTestStatus,this.approvalData.approvalTestReason=t.approvalTestReason,this.approvalData.approvalOperationUserName=t.approvalOperationUserName,this.approvalData.approvalOperationStatus=t.approvalOperationStatus,this.approvalData.approvalOperationReason=t.approvalOperationReason,this.approvalData.status=t.status;case 25:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getDisappearTime:function(e,t){var a=new Date(e),i=new Date(t),n=i.getTime()-a.getTime();if(n>0)return Math.round(n/6e4)}},mounted:function(){(this.isCheckpage||this.isDetailpage)&&(this.isEditPage=!1,this.stepNumber=2),"undefined"!==typeof this.baseData.id&&this.getDataXhr()}}),p=u,d=(a("e983"),a("2877")),m=Object(d["a"])(p,i,n,!1,null,"395af9a7",null);t["a"]=m.exports},"11f2":function(e,t,a){},"16f6":function(e,t,a){},"33d3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-class"},[a("div",{staticClass:"left-input"},[a("el-input",{attrs:{placeholder:"调研主题",clearable:""},on:{change:e.searchData},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),e.isCheckpage?e._e():a("el-select",{staticClass:"left-select",attrs:{clearable:"",placeholder:"是否抽奖"},on:{change:e.searchData},model:{value:e.isReward,callback:function(t){e.isReward=t},expression:"isReward"}},[a("el-option",{attrs:{label:"是",value:"1"}}),a("el-option",{attrs:{label:"否",value:"0"}})],1),e.isCheckpage?e._e():a("el-select",{staticClass:"left-select",attrs:{clearable:"",placeholder:"状态"},on:{change:e.searchData},model:{value:e.status.selectedKey,callback:function(t){e.$set(e.status,"selectedKey",t)},expression:"status.selectedKey"}},e._l(e.status.options,function(e){return a("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1),a("el-button",{staticClass:"left-button",attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.searchData}},[e._v("搜索")])],1)},n=[],s={name:"header-component",props:{isCheckpage:{type:Boolean,default:!1}},data:function(){return{title:"",isReward:"",status:{options:this.$store.state.cards.statusOptions,selectedKey:""}}},computed:{selectedCategorieKey:function(){var e=this,t=this.$store.state.cards.categorieOptions.filter(function(t){return!!t.options.filter(function(t){return t.key===e.cardCategorie.selectedSubKey}).length})[0];return t&&t.key}},mounted:function(){},methods:{searchData:function(){this.$emit("header-event",{type:"search-event",data:{title:this.title,isReward:this.isReward,status:this.status.selectedKey}})}}},r=s,o=(a("f50f"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"068578ed",null);t["a"]=l.exports},3501:function(e,t,a){},"3bee":function(e,t,a){"use strict";a("6762"),a("2fdb"),a("7f7f"),a("96cf");var i=a("3b8d"),n=a("ed08");t["a"]={data:function(){var e=function(e,t,a){/^\s+$/.test(t)?a(new Error("不能输入全空格")):a()};return{testDialogVisible:!1,applyToDisableData:{reason:""},applyToOffShelfData:{reason:""},versionData:{cardId:"",cardVersionCode:"",list:[],page:1,size:5,total:0},actionTargetData:{questionnaireId:"",cardName:"",cardVersionCode:"",classification:""},imeiList:[],imeiTestValue:"",imeiData:{grayscaleDataType:"",releaseType:""},dialog:{show:{applyToShelf:!1,applyToOffShelfConfirm:!1,applyToOffShelf:!1,applyToDisableConfirm:!1,applyToDisable:!1,previewTest:!1}},applyRules:[{required:!0,message:"内容不能为空",trigger:"blur"},{required:!0,validator:e,trigger:"blur"}]}},computed:{statusObject:function(){return Object(n["arrOptionsToObject"])(this.$store.state.cards.statusOptions)},actionsObject:function(){return Object(n["arrOptionsToObject"])(this.$store.state.cards.cardListActionOptions)}},methods:{refreshData:function(){this.$emit("table-event",{type:"refresh-data"})},onActionHandle:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.actionTargetData.questionnaireId=t.questionnaireId,this.actionTargetData.title=t.title,e.t0=a,e.next=4===e.t0?5:5===e.t0?7:6===e.t0?9:200===e.t0?11:201===e.t0?12:14;break;case 5:return this.applyToShelf(this.actionTargetData.questionnaireId,t.cardVersionCode,a),e.abrupt("break",15);case 7:return this.dialog.show.applyToOffShelfConfirm=!0,e.abrupt("break",15);case 9:return this.dialog.show.applyToDisableConfirm=!0,e.abrupt("break",15);case 11:return e.abrupt("break",15);case 12:return this.dialog.show.previewTest=!0,e.abrupt("break",15);case 14:return e.abrupt("break",15);case 15:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),getCardVersionList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.cards.getCardsList({cardId:this.versionData.cardId,page:this.versionData.page,size:this.versionData.size,position:1});case 2:t=e.sent,t&&(this.versionData.total=t.totalElements,this.versionData.list=t.content);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),applyToShelf:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.cards.applyToShelf({questionnaireId:t});case 2:i=e.sent,i&&(this.applySuccessCb(a),this.dialog.show.applyToShelf=!1);case 4:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),applyToOffShelf:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.reason,n=t.statusKey,e.next=3,this.$api.cards.applyToOffShelf({questionnaireId:a,reason:i});case 3:s=e.sent,s&&(this.applySuccessCb(n),this.dialog.show.applyToOffShelf=!1);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),applyToDisable:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a,i){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.cards.applyToDisable({questionnaireId:t,reason:a});case 2:n=e.sent,console.log("applyToDisable",n),n&&(this.applySuccessCb(i),this.dialog.show.applyToDisable=!1);case 5:case"end":return e.stop()}},e,this)}));function t(t,a,i){return e.apply(this,arguments)}return t}(),applySuccessCb:function(e){this.refreshData(),this.$message({type:"success",message:"".concat(this.actionsObject[e].name,"申请成功")})},applyToOffShelfDialogConfirmClose:function(e){"function"===typeof e?e():e?this.dialog.show.applyToOffShelfConfirm=!1:(this.dialog.show.applyToOffShelfConfirm=!1,this.dialog.show.applyToOffShelf=!0)},applyToShelfDialogClose:function(e){"function"===typeof e?e():e?this.dialog.show.applyToShelf=!1:this.applyToShelf(this.versionData.id,this.versionData.cardId,this.versionData.cardVersionCode,4)},applyToDisableDialogConfirmClose:function(e){"function"===typeof e?(this.applyToDisableData.reason="",e()):e?this.dialog.show.applyToDisableConfirm=!1:(this.dialog.show.applyToDisableConfirm=!1,this.dialog.show.applyToDisable=!0)},applyToDisableDialogClose:function(e){var t=this;console.log("applyToDisableDialogClose"),"function"===typeof e?(this.applyToDisableData.reason="",e()):e?(this.applyToDisableData.reason="",this.dialog.show.applyToDisable=!1):this.$refs["disableData"].validate(function(e){if(!e)return t.$message.warning("请按要求填写"),!1;t.applyToDisable(t.actionTargetData.questionnaireId,t.applyToDisableData.reason,6)})},applyToOffShelfDialogClose:function(e){var t=this;"function"===typeof e?(this.applyToOffShelfData.reason="",e()):e?(this.applyToOffShelfData.reason="",this.dialog.show.applyToOffShelf=!1):this.$refs["applyToOffShelfData"].validate(function(e){if(!e)return t.$message.warning("请按要求填写"),!1;var a={questionnaireId:t.actionTargetData.questionnaireId,reason:t.applyToOffShelfData.reason,statusKey:5};t.applyToOffShelf(a)})},saveIMEI:function(){if(this.imeiList.length>19)this.$confirm("只能输入1-20个IMEI","提示",{confirmButtonText:"确定",center:!0,type:"warning"});else if(this.imeiList.includes(this.imeiTestValue))this.$confirm("IMEI码重复！","提示",{confirmButtonText:"确定",center:!0,type:"warning"});else if(/^\d{15}$/.test(this.imeiTestValue)){if("865407010000009"===this.imeiTestValue||"123456789012345"===this.imeiTestValue)return this.$confirm("请检查添加的imei中是否存在非法imei码！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1;this.imeiList.push(this.imeiTestValue)}else this.$confirm("IMEI码不符合要求！(15位数字)","提示",{confirmButtonText:"确定",center:!0,type:"warning"})},deleteIMEI:function(e){this.imeiList.splice(e,1)},previewTest:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.imeiList.length<1)){e.next=3;break}return this.$confirm("请至少填入一个IMEI码","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),e.abrupt("return",!1);case 3:return this.uploadLoading=!0,console.log(this.actionTargetData.questionnaireId),e.next=7,this.$api.cards.priviewTest({questionnaireId:this.actionTargetData.questionnaireId,imeis:this.imeiList.join(";")});case 7:t=e.sent,console.log("priviewTest",t),t&&(this.$message({type:"success",message:"预览推送成功!"}),this.uploadLoading=!1,this.dialog.show.previewTest=!1);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}}},"3c60":function(e,t,a){"use strict";var i=a("3501"),n=a.n(i);n.a},"4fbd":function(e,t,a){},"5a2d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addTips}},[e._v("创建活动卡片")])],1)},n=[],s={methods:{addTips:function(){this.$emit("table-event",{type:"add-page",data:{}})}}},r=s,o=(a("88a8"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"000b7758",null);t["a"]=l.exports},"5df8":function(e,t,a){},6307:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",height:"600"},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID","min-width":"80",sortable:"custom"}}),a("el-table-column",{attrs:{label:"活动名称","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isCheckpage?e._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.goDetailPage(t.row)}}},[e._v(e._s(t.row.name))]),e.isCheckpage?a("span",[e._v(e._s(t.row.name))]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"120",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("span",{staticStyle:{color:"gray"}},[e._v("草稿")]):e._e(),1===t.row.status?a("span",{staticStyle:{color:"red"}},[e._v("翻译待导入")]):e._e(),2===t.row.status?a("span",{staticStyle:{color:"blue"}},[e._v("待审核")]):e._e(),3===t.row.status?a("span",{staticStyle:{color:"Orange"}},[e._v("驳回")]):e._e(),4===t.row.status?a("span",{staticStyle:{color:"black"}},[e._v("待上架")]):e._e(),5===t.row.status?a("span",{staticStyle:{color:"green"}},[e._v("已上架")]):e._e(),6===t.row.status?a("span",{staticStyle:{color:"red"}},[e._v("已下架")]):e._e(),7===t.row.status?a("span",{staticStyle:{color:"red"}},[e._v("已禁用")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间","min-width":"170",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"170",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"operator",label:"上次修改人","min-width":"210",sortable:"custom"}}),a("el-table-column",{attrs:{label:"操作","min-width":"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[[1].includes(t.row.status)?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.downloadTextToExcel(t.row)}}},[e._v("导出")]):e._e(),[1].includes(t.row.status)?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.importTextTranslationData(t.row)}}},[e._v("导入")]):e._e(),4===t.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.shangjia(t.row)}}},[e._v("上架")]):e._e(),5===t.row.status?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.xiajia(t.row)}}},[e._v("下架")]):e._e(),5===t.row.status||6===t.row.status?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.jinyong(t.row)}}},[e._v("禁用")]):e._e(),0===t.row.status||1===t.row.status||3===t.row.status||6===t.row.status||7===t.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.goEditPage(t.row)}}},[e._v("编辑")]):e._e(),0===t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e(),9===t.row.status||12===t.row.status||-1===t.row.state?a("el-button",{attrs:{size:"mini",type:"primary",disabled:""},on:{click:function(a){return e.goDataPage(t.row)}}},[e._v("查看数据")]):e._e(),e.isCheckpage&&2===t.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.goCheckPage(t.row)}}},[e._v("审核")]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"下架申请",visible:e.xiajiaDialogVisible,width:"600px","before-close":e.xiajiaDialogClose,center:""},on:{"update:visible":function(t){e.xiajiaDialogVisible=t}}},[a("el-form",{ref:"xiajiaData",attrs:{model:e.xiajiaData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"下架原因",prop:"reason",rules:e.applyRules}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请填写下架原因",maxlength:"100"},model:{value:e.xiajiaData.reason,callback:function(t){e.$set(e.xiajiaData,"reason",t)},expression:"xiajiaData.reason"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e._v(e._s(e.xiajiaData.reason?e.xiajiaData.reason.length:0)+"/100")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.xiajiaDialogClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.xiajiaDialogClose()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"禁用申请",visible:e.jinyongDialogVisible,width:"600px","before-close":e.jinyongDialogClose,center:""},on:{"update:visible":function(t){e.jinyongDialogVisible=t}}},[a("el-form",{ref:"jinyongData",attrs:{model:e.jinyongData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:" 禁用原因",prop:"reason",rules:e.applyRules}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请填写禁用原因",maxlength:"100"},model:{value:e.jinyongData.reason,callback:function(t){e.$set(e.jinyongData,"reason",t)},expression:"jinyongData.reason"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e._v(e._s(e.jinyongData.reason?e.jinyongData.reason.length:0)+"/100")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.jinyongDialogClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.jinyongDialogClose()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"导入",visible:e.isShowImport,width:"600px","before-close":e.importDialogClose,center:""},on:{"update:visible":function(t){e.isShowImport=t}}},[a("el-form",{ref:"excel",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("el-form-item",{ref:"importDom",attrs:{label:""}},[a("el-upload",{staticClass:"upload-demo",staticStyle:{display:"flex","justify-align":"center","align-item":"center","flex-direction":"column",width:"300px"},attrs:{action:"aaa","file-list":e.fileList,"before-remove":e.removeFile,"http-request":e.getTranslationData,limit:1,"on-exceed":e.handleExceed}},[a("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.importDialogClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.importDialogClose()}}},[e._v("确 定")])],1)],1)],1)},n=[],s=a("0a0d"),r=a.n(s),o=(a("7f7f"),a("96cf"),a("3b8d")),l={data:function(){var e=function(e,t,a){/^\s+$/.test(t)?a(new Error("不能输入全空格")):a()};return{actionsObject:{upperShelf:"上架"},dialog:{show:{upperShelf:!1,offShelfConfirm:!1,offShelf:!1,disableConfirm:!1,disable:!1}},applyRules:[{required:!0,message:"内容不能为空",trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],actions:{rowId:"",rowStatus:""}}},methods:{refreshData:function(){this.$emit("table-event",{type:"refresh-data"})},actionsBtn:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log(t,a),this.actions.id=t.id,this.actions.rowStatus=a,e.t0=a,e.next="upperShelf"===e.t0?6:"offShelfConfirm"===e.t0?8:"disableConfirm"===e.t0?10:200===e.t0?12:13;break;case 6:return this.applyToShelf(t.id,a),e.abrupt("break",14);case 8:return this.dialog.show.applyToOffShelfConfirm=!0,e.abrupt("break",14);case 10:return this.dialog.show.applyToDisableConfirm=!0,e.abrupt("break",14);case 12:return e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),applyToShelf:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.applySuccessCb(a),this.dialog.show.applyToShelf=!1;case 2:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),applyToOffShelf:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,i=t.reason,n=t.status,e.next=3,this.$api.cards.applyToOffShelf({id:a,reason:i});case 3:s=e.sent,s&&(this.applySuccessCb(n),this.dialog.show.applyToOffShelf=!1);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),applyToDisable:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,a,i){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.cards.applyToDisable({id:t,reason:a});case 2:n=e.sent,console.log("applyToDisable",n),n&&(this.applySuccessCb(i),this.dialog.show.applyToDisable=!1);case 5:case"end":return e.stop()}},e,this)}));function t(t,a,i){return e.apply(this,arguments)}return t}(),applySuccessCb:function(e){this.refreshData(),this.$message({type:"success",message:"".concat(this.actionsObject[e],"申请成功")})},applyToOffShelfDialogConfirmClose:function(e){"function"===typeof e?e():e?this.dialog.show.applyToOffShelfConfirm=!1:(this.dialog.show.applyToOffShelfConfirm=!1,this.dialog.show.applyToOffShelf=!0)},applyToShelfDialogClose:function(e){"function"===typeof e?e():e?this.dialog.show.applyToShelf=!1:this.applyToShelf(this.versionData.id,this.versionData.cardId,this.versionData.cardVersionCode,4)},applyToDisableDialogConfirmClose:function(e){"function"===typeof e?(this.applyToDisableData.reason="",e()):e?this.dialog.show.applyToDisableConfirm=!1:(this.dialog.show.applyToDisableConfirm=!1,this.dialog.show.applyToDisable=!0)},applyToDisableDialogClose:function(e){var t=this;console.log("applyToDisableDialogClose"),"function"===typeof e?(this.applyToDisableData.reason="",e()):e?(this.applyToDisableData.reason="",this.dialog.show.applyToDisable=!1):this.$refs["disableData"].validate(function(e){if(!e)return t.$message.warning("请按要求填写"),!1;t.applyToDisable(t.actionTargetData.questionnaireId,t.applyToDisableData.reason,6)})},applyToOffShelfDialogClose:function(e){var t=this;"function"===typeof e?(this.applyToOffShelfData.reason="",e()):e?(this.applyToOffShelfData.reason="",this.dialog.show.applyToOffShelf=!1):this.$refs["applyToOffShelfData"].validate(function(e){if(!e)return t.$message.warning("请按要求填写"),!1;var a={questionnaireId:t.actionTargetData.questionnaireId,reason:t.applyToOffShelfData.reason,statusKey:5};t.applyToOffShelf(a)})}}},c={name:"table-component",mixins:l,props:{isCheckpage:{type:Boolean,default:!1},dataList:{type:Array,default:function(){return[]}}},data:function(){var e=function(e,t,a){/^\s+$/.test(t)?a(new Error("不能输入全空格")):a()};return{id:"",fileList:[],translationData:"",isShowImport:!1,jinyongDialogVisible:!1,jinyongData:{},xiajiaDialogVisible:!1,xiajiaData:{},applyRules:[{required:!0,message:"内容不能为空",trigger:"blur"},{required:!0,validator:e,trigger:"blur"}]}},methods:{removeFile:function(e,t){console.log(1),this.translationData=""},handleExceed:function(){this.$message.error("只能导入一份文件，请先删掉当前文件!")},getTranslationData:function(e){this.translationData=e.file},importDialogClose:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof t){e.next=4;break}t(),e.next=18;break;case 4:if(!t){e.next=9;break}this.isShowImport=!1,this.translationData="",e.next=18;break;case 9:if(!this.translationData){e.next=16;break}return e.next=12,this.$api.activity.uploadTranslateNotice({id:this.id,importFile:this.translationData});case 12:a=e.sent,a&&(this.$message({type:"success",message:"导入成功"}),this.isShowImport=!1,this.refreshData()),e.next=18;break;case 16:return this.$message.warning("请选择文件"),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),downloadTextToExcel:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.activity.downloadNotice({id:t.id});case 2:a=e.sent,console.log(a),a&&(this.downloadFile(a),this.refreshData());case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),importTextTranslationData:function(e){this.fileList=[],this.isShowImport=!0,this.id=e.id},downloadFile:function(e){var t=new Blob([e.data]);if("download"in document.createElement("a")){var a=document.createElement("a");a.style.display="none",a.href=URL.createObjectURL(t),a.download=decodeURIComponent(e.headers["filename"]),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,fileName);this.$message.success("导出成功")},handleDelete:function(e){var t=this,a="是否确定删除“"+e.name+"”的草稿？";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(Object(o["a"])(regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.activity.delete({id:e.id});case 2:i=a.sent,i&&(t.$message({type:"success",message:"删除成功!"}),t.refreshData());case 4:case"end":return a.stop()}},a)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})})},goDataPage:function(e){this.$emit("table-event",{type:"data-page",data:e})},goEditPage:function(e){var t=Date.parse(e.endTime);0!==e.status&&r()()>t?this.$confirm("活动已结束, 无法编辑！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}):this.$emit("table-event",{type:"edit-page",data:e})},jinyongDialogClose:function(e){var t=this;"function"===typeof e?(this.jinyongData={},e()):e?(this.jinyongData={},this.jinyongDialogVisible=!1):this.$refs["jinyongData"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return i={id:t.jinyongData.id,reason:t.jinyongData.reason},e.next=4,t.$api.activity.forbid(i);case 4:n=e.sent,n&&(t.$message({type:"success",message:"禁用成功"}),t.xiajiaData={},t.jinyongDialogVisible=!1,t.refreshData()),e.next=10;break;case 8:return t.$message.warning("请按要求填写"),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},jinyong:function(e){this.jinyongData=e,this.jinyongDialogVisible=!0},xiajiaDialogClose:function(e){var t=this;"function"===typeof e?(this.xiajiaData={},e()):e?(this.xiajiaData={},this.xiajiaDialogVisible=!1):this.$refs["xiajiaData"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return i={id:t.xiajiaData.id,reason:t.xiajiaData.reason},e.next=4,t.$api.activity.offShelf(i);case 4:n=e.sent,n&&(t.xiajiaDialogVisible=!1,t.$message({type:"success",message:"下架成功"}),t.refreshData()),e.next=10;break;case 8:return t.$message.warning("请按要求填写"),e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},xiajia:function(e){this.xiajiaData=e,this.xiajiaDialogVisible=!0},shangjia:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.activity.upperShelf({id:t.id});case 2:a=e.sent,a&&(this.refreshData(),this.$message({type:"success",message:"上架成功"}));case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),goDetailPage:function(e){this.$emit("table-event",{type:"detail-page",data:e})},goCheckPage:function(e){this.$emit("table-event",{type:"check-page",data:e})},refreshData:function(){this.$emit("table-event",{type:"refresh-data"})},handleSortChange:function(e){console.log(e);var t=e.prop,a="";"ascending"===e.order?a="asc":"descending"===e.order&&(a="desc"),"startTime"===t&&(t="trigger_start_time"),"endTime"===t&&(t="trigger_end_time"),"operator"===t&&(t="modify_user_name"),this.$emit("table-event",{type:"sortChange",data:{field:t,order:a}})}}},u=c,p=(a("d9d3"),a("ae16"),a("2877")),d=Object(p["a"])(u,i,n,!1,null,"e3d83530",null);t["a"]=d.exports},"67db":function(e,t,a){"use strict";var i=a("11f2"),n=a.n(i);n.a},7048:function(e,t,a){},"88a8":function(e,t,a){"use strict";var i=a("5df8"),n=a.n(i);n.a},"89c8":function(e,t,a){"use strict";a.d(t,"a",function(){return o});var i=a("cebc"),n=(a("7f7f"),a("96cf"),a("3b8d")),s=a("b775"),r={getPublishList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,o,l,c,u,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,i=t.status,n=t.classification,r=t.modifyUserName,o=t.page,l=void 0===o?1:o,c=t.size,u=void 0===c?20:c,p=t.field,d=t.order,e.next=3,Object(s["a"])({url:"exscene/publishList",method:"post",data:{name:a,status:i,classification:n,modifyUserName:r,page:l,size:u,field:p,order:d}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getPhoneModelOrAndroidVersion:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"exscene/getPhoneModelOrAndroidVersion",method:"post",data:{type:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),updateStatus:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.strategyId,i=t.status,n=t.failureReason,e.next=3,Object(s["a"])({url:"exscene/updateStatus",method:"post",data:{strategyId:a,status:i,failureReason:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getVersionList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"exscene/getCardVersion",method:"post",data:{bizId:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getPublishExamine:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"exscene/getPublishExamine",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),getEdition:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"exscene/getEdition",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),getPublishDetail:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.strategyId,e.next=3,Object(s["a"])({url:"exscene/getPublishDetail",method:"post",data:{strategyId:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),publish:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,o,l,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.strategyId,i=t.intelligSceneEdition,n=t.clientVersion,r=t.type,o=t.roleGrey,l=t.expectedRelease,c=t.fileUrl,u=t.fileName,e.next=3,Object(s["a"])({url:"exscene/publish",method:"post",data:{strategyId:a,intelligSceneEdition:i,clientVersion:n,type:r,roleGrey:o,expectedRelease:l,fileUrl:c,fileName:u}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),approvalStatus:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.strategyId,e.next=3,Object(s["a"])({url:"exscene/approvalStatus",method:"post",data:{strategyId:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),approval:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.strategyId,i=t.status,n=t.reason,e.next=3,Object(s["a"])({url:"exscene/approval",method:"post",data:{strategyId:a,status:i,reason:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),downloadTextToExcel:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,e.next=3,Object(s["a"])({url:"exscene/downloadTextToExcel",method:"post",params:{questionnaireId:a},blob:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),importTextTranslationData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.importFile,e.next=3,Object(s["a"])({url:"exscene/importTextTranslationData",method:"post",binary:!0,data:{questionnaireId:a,importFile:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),uploadTranslateFile:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.file,e.next=3,Object(s["a"])({url:"exscene/uploadTranslateFile",method:"post",binary:!0,data:{file:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),auditList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,o,l,c,u,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,i=t.status,n=t.classification,r=t.modifyUserName,o=t.page,l=void 0===o?1:o,c=t.size,u=void 0===c?20:c,p=t.field,d=t.order,e.next=3,Object(s["a"])({url:"exscene/auditList",method:"post",data:{name:a,status:i,classification:n,modifyUserName:r,page:l,size:u,field:p,order:d}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},o=function(){return function(e){e.prototype.$api={publish:Object(i["a"])({},r)}}}()},"98df":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header-class"},[a("div",{staticClass:"left-input"},[a("el-input",{attrs:{placeholder:"活动名称",clearable:""},model:{value:e.activityName,callback:function(t){e.activityName=t},expression:"activityName"}})],1),e.isCheckpage?e._e():a("el-select",{staticClass:"left-select",attrs:{clearable:"",placeholder:"全部状态"},model:{value:e.statusKey,callback:function(t){e.statusKey=t},expression:"statusKey"}},e._l(e.statusList,function(e){return a("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1),a("el-button",{staticClass:"left-button",attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.searchData}},[e._v("搜索")])],1)},n=[],s={name:"header-component",props:{isCheckpage:{type:Boolean,default:!1}},data:function(){return{activityName:"",typeKey:"",statusKey:"",statusList:[{key:0,name:"草稿"},{key:1,name:"翻译待导入"},{key:2,name:"待审核"},{key:3,name:"驳回"},{key:4,name:"待上架"},{key:5,name:"已上架"},{key:6,name:"已下架"},{key:7,name:"已禁用"}]}},methods:{searchData:function(){this.$emit("header-event",{type:"search-event",data:{name:this.activityName,type:this.typeKey,status:this.statusKey}})}}},r=s,o=(a("3c60"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"1a65a7ec",null);t["a"]=l.exports},a5a5:function(e,t,a){},a920:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100,500,1e3],"page-size":e.pageSize,"pager-count":11,layout:"total, sizes, prev, pager, next, jumper",total:e.dataTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],s=(a("c5f6"),{name:"Pagination",props:{dataTotal:Number,currentPage:Number,pageSize:Number},methods:{handleCurrentChange:function(e){this.$emit("footer-event",{type:"pageChange",data:e})},handleSizeChange:function(e){this.$emit("footer-event",{type:"sizeChange",data:e})}}}),r=s,o=(a("f569"),a("2877")),l=Object(o["a"])(r,i,n,!1,null,"180b2fbc",null);t["a"]=l.exports},ad32:function(e,t,a){},ae16:function(e,t,a){"use strict";var i=a("c97a"),n=a.n(i);n.a},b775:function(e,t,a){"use strict";var i=a("795b"),n=a.n(i),s=a("f499"),r=a.n(s),o=a("bc3a"),l=a.n(o),c=a("5c96"),u=function(e){var t=l()({method:e.method,baseURL:location.origin,url:e.url,params:e.params,data:e.data,transformRequest:[function(t){if(e.binary){var a=new window.FormData;for(var i in t)a.append(i,t[i]);return a}return r()(t)}],headers:{"Content-Type":e.binary?"multipart/form-data":"application/json; charset=utf-8"},responseType:e.blob?"blob":""}).then(function(t){return console.log("axios",t),e.blob?n.a.resolve(t):0===t.data.code?n.a.resolve(t.data.data||{}):void Object(c["Message"])({type:"error",message:t.data.msg||t.data.data,duration:5e3})}).catch(function(t){e.noNotify||Object(c["Message"])({type:"error",message:r()(t)})});return t};t["a"]=u},be25:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",height:"600"},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID","min-width":"80",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"title",label:"调研主题","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.goDetailPage(t.row)}}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"isReward",label:"是否抽奖","min-width":"100",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{},[e._v(e._s(1===t.row.isReward?"是":"否"))])}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:e.statusObject[t.row.status]&&e.statusObject[t.row.status].color}},[e._v(e._s(e.statusObject[t.row.status]&&e.statusObject[t.row.status].name))])]}}])}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间","min-width":"170",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"170"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"170"}}),a("el-table-column",{attrs:{prop:"modifyUserName",label:"修改人","min-width":"150",sortable:"custom"}}),a("el-table-column",{attrs:{label:"操作","min-width":"270"},scopedSlots:e._u([{key:"default",fn:function(t){return[[1].includes(t.row.status)?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.downloadTextToExcel(t.row)}}},[e._v("导出")]):e._e(),[2].includes(t.row.status)?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.importTextTranslationData(t.row)}}},[e._v("导入")]):e._e(),[9,10,11].includes(t.row.status)?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.goDataPage(t.row)}}},[e._v("查看数据")]):e._e(),[0,1,2,3,5].includes(t.row.status)?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.goEditPage(t.row)}}},[e._v("编辑")]):e._e(),0===t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e(),[6,7,8].includes(t.row.status)&&e.isCheckpage?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.goCheckPage(t.row)}}},[e._v("审核")]):e._e(),e._l(e.$store.state.cards.cardListActionOptions,function(i){return[e.statusObject[t.row.status]&&e.statusObject[t.row.status].allowActionKeys.includes(i.key)?a("el-button",{key:i.key,attrs:{size:"mini",type:i.style},on:{click:function(a){return e.onActionHandle(t.row,i.key)}}},[e._v(e._s(i.name))]):e._e()]})]}}])})],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialog.show.applyToShelf,width:"600px","before-close":e.applyToShelfDialogClose,center:""},on:{"update:visible":function(t){return e.$set(e.dialog.show,"applyToShelf",t)}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.versionData.list,border:"",height:"300"},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{prop:"name",label:"调研主题"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:e.statusObject[t.row.status].color}},[e._v(e._s(e.statusObject[t.row.status].name))])]}}])}),a("el-table-column",{attrs:{prop:"modifyTime",label:"修改时间"}}),a("el-table-column",{attrs:{prop:"modifier",label:"修改人"}})],1),a("Pagination",{attrs:{"data-total":e.versionData.total,"current-page":e.versionData.page,"page-size":e.versionData.size},on:{"footer-event":e.versionDataListFooterEvent}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.applyToShelfDialogClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.applyToShelfDialogClose()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"导入",visible:e.isShowImport,width:"600px","before-close":e.importDialogClose,center:""},on:{"update:visible":function(t){e.isShowImport=t}}},[a("el-form",{ref:"excel",staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[a("el-form-item",{ref:"importDom",attrs:{label:""}},[a("el-upload",{staticClass:"upload-demo",staticStyle:{display:"flex","justify-align":"center","align-item":"center","flex-direction":"column",width:"300px"},attrs:{action:"aaa","file-list":e.fileList,"before-remove":e.removeFile,"http-request":e.getTranslationData,limit:1,"on-exceed":e.handleExceed}},[a("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.importDialogClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.importDialogClose()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialog.show.applyToOffShelfConfirm,width:"600px","before-close":e.applyToOffShelfDialogConfirmClose,center:""},on:{"update:visible":function(t){return e.$set(e.dialog.show,"applyToOffShelfConfirm",t)}}},[a("div",{staticClass:"test-dialog"},[a("p",[e._v("是否确定下线 “"+e._s(e.actionTargetData.title)+"” 卡片？")]),a("p",{staticStyle:{color:"red"}},[e._v("下线后，客户端缓存在本地的卡片仍可用")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.applyToOffShelfDialogConfirmClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.applyToOffShelfDialogConfirmClose()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"下线申请",visible:e.dialog.show.applyToOffShelf,width:"600px","before-close":e.applyToOffShelfDialogClose,center:""},on:{"update:visible":function(t){return e.$set(e.dialog.show,"applyToOffShelf",t)}}},[a("el-form",{ref:"applyToOffShelfData",attrs:{model:e.applyToOffShelfData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"下线原因",prop:"reason",rules:e.applyRules}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请填写下线原因",maxlength:"100"},model:{value:e.applyToOffShelfData.reason,callback:function(t){e.$set(e.applyToOffShelfData,"reason",t)},expression:"applyToOffShelfData.reason"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e._v(e._s(e.applyToOffShelfData.reason.length)+"/100")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.applyToOffShelfDialogClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.applyToOffShelfDialogClose()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"输入测试IMEI",visible:e.dialog.show.previewTest,width:"600px",center:""},on:{"update:visible":function(t){return e.$set(e.dialog.show,"previewTest",t)}}},[a("div",{staticClass:"test-dialog"},[a("span",[e._v("输入1-20个IMEI码")]),a("div",{staticStyle:{display:"flex",margin:"20px"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入IMEI",clearable:""},model:{value:e.imeiTestValue,callback:function(t){e.imeiTestValue=t},expression:"imeiTestValue"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.saveIMEI()}}},[e._v("添加")])],1),a("div",{staticStyle:{display:"flex",width:"100%",padding:"10px 20px","flex-wrap":"wrap"}},e._l(e.imeiList,function(t,i){return a("el-tag",{key:i,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:"",type:"info"},on:{close:function(t){return e.deleteIMEI(i)}}},[e._v("\n          "+e._s(t)+"\n        ")])}),1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.show.previewTest=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.previewTest}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"提示",visible:e.dialog.show.applyToDisableConfirm,width:"600px","before-close":e.applyToDisableDialogConfirmClose,center:""},on:{"update:visible":function(t){return e.$set(e.dialog.show,"applyToDisableConfirm",t)}}},[a("div",{staticClass:"test-dialog"},[a("p",[e._v("是否确定禁用 “"+e._s(e.actionTargetData.title)+"” 卡片？")]),a("p",{staticStyle:{color:"red"}},[e._v("禁用后，客户端缓存在本地的卡片不可使用")])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.applyToDisableDialogConfirmClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.applyToDisableDialogConfirmClose()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"禁用申请",visible:e.dialog.show.applyToDisable,width:"600px","before-close":e.applyToDisableDialogClose,center:""},on:{"update:visible":function(t){return e.$set(e.dialog.show,"applyToDisable",t)}}},[a("el-form",{ref:"disableData",attrs:{model:e.applyToDisableData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"禁用原因",prop:"reason",rules:e.applyRules}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请填写禁用原因",maxlength:"100"},model:{value:e.applyToDisableData.reason,callback:function(t){e.$set(e.applyToDisableData,"reason",t)},expression:"applyToDisableData.reason"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e._v(e._s(e.applyToDisableData.reason.length)+"/100")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.applyToDisableDialogClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.applyToDisableDialogClose()}}},[e._v("确 定")])],1)],1)],1)},n=[],s=a("0a0d"),r=a.n(s),o=(a("96cf"),a("3b8d")),l=a("a920"),c=a("3bee"),u={name:"table-component",mixins:[c["a"]],components:{Pagination:l["a"]},props:{isCheckpage:{type:Boolean,default:!1},dataList:{type:Array,default:function(){return[]}}},computed:{},data:function(){return{fileList:[],translationData:"",preImeiList:[],testData:{},imeiTestValue:"",uploadLoading:!1,imeiList:[],isShowImport:!1}},methods:{versionDataListFooterEvent:function(e){switch(e.type){case"pageChange":this.versionData.page=e.data,this.getCardVersionList();break;case"sizeChange":this.versionData.page=1,this.versionData.size=e.data,this.getCardVersionList();break;default:break}},handleDelete:function(e){var t=this,a="是否确定删除“"+e.title+"”的草稿？";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(Object(o["a"])(regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.cards.delete({questionnaireId:e.questionnaireId});case 2:i=a.sent,i?(t.$message({type:"success",message:"删除成功!"}),t.refreshData()):t.$message.error("删除失败！");case 4:case"end":return a.stop()}},a)})))},goDataPage:function(e){this.$emit("table-event",{type:"data-page",data:e})},removeFile:function(e,t){console.log(1),this.translationData=""},handleExceed:function(){this.$message.error("只能导入一份文件，请先删掉当前文件!")},importTextTranslationData:function(e){this.fileList=[],this.isShowImport=!0,this.questionnaireId=e.questionnaireId},getTranslationData:function(e){this.translationData=e.file},importDialogClose:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("function"!==typeof t){e.next=4;break}t(),e.next=18;break;case 4:if(!t){e.next=9;break}this.isShowImport=!1,this.translationData="",e.next=18;break;case 9:if(!this.translationData){e.next=16;break}return e.next=12,this.$api.cards.importTextTranslationData({questionnaireId:this.questionnaireId,importFile:this.translationData});case 12:a=e.sent,a&&(this.$message({type:"success",message:"导入成功"}),this.isShowImport=!1,this.refreshData()),e.next=18;break;case 16:return this.$message.warning("请选择文件"),e.abrupt("return",!1);case 18:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),downloadTextToExcel:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.cards.downloadTextToExcel({questionnaireId:t.questionnaireId});case 2:a=e.sent,a&&(this.downloadFile(a),this.refreshData());case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),downloadFile:function(e){var t=new Blob([e.data]);if("download"in document.createElement("a")){var a=document.createElement("a");a.style.display="none",a.href=URL.createObjectURL(t),a.download=decodeURIComponent(e.headers["filename"]),document.body.appendChild(a),a.click(),URL.revokeObjectURL(a.href),document.body.removeChild(a)}else navigator.msSaveBlob(t,fileName);this.$message.success("导出成功")},goEditPage:function(e){var t=Date.parse(e.endTime);0!==e.status&&r()()>t?this.$confirm("活动已结束, 无法编辑！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}):this.$emit("table-event",{type:"edit-page",data:e})},applyToShelfDialogClose:function(e){"function"===typeof e?(this.applyToShelfData={},e()):e&&(this.applyToShelfData={},this.applyToShelfDialogVisible=!1)},goDetailPage:function(e){console.log("goDetailPage",e),this.$emit("table-event",{type:"detail-page",data:e})},goCheckPage:function(e){this.$emit("table-event",{type:"check-page",data:e})},refreshData:function(){this.$emit("table-event",{type:"refresh-data"})},handleSortChange:function(e){var t=e.prop,a="";"ascending"===e.order?a="asc":"descending"===e.order&&(a="desc"),this.$emit("table-event",{type:"sortChange",data:{field:t,order:a}})}}},p=u,d=(a("047b"),a("2877")),m=Object(d["a"])(p,i,n,!1,null,"09224e2c",null);t["a"]=m.exports},c97a:function(e,t,a){},cded:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[e.isDetailPage||e.isCheckpage?e._e():a("el-steps",{staticClass:"steps",attrs:{active:e.step,"align-center":""}},[a("el-step",{attrs:{title:"个人信息设置",icon:"el-icon-edit",description:""}}),a("el-step",{attrs:{title:"问题设置",icon:"el-icon-edit",description:""}}),a("el-step",{attrs:{title:"结束页设置",icon:"el-icon-menu",description:""}}),a("el-step",{attrs:{title:"出卡规划设置",icon:"el-icon-menu",description:""}}),a("el-step",{attrs:{title:"完成",icon:"el-icon-success",description:""}})],1),a("div",{staticClass:"container"},[e.step<3&&!e.isDetailPage&&!e.isPartEdit&&!e.isCheckpage?a("div",{staticClass:"nav"},[a("div",{staticClass:"title"},[e._v("\n              添加问题\n            ")]),a("div",{staticClass:"addqustion",on:{click:function(t){return e.addQuestion(0)}}},[a("span",[e._v("添加单选")]),a("i",{staticClass:"el-icon-plus"})]),a("div",{staticClass:"addqustion",on:{click:function(t){return e.addQuestion(1)}}},[a("span",[e._v("添加多选")]),a("i",{staticClass:"el-icon-plus"})]),a("div",{staticClass:"addqustion",on:{click:function(t){return e.addQuestion(2)}}},[a("span",[e._v("添加文本题")]),a("i",{staticClass:"el-icon-plus"})])]):e._e(),e.isDetailPage?a("el-radio-group",{staticClass:"tabs",on:{change:e.changeLanguage},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},e._l(e.tabList,function(t,i){return a("el-radio-button",{key:i,attrs:{label:t.key}},[e._v(e._s(t.value))])}),1):e._e(),1===e.step?a("div",{staticClass:"personal"},[e._m(0),a("div",{staticClass:"default-questions"},[a("el-form",{attrs:{"label-position":"right","label-width":"95px",size:"small"}},[a("el-form-item",{attrs:{label:"(默认问题)",required:""}},[a("span",[e._v("您的性别:")])]),a("el-form-item",{attrs:{label:"选项"}},e._l(e.defaultQuestion.gender,function(t,i){return a("el-radio-group",{key:i},[a("el-radio",{staticStyle:{"margin-right":"15px"},attrs:{label:"index"}},[e._v(e._s(t))])],1)}),1),a("el-form-item",{attrs:{label:"(默认问题)",required:""}},[a("span",[e._v("您的年龄:")])]),a("el-form-item",{attrs:{label:"选项"}},e._l(e.defaultQuestion.age,function(t,i){return a("el-radio-group",{key:i},[a("el-radio",{staticStyle:{"margin-right":"15px"},attrs:{label:"index"}},[e._v(e._s(t))])],1)}),1)],1)],1),a("draggable",e._b({on:{update:e.datadragEnd},model:{value:e.personalQuestion,callback:function(t){e.personalQuestion=t},expression:"personalQuestion"}},"draggable",e.dragOptions,!1),[a("transition-group",e._l(e.personalQuestion,function(t,i){return a("div",{key:i+"questions"},[a("el-form",{ref:"personalQuestion",refInFor:!0,attrs:{"label-position":"right",model:t,rules:e.dataRules,"label-width":"130px",size:"small"}},[t.hasDone||0!==t.type?e._e():a("div",{key:"check1"},[a("el-form-item",{attrs:{label:"单选题"}},[a("el-checkbox",{model:{value:t.isRequired,callback:function(a){e.$set(t,"isRequired",a)},expression:"item.isRequired"}},[e._v("必填")]),e.isQuestionEdit?a("span",{staticClass:"delete-question",on:{click:function(t){return e.deleteQuestion(i,0)}}},[e._v("删除本题")]):e._e()],1),a("el-form-item",{attrs:{label:"问题:",prop:"content"}},[a("el-input",{attrs:{type:"text",value:"item.content",size:"small"},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{type:"text",value:"",size:"small"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}})],1),e._l(t.answer,function(t,n){return a("div",{key:n},[a("el-form-item",{staticClass:"question-item",attrs:{label:"选项",prop:"answer."+n+".item",rules:{required:!0,message:"选项不能为空",trigger:"blur"}}},[a("el-input",{attrs:{type:"text",size:"small"},model:{value:t.item,callback:function(a){e.$set(t,"item",a)},expression:"Ritem.item"}}),a("i",{staticClass:"el-icon-close delete-icon",on:{click:function(t){return e.deleteQuestionItems(i,n,0)}}})],1)],1)}),a("el-form-item",{staticClass:"question-item"},[a("el-button",{staticClass:"adding-item",attrs:{icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.addQuestionItems(i,0)}}})],1),a("el-form-item",{staticClass:"question-item button-right"},[t.questionId?a("el-button",{attrs:{round:"",size:"small"},on:{click:function(t){return e.cancelEditQuestion(i,0)}}},[e._v("取消")]):e._e(),a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.submitItem(i,0)}}},[e._v("确定")])],1)],2),t.hasDone&&0===t.type?a("div",[a("el-form-item",{attrs:{label:"问题 "+(i+1)+"（单选）:",required:t.isRequired}},[a("span",[e._v(e._s(t.content))])]),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.remark))])]),a("el-form-item",{attrs:{label:"选项"}},e._l(t.answer,function(t,i){return a("el-radio-group",{key:i},[a("el-radio",{staticStyle:{"margin-right":"15px"},attrs:{label:"r"}},[e._v(e._s(t.item))])],1)}),1),e.isQuestionEdit?a("el-form-item",{staticClass:"question-item button-right"},[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.editItem(i,0)}}},[e._v("编辑")])],1):e._e()],1):e._e(),t.hasDone||1!==t.type?e._e():a("div",[a("el-form-item",{attrs:{label:"多选题"}},[a("el-checkbox",{attrs:{value:""},model:{value:t.isRequired,callback:function(a){e.$set(t,"isRequired",a)},expression:"item.isRequired"}},[e._v("必填")]),e.isQuestionEdit?a("span",{staticClass:"delete-question",on:{click:function(t){return e.deleteQuestion(i,1)}}},[e._v("删除本题")]):e._e()],1),a("el-form-item",{attrs:{label:"问题",prop:"content"}},[a("el-input",{attrs:{type:"text",autosize:"",value:"",size:"small"},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"clientVersion"}},[a("el-input",{attrs:{type:"text",size:"small"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}})],1),e._l(t.answer,function(t,n){return a("div",{key:n},[a("el-form-item",{staticClass:"question-item",attrs:{label:"选项",prop:"answer."+n+".item",rules:{required:!0,message:"选项不能为空",trigger:"blur"}}},[a("el-input",{attrs:{type:"text",size:"small"},model:{value:t.item,callback:function(a){e.$set(t,"item",a)},expression:"Ritem.item"}}),a("i",{staticClass:"el-icon-close delete-icon",on:{click:function(t){return e.deleteQuestionItems(i,n,1)}}})],1)],1)}),a("el-form-item",{staticClass:"question-item"},[a("el-button",{staticClass:"adding-item",attrs:{icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.addQuestionItems(i,1)}}})],1),a("el-form-item",{staticClass:"question-item button-right"},[t.questionId?a("el-button",{attrs:{round:"",size:"small"},on:{click:function(t){return e.cancelEditQuestion(i,1)}}},[e._v("取消")]):e._e(),a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.submitItem(i,1)}}},[e._v("确定")])],1)],2),t.hasDone&&1===t.type?a("div",[a("el-form-item",{attrs:{label:"问题 "+(i+1)+"（多选）:",required:t.isRequired}},[a("span",[e._v(e._s(t.content))])]),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.remark))])]),a("el-form-item",{attrs:{label:"选项"}},e._l(t.answer,function(t,i){return a("el-checkbox",{key:i,attrs:{label:"r"}},[e._v(e._s(t.item))])}),1),e.isQuestionEdit?a("el-form-item",{staticClass:"question-item button-right"},[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.editItem(i,1)}}},[e._v("编辑")])],1):e._e()],1):e._e(),t.hasDone||2!==t.type?e._e():a("div",[a("el-form-item",{attrs:{label:"文本题"}},[a("el-checkbox",{attrs:{value:""},model:{value:t.isRequired,callback:function(a){e.$set(t,"isRequired",a)},expression:"item.isRequired"}},[e._v("必填")]),e.isQuestionEdit?a("span",{staticClass:"delete-question",on:{click:function(t){return e.deleteQuestion(i,2)}}},[e._v("删除本题")]):e._e()],1),a("el-form-item",{attrs:{label:"问题",prop:"content"}},[a("el-input",{attrs:{type:"text",autosize:"",value:"",size:"small"},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"text",value:"",size:"small"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}})],1),a("el-form-item",{staticClass:"question-item button-right"},[t.questionId?a("el-button",{attrs:{round:"",size:"small"},on:{click:function(t){return e.cancelEditQuestion(i,2)}}},[e._v("取消")]):e._e(),a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.submitItem(i,2)}}},[e._v("确定")])],1)],1),t.hasDone&&2===t.type?a("div",[a("el-form-item",{attrs:{label:"问题 "+(i+1)+" （文本）:",required:t.isRequired}},[a("span",[e._v(e._s(t.content))])]),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.remark))])]),e.isQuestionEdit?a("el-form-item",{staticClass:"question-item button-right"},[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.editItem(i,2)}}},[e._v("编辑")])],1):e._e()],1):e._e()])],1)}),0)],1)],1):e._e(),2===e.step||e.isDetailPage?a("div",{staticClass:"personal"},[e.isDetailPage||e.isPartEdit?[a("el-form",{ref:"titleData",attrs:{"label-position":"right",rules:e.dataRules,model:e.titleData,"label-width":"93px",size:"small"}},[a("el-form-item",{attrs:{label:"问卷主题：",prop:"title"}},[a("span",[e._v(e._s(e.titleData.title))])]),e.titleData.description?a("el-form-item",{attrs:{label:"问卷说明："}},[a("span",[e._v(e._s(e.titleData.description))])]):e._e()],1)]:[a("el-form",{ref:"titleData",attrs:{"label-position":"right",rules:e.dataRules,model:e.titleData,"label-width":"93px",size:"small"}},[a("el-form-item",{attrs:{label:"问卷主题：",prop:"title"}},[a("el-input",{attrs:{type:"text",autosize:"",value:"",size:"small"},model:{value:e.titleData.title,callback:function(t){e.$set(e.titleData,"title",t)},expression:"titleData.title"}})],1),a("el-form-item",{attrs:{label:"问卷说明："}},[a("el-input",{attrs:{type:"text",autosize:"",value:"",size:"small"},model:{value:e.titleData.description,callback:function(t){e.$set(e.titleData,"description",t)},expression:"titleData.description"}})],1)],1)],a("draggable",e._b({on:{update:e.datadragEnd},model:{value:e.cardsQuestion,callback:function(t){e.cardsQuestion=t},expression:"cardsQuestion"}},"draggable",e.dragOptions,!1),[a("transition-group",e._l(e.cardsQuestion,function(t,i){return a("div",{key:i+"questions"},[a("el-form",{ref:"cardsQuestion",refInFor:!0,attrs:{"label-position":"right",model:t,rules:e.dataRules,"label-width":"130px",size:"small"}},[t.hasDone||0!==t.type?e._e():a("div",{key:"check1"},[a("el-form-item",{attrs:{label:"单选题"}},[a("el-checkbox",{model:{value:t.isRequired,callback:function(a){e.$set(t,"isRequired",a)},expression:"item.isRequired"}},[e._v("必填")]),e.isQuestionEdit?a("span",{staticClass:"delete-question",on:{click:function(t){return e.deleteQuestion(i,0)}}},[e._v("删除本题")]):e._e()],1),a("el-form-item",{attrs:{label:"问题:",prop:"content"}},[a("el-input",{attrs:{type:"text",value:"item.content",size:"small"},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{attrs:{type:"text",value:"",size:"small"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}})],1),e._l(t.answer,function(t,n){return a("div",{key:n},[a("el-form-item",{staticClass:"question-item",attrs:{label:"选项",prop:"answer."+n+".item",rules:{required:!0,message:"选项不能为空",trigger:"blur"}}},[a("el-input",{attrs:{type:"text",size:"small"},model:{value:t.item,callback:function(a){e.$set(t,"item",a)},expression:"Ritem.item"}}),a("i",{staticClass:"el-icon-close delete-icon",on:{click:function(t){return e.deleteQuestionItems(i,n,0)}}})],1)],1)}),a("el-form-item",{staticClass:"question-item"},[a("el-button",{staticClass:"adding-item",attrs:{icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.addQuestionItems(i,0)}}})],1),a("el-form-item",{staticClass:"question-item button-right"},[t.questionId?a("el-button",{attrs:{round:"",size:"small"},on:{click:function(t){return e.cancelEditQuestion(i,0)}}},[e._v("取消")]):e._e(),a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.submitItem(i,0)}}},[e._v("确定")])],1)],2),t.hasDone&&0===t.type?a("div",[a("el-form-item",{attrs:{label:"问题 "+(i+1)+"（单选）:",required:t.isRequired}},[a("span",[e._v(e._s(t.content))])]),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.remark))])]),a("el-form-item",{attrs:{label:"选项"}},e._l(t.answer,function(t,i){return a("el-radio-group",{key:i},[a("el-radio",{staticStyle:{"margin-right":"15px"},attrs:{label:"r"}},[e._v(e._s(t.item))])],1)}),1),e.isQuestionEdit?a("el-form-item",{staticClass:"question-item button-right"},[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.editItem(i,0)}}},[e._v("编辑")])],1):e._e()],1):e._e(),t.hasDone||1!==t.type?e._e():a("div",[a("el-form-item",{attrs:{label:"多选题"}},[a("el-checkbox",{attrs:{value:""},model:{value:t.isRequired,callback:function(a){e.$set(t,"isRequired",a)},expression:"item.isRequired"}},[e._v("必填")]),e.isQuestionEdit?a("span",{staticClass:"delete-question",on:{click:function(t){return e.deleteQuestion(i,1)}}},[e._v("删除本题")]):e._e()],1),a("el-form-item",{attrs:{label:"问题",prop:"content"}},[a("el-input",{attrs:{type:"text",autosize:"",value:"",size:"small"},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"clientVersion"}},[a("el-input",{attrs:{type:"text",size:"small"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}})],1),e._l(t.answer,function(t,n){return a("div",{key:n},[a("el-form-item",{staticClass:"question-item",attrs:{label:"选项",prop:"answer."+n+".item",rules:{required:!0,message:"选项不能为空",trigger:"blur"}}},[a("el-input",{attrs:{type:"text",size:"small"},model:{value:t.item,callback:function(a){e.$set(t,"item",a)},expression:"Ritem.item"}}),a("i",{staticClass:"el-icon-close delete-icon",on:{click:function(t){return e.deleteQuestionItems(i,n,1)}}})],1)],1)}),a("el-form-item",{staticClass:"question-item"},[a("el-button",{staticClass:"adding-item",attrs:{icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.addQuestionItems(i,1)}}})],1),a("el-form-item",{staticClass:"question-item button-right"},[t.questionId?a("el-button",{attrs:{round:"",size:"small"},on:{click:function(t){return e.cancelEditQuestion(i,1)}}},[e._v("取消")]):e._e(),a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.submitItem(i,1)}}},[e._v("确定")])],1)],2),t.hasDone&&1===t.type?a("div",[a("el-form-item",{attrs:{label:"问题 "+(i+1)+"（多选）:",required:t.isRequired}},[a("span",[e._v(e._s(t.content))])]),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.remark))])]),a("el-form-item",{attrs:{label:"选项"}},e._l(t.answer,function(t,i){return a("el-checkbox",{key:i,attrs:{label:"r"}},[e._v(e._s(t.item))])}),1),e.isQuestionEdit?a("el-form-item",{staticClass:"question-item button-right"},[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.editItem(i,1)}}},[e._v("编辑")])],1):e._e()],1):e._e(),t.hasDone||2!==t.type?e._e():a("div",[a("el-form-item",{attrs:{label:"文本题"}},[a("el-checkbox",{attrs:{value:""},model:{value:t.isRequired,callback:function(a){e.$set(t,"isRequired",a)},expression:"item.isRequired"}},[e._v("必填")]),e.isQuestionEdit?a("span",{staticClass:"delete-question",on:{click:function(t){return e.deleteQuestion(i,2)}}},[e._v("删除本题")]):e._e()],1),a("el-form-item",{attrs:{label:"问题",prop:"content"}},[a("el-input",{attrs:{type:"text",autosize:"",value:"",size:"small"},model:{value:t.content,callback:function(a){e.$set(t,"content",a)},expression:"item.content"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"text",value:"",size:"small"},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}})],1),a("el-form-item",{staticClass:"question-item button-right"},[t.questionId?a("el-button",{attrs:{round:"",size:"small"},on:{click:function(t){return e.cancelEditQuestion(i,2)}}},[e._v("取消")]):e._e(),a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.submitItem(i,2)}}},[e._v("确定")])],1)],1),t.hasDone&&2===t.type?a("div",[a("el-form-item",{attrs:{label:"问题 "+(i+1)+" （文本）:",required:t.isRequired}},[a("span",[e._v(e._s(t.content))])]),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[e._v(e._s(t.remark))])]),e.isQuestionEdit?a("el-form-item",{staticClass:"question-item button-right"},[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:function(t){return e.editItem(i,2)}}},[e._v("编辑")])],1):e._e()],1):e._e()])],1)}),0)],1)],2):e._e(),3===e.step||e.isDetailPage?a("div",{staticClass:"ending"},[e.isDetailPage?[a("el-form",{ref:"endingData",attrs:{"label-position":"right",model:e.endingData,rules:e.endingRules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"氛围图: "}},[e.endingData.iconFile?a("img",{staticClass:"avatar",attrs:{src:e.endingData.iconFile}}):e._e()]),a("el-form-item"),e.endingData.cueWord?a("el-form-item",{attrs:{label:"提示语: ",prop:"cueWord"}},[a("span",[e._v(e._s(e.endingData.cueWord))])]):e._e(),e.endingData.isReward?a("el-form-item",{attrs:{label:"是否有抽奖: ",prop:"isReward"}},[e._v("\n                  "+e._s(1==e.endingData.isReward?"是":"否")+"\n                ")]):e._e()],1)]:[a("el-form",{ref:"endingData",attrs:{"label-position":"right",model:e.endingData,rules:e.endingRules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"氛围图"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","before-remove":e.removeFile,"before-upload":e.beforeUpload,"http-request":e.uploadIcon,"on-success":e.handleIconSuccess,"on-exceed":e.exceedFile,"show-file-list":!1},model:{value:e.endingData.iconFile,callback:function(t){e.$set(e.endingData,"iconFile",t)},expression:"endingData.iconFile"}},[e.endingData.iconFile?a("img",{staticClass:"avatar",attrs:{src:e.endingData.iconFile}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("div",{staticStyle:{color:"gray","margin-top":"8px"}},[e._v("（支持jpg/png/JPEG格式，长宽比1 ：1，大小50k以内）")])],1),a("el-form-item"),a("el-form-item",{attrs:{label:"提示语",prop:"cueWord"}},[e.isPartEdit?a("span",[e._v(e._s(e.endingData.cueWord))]):a("el-input",{attrs:{placeholder:"请输入提示语",type:"text",size:"small",autosize:"",value:"endingData.cueWord"},model:{value:e.endingData.cueWord,callback:function(t){e.$set(e.endingData,"cueWord",t)},expression:"endingData.cueWord"}})],1),a("div"),a("el-form-item",{attrs:{label:"是否有抽奖",prop:"isReward"}},[a("el-radio-group",{model:{value:e.endingData.isReward,callback:function(t){e.$set(e.endingData,"isReward",t)},expression:"endingData.isReward"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1)]],2):e._e(),4===e.step||e.isDetailPage?a("div",{staticClass:"card-rules"},[e.isDetailPage?[a("el-form",{ref:"cardRuleData",attrs:{"label-position":"right",model:e.cardRuleData,rules:e.cardRule,"label-width":"100px",size:"small"}},[e.cardRuleData.effectiveTime[0]?a("el-form-item",{attrs:{label:"有效时间: ",prop:"effectiveTime"}},[a("span",[e._v(e._s(e.cardRuleData.effectiveTime[0])+" 至 "+e._s(e.cardRuleData.effectiveTime[1]))])]):e._e(),e.language?a("el-form-item",{attrs:{label:"翻译语言:",required:""}},e._l(e.language,function(t){return a("div",{key:t,staticStyle:{display:"inline-block",margin:"0 8px"}},["zh_CN"===t?a("span",[e._v("中文")]):e._e(),"en_US"===t?a("span",[e._v("英语")]):e._e(),"hi_IN"===t?a("span",[e._v("印地语")]):e._e()])}),0):e._e()],1)]:[a("el-form",{ref:"cardRuleData",attrs:{"label-position":"right",model:e.cardRuleData,rules:e.cardRule,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"有效时间",prop:"effectiveTime"}},[a("div",{staticClass:"time-box"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"至","picker-options":e.pickerOptions,"start-placeholder":"开始时间","end-placeholder":"结束日期"},on:{change:function(t){return e.dateChange(!0)}},model:{value:e.cardRuleData.effectiveTime,callback:function(t){e.$set(e.cardRuleData,"effectiveTime",t)},expression:"cardRuleData.effectiveTime"}})],1),e.isTimeError1?a("el-alert",{attrs:{title:"开始时间、结束时间不可设置为过去时间",type:"error",closable:!1}}):e._e(),e.isTimeError2?a("el-alert",{attrs:{title:"开始时间不可设置为过去时间",type:"error",closable:!1}}):e._e(),e.isTimeError3?a("el-alert",{attrs:{title:"结束时间不可设置为过去时间",type:"error",closable:!1}}):e._e()],1),e.isPartEdit?a("el-form-item",{attrs:{label:"翻译语言:",required:""}},e._l(e.language,function(t){return a("div",{key:t,staticStyle:{display:"inline-block",margin:"0 8px"}},["zh_CN"===t?a("span",[e._v("中文")]):e._e(),"en_US"===t?a("span",[e._v("英语")]):e._e(),"hi_IN"===t?a("span",[e._v("印地语")]):e._e()])}),0):a("el-form-item",{attrs:{label:"翻译语言",prop:"language"}},[e.isPartEdit?a("span",[e._v(e._s(e.item))]):a("el-checkbox-group",{model:{value:e.cardRuleData.language,callback:function(t){e.$set(e.cardRuleData,"language",t)},expression:"cardRuleData.language"}},[a("el-checkbox",{attrs:{label:"zh_CN"}},[e._v("中文")]),a("el-checkbox",{attrs:{label:"en_US"}},[e._v("英语")]),a("el-checkbox",{attrs:{label:"hi_IN"}},[e._v("印地语")])],1)],1)],1)]],2):e._e(),5===e.step?a("div",{staticClass:"done"},[e._m(1),e._m(2),a("span")]):e._e(),e.isDetailPage?[0!==e.approvalData.approvalTestStatus||0!==e.approvalData.approvalOperationStatus?a("div",{staticClass:"notice-area box-class"},[a("span",{staticClass:"title-class"},[e._v("审核进度")]),0===e.approvalData.approvalTestStatus?a("div",{staticClass:"check-div"},[a("i",{staticClass:"el-icon-remove",staticStyle:{color:"#909399"}}),e._v("测试人员未审核")]):1===e.approvalData.approvalTestStatus?a("div",{staticClass:"check-div"},[a("i",{staticClass:"el-icon-success",staticStyle:{color:"#409EFF"}}),e._v("测试人员审核：测试工程师"+e._s(e.approvalData.approvalTestUserName)+"审核通过")]):2===e.approvalData.approvalTestStatus?a("div",{staticClass:"check-div"},[a("i",{staticClass:"el-icon-error",staticStyle:{color:"#f56c6c"}}),e._v("测试人员审核：测试工程师"+e._s(e.approvalData.approvalTestUserName)+"审核不通过原因为："+e._s(e.approvalData.approvalTestReason))]):e._e(),0===e.approvalData.approvalOperationStatus?a("div",{staticClass:"check-div"},[a("i",{staticClass:"el-icon-remove",staticStyle:{color:"#909399"}}),e._v("运营人员未审核")]):1===e.approvalData.approvalOperationStatus?a("div",{staticClass:"check-div"},[a("i",{staticClass:"el-icon-success",staticStyle:{color:"#409EFF"}}),e._v("运营人员审核：运营经理"+e._s(e.approvalData.approvalOperationUserName)+"审核通过")]):2===e.approvalData.approvalOperationStatus?a("div",{staticClass:"check-div"},[a("i",{staticClass:"el-icon-error",staticStyle:{color:"#f56c6c"}}),e._v("运营人员审核：运营经理"+e._s(e.approvalData.approvalOperationUserName)+"审核不通过原因为："+e._s(e.approvalData.approvalOperationReason))]):e._e()]):e._e(),e.xiajiaReason?a("div",{staticClass:"notice-area box-class",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"reason-area"},[a("div",{staticStyle:{"font-size":"19px","font-weight":"bold","margin-bottom":"20px"}},[e._v("下线原因")]),a("div",[e._v(e._s(e.xiajiaReason))])])]):e._e(),e.jinyongReason?a("div",{staticClass:"notice-area box-class",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"reason-area"},[a("div",{staticStyle:{"font-size":"19px","font-weight":"bold","margin-bottom":"20px"}},[e._v("禁用原因")]),a("div",[e._v(e._s(e.jinyongReason))])])]):e._e()]:e._e()],2),e.isCheckpage?a("el-dialog",{attrs:{title:"驳回原因",visible:e.auditDialog.show.auditToPass,width:"600px","before-close":e.auditDialogClose,center:""},on:{"update:visible":function(t){return e.$set(e.auditDialog.show,"auditToPass",t)}}},[a("el-form",{ref:"examData",attrs:{model:e.auditData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"驳回原因",prop:"reason",rules:e.applyRules}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:3},placeholder:"请填写驳回原因",maxlength:"100"},model:{value:e.auditData.reason,callback:function(t){e.$set(e.auditData,"reason",t)},expression:"auditData.reason"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[e._v(e._s(e.auditData.reason.length)+"/100")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.auditDialogClose(!0)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.auditDialogClose()}}},[e._v("确 定")])],1)],1):e._e(),a("div",{staticClass:"nextsteps box-class"},[5===e.step||e.isDetailPage?e._e():a("el-button",{attrs:{type:"primary",round:""},on:{click:e.cancel}},[e._v("取消编辑")]),e.step<5&&e.step>1&&!e.isDetailPage?a("el-button",{attrs:{type:"primary",round:""},on:{click:e.lastStep}},[e._v("上一步")]):e._e(),e.step<4&&!e.isDetailPage&&!e.isCheckpage?a("el-button",{attrs:{type:"primary",round:""},on:{click:e.nextStep}},[e._v("下一步")]):e._e(),e.isEditPage&&0===e.nowStatus?a("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.save(0)}}},[e._v("修改完成")]):e._e(),e.step<5&&e.isAdd?a("el-button",{attrs:{type:"primary",round:""},on:{click:e.draft}},[e._v("保存为草稿")]):e._e(),4===e.step&&!e.isDetailPage||e.isEditPage?a("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.save(1)}}},[e._v("确定提交")]):e._e(),5!==e.step||e.isDetailPage?e._e():a("el-button",{attrs:{type:"primary",round:""},on:{click:e.goBack}},[e._v("完成并返回")]),e.isDetailPage||e.isCheckpage?a("el-button",{attrs:{type:"primary",round:""},on:{click:e.goBack}},[e._v("返回")]):e._e(),e.isCheckpage?a("el-button",{staticClass:"button-class",attrs:{type:"primary",round:"",disabled:e.loading.auditing},on:{click:function(t){return e.onAuditBtnClickHnadle(1)}}},[e._v("通过")]):e._e(),e.isCheckpage?a("el-button",{staticClass:"button-class",attrs:{type:"primary",round:"",disabled:e.loading.auditing},on:{click:function(t){return e.onAuditBtnClickHnadle(2)}}},[e._v("驳回")]):e._e()],1)],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personal-title"},[a("h4",[e._v("个人信息")]),a("div",[e._v("调研只用于内部研究，旨在给您提供更好的服务，不会用作其他任何商业用途")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("i",{staticClass:"el-icon-success"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"bold"},[e._v("已成功提交")]),a("div",{staticClass:"gray"},[e._v("我们会尽快完成审核，并以消息通形式知您")])])}],s=a("f499"),r=a.n(s),o=(a("c5f6"),a("5176")),l=a.n(o),c=(a("6762"),a("2fdb"),a("96cf"),a("3b8d")),u=(a("28a5"),a("5d73")),p=a.n(u),d=a("0a0d"),m=a.n(d),f=a("3bee"),h={data:function(){var e=function(e,t,a){/^\s+$/.test(t)?a(new Error("不能输入全空格")):a()};return{auditData:{reason:"",state:""},auditDialog:{show:{auditToPass:!1}},loading:{auditing:!1},applyRules:[{required:!0,message:"内容不能为空",trigger:"blur"},{required:!0,validator:e,trigger:"blur"}]}},methods:{onAuditBtnClickHnadle:function(e){1===e?this.audit(e):this.auditDialog.show.auditToPass=!0},auditDialogClose:function(e){var t=this;"function"===typeof e?(this.auditData.reason="",e()):e?(this.auditData.reason="",this.auditDialog.show.auditToPass=!1):this.$refs["examData"].validate(function(e){if(!e)return t.$message.warning("请按要求填写"),!1;t.audit(2,function(){t.auditDialog.show.auditToPass=!1})})},audit:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,a){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(this.baseInfo),this.loading.auditing=!0,e.next=4,this.$api.cards.audit({questionnaireId:this.questionnaireId,reason:this.auditData.reason,auditStatus:t,statusKey:this.nowStatus});case 4:i=e.sent,i&&(a&&a(),this.auditData.state=0,this.$emit("tips-event",{type:"home-page"}),this.$message({type:"success",message:"操作成功"})),this.loading.auditing=!1;case 7:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()}},g=a("310e"),b=a.n(g),v={name:"cards-component",mixins:[f["a"],h],props:{isAdd:{type:Boolean,default:!1},isDetailPage:{type:Boolean,default:!1},isEditPage:{type:Boolean,default:!1},isCheckpage:{type:Boolean,default:!1},baseData:{}},components:{draggable:b.a},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()<m()()-864e5}},activeTab:"zh_CN",tabList:[],xiajiaReason:"",jinyongReason:"",language:[],isPartEdit:!1,isQuestionEdit:!0,approvalData:{},nowStatus:"",personData:[],qustionData:[],uploadLoading:!1,isTimeError1:!1,isTimeError2:!1,isTimeError3:!1,step:1,isQuestionDone:!0,questionnaireId:"",personalQuestionIds:[],mainBodyQuestionIds:[],deleteQuestionsData:[],titleData:{title:"",description:""},endingData:{iconFile:"",isReward:"",cueWord:""},cardRuleData:{effectiveTime:[],language:[]},defaultQuestion:{gender:["男","女"],age:["小于16岁","17-20岁","21-25岁","26-30岁","31-35岁","36-40岁","41-45岁","大于46岁"]},personalQuestion:[],cardsQuestion:[],radioData1:[],checkboxData1:[],textData1:[],radioData2:[],checkboxData2:[],textData2:[],dataRules:{content:[{required:!0,message:"请填写问题",trigger:"blur"}],questionItem:[{required:!0,message:"请填写问题选项",trigger:"blur"}],title:[{required:!0,message:"请填写主题",trigger:"blur"}]},endingRules:{isReward:[{required:!0,message:"请选择是否抽奖",trigger:"blur"}],cueWord:[{required:!0,message:"请填写提示语",trigger:"blur"}],iconFile:[{required:!0,message:"请上传氛围图",trigger:"blur"}]},cardRule:{effectiveTime:[{required:!0,message:"请选择有效时间",trigger:"blur"}],language:[{required:!0,message:"请选择翻译语言",trigger:"blur"}]},questionRules:{question:[{required:!0,message:"请填写问题",trigger:"blur"}]}}},mounted:function(){this.getDetail(),(this.isDetailPage||this.isCheckpage)&&(this.isQuestionEdit=!1),document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}},computed:{dragOptions:function(){return{animation:500,disabled:!this.isQuestionDone||this.isDetailPage}}},methods:{handleQuestionData:function(e){var t=e,a=!0,i=!1,n=void 0;try{for(var s,r=function(){var e=s.value,t=e.answer.split("|"),a=[];t.forEach(function(e,t){a.push({item:e})}),e.answer=a,e.hasDone=!0,e.isRequired=1===e.isRequired},o=p()(t);!(a=(s=o.next()).done);a=!0)r()}catch(l){i=!0,n=l}finally{try{a||null==o.return||o.return()}finally{if(i)throw n}}return t},getDetail:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.baseData.questionnaireId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.$api.cards.getDetail({questionnaireId:this.baseData.questionnaireId,language:this.activeTab});case 4:t=e.sent,this.questionnaireId=t.questionnaireId,this.isReward=t.isReward,this.nowStatus=t.status,[2,3,5].includes(this.nowStatus)&&this.isEditPage&&(this.isPartEdit=!0,this.isQuestionEdit=!1),this.endingData.iconFile=t.icon,this.titleData.title=t.title,this.titleData.description=t.description,t.startTime&&(this.effectiveTime=[t.startTime,t.endTime],this.cardRuleData.effectiveTime=[t.startTime,t.endTime]),this.xiajiaReason=t.pulloffReason,this.jinyongReason=t.disableReason,this.approvalData.approvalTestUserName=t.approvalTestUserName,this.approvalData.approvalTestStatus=t.approvalTestStatus,this.approvalData.approvalTestReason=t.approvalTestReason,this.approvalData.approvalOperationUserName=t.approvalOperationUserName,this.approvalData.approvalOperationStatus=t.approvalOperationStatus,this.approvalData.approvalOperationReason=t.approvalOperationReason,this.personalQuestion=this.handleQuestionData(t.questionnaireInfoMap.personalInformationQuestionsMap.personalQuestion),this.cardsQuestion=this.handleQuestionData(t.questionnaireInfoMap.mainBodyQuestionsMap.mainBodyQuestion),this.endingData.isReward=t.isReward,this.endingData.icon=t.icon,this.endingData.cueWord=t.cueWord,t.translateLanguage&&(this.language=t.translateLanguage.split(","),this.cardRuleData.language=t.translateLanguage.split(",")),this.tabList=t.languageList,this.personalQuestionIds=t.personalQuestionIdList,this.mainBodyQuestionIds=t.mainBodyQuestionIdList;case 30:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),nextStep:function(){this.dataCheck()&&(this.step+=1)},lastStep:function(){this.isQuestionDone?this.step-=1:this.$confirm("您有未填写完成的问题","提示",{confirmButtonText:"确定",center:!0,type:"warning"})},datadragEnd:function(e){var t=this;if(e.preventDefault(),1===this.step){var a=this.personalQuestion;this.personalQuestionIds=[],a.forEach(function(e,a){t.personalQuestionIds.push(e.questionId)})}else if(2===this.step){var i=this.cardsQuestion;this.mainBodyQuestionIds=[],i.forEach(function(e,a){t.mainBodyQuestionIds.push(e.questionId)})}},changeLanguage:function(e){this.activeTab=e,this.getDetail()},dataCheck:function(){var e=!0;if(this.isQuestionDone){switch(this.step){case 2:if(this.$refs.titleData.validate(function(t){e=t}),!e)return;this.cardsQuestion.length||(this.$message.error("至少要设置一个问题!"),e=!1);break;case 3:this.$refs["endingData"].validate(function(t){e=t});break;case 4:this.$refs["cardRuleData"].validate(function(t){e=t});break}return e}this.$confirm("您有未填写完成的问题","提示",{confirmButtonText:"确定",center:!0,type:"warning"})},draft:function(){1===this.step&&0===this.personalQuestion.length||2===this.step&&0===this.cardsQuestion.length?this.$message.error("至少要设置一个问题!"):this.save(0)},save:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.dataCheck()){e.next=2;break}return e.abrupt("return");case 2:if(this.uploadLoading=!0,a={translateLanguage:this.cardRuleData.language.join(","),draftButtonPosition:4===this.step?1:void 0,operationType:t,questionnaireId:this.questionnaireId,startTime:this.cardRuleData.effectiveTime[0],endTime:this.cardRuleData.effectiveTime[1],title:this.titleData.title,description:this.titleData.description,icon:this.endingData.iconFile,isReward:this.endingData.isReward,cueWord:this.endingData.cueWord,personalQuestionIds:this.personalQuestionIds.join(","),mainBodyQuestionIds:this.mainBodyQuestionIds.join(",")},!(this.deleteQuestionsData.length>0)){e.next=11;break}return i={questionnaireId:this.questionnaireId,operationType:0,questionId:this.deleteQuestionsData},e.next=8,this.$api.cards.delete(i);case 8:if(n=e.sent,n){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,this.$api.cards.saveQuestionnaire(a);case 13:s=e.sent,s&&(this.uploadLoading=!1,0===t?(this.$message.success("保存草稿成功"),this.goBack()):(this.isAdd&&(this.step=5),this.isEditPage&&(this.$message.success("修改成功"),this.$emit("tips-event",{type:"home-page"}))));case 15:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),goBack:function(){this.$emit("tips-event",{type:"home-page"})},cancel:function(){var e=this;this.$confirm("是否确定取消编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"返回",type:"warning",center:!0}).then(function(){e.$emit("tips-event",{type:"home-page"})}).catch(function(){})},addQuestion:function(e){var t={content:"",type:e,isRequired:!1,answer:[{item:""},{item:""}],hasDone:!1,questionnaireId:this.questionnaireId,position:""};this.isQuestionDone?(this.isQuestionDone=!1,1===this.step?this.personalQuestion.push(t):this.cardsQuestion.push(t),console.log(this.personalQuestion,this.cardsQuestion)):this.$confirm("您有未填写完成的问题","提示",{confirmButtonText:"确定",center:!0,type:"warning"})},deleteQuestion:function(e,t){var a=this;this.$confirm("是否确定删除该问题?","提示",{confirmButtonText:"确定",cancelButtonText:"返回",type:"warning",center:!0}).then(Object(c["a"])(regeneratorRuntime.mark(function t(){var i,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a.uploadLoading=!0,i=1===a.step?a.personalQuestion:a.cardsQuestion,i[e].questionId?(a.deleteQuestionsData.push(i[e].questionId),a.uploadLoading=!1,i.splice(e,1),a.isQuestionDone=!0,1===a.step?(n=a.personalQuestionIds.indexOf(i[e].questionId),a.personalQuestionIds.splice(n,1)):(s=a.mainBodyQuestionIds.indexOf(i[e].questionId),a.mainBodyQuestionIds.splice(s,1)),a.$message.success("问题删除成功")):(i.splice(e,1),a.isQuestionDone=!0,a.$message.success("问题删除成功"));case 3:case"end":return t.stop()}},t)}))).catch(function(){})},addQuestionItems:function(e,t){var a;a=1===this.step?this.personalQuestion:this.cardsQuestion,a[e].answer.push({item:""})},deleteQuestionItems:function(e,t,a){var i;console.log("deleteQuestionItems",e,t),i=1===this.step?this.personalQuestion:this.cardsQuestion,i[e].answer.length>2?i[e].answer.splice(t,1):this.$confirm("至少有两个选项","提示",{confirmButtonText:"确定",center:!0,type:"warning"})},hadleRef:function(e,t){var a="";return console.log(this.$refs.personalQuestion),1===this.step?this.$refs.personalQuestion[t].validate(function(e){a=e}):this.$refs.cardsQuestion[t].validate(function(e){a=e}),a},cancelEditQuestion:function(e,t){if(this.hadleRef(t,e)){var a;a=1===this.step?this.personalQuestion:this.cardsQuestion;var i=JSON.parse(sessionStorage.getItem("cancelData"));a[e].content=i.content,a[e].isRequired=i.isRequired,a[e].answer=i.answer,a[e].hasDone=!0,this.isQuestionDone=!0,sessionStorage.setItem("cancelData","")}},submitItem:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,a){var i,n,s,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.hadleRef(a,t)){e.next=2;break}return e.abrupt("return");case 2:for(this.uploadLoading=!0,i=1===this.step?this.personalQuestion:this.cardsQuestion,n=l()({},i[t]),s=[],r=0;r<n.answer.length;r++)s.push(n.answer[r].item);return n.questionnaireId=this.questionnaireId,n.answer=s.join("|"),n.isRequired=Number(n.isRequired),n.position=this.step-1,n.type=a,e.next=14,this.$api.cards.saveQuestion(n);case 14:o=e.sent,o&&(-1===this.personalQuestionIds.indexOf(o)&&1===this.step?this.personalQuestionIds.push(o):-1===this.mainBodyQuestionIds.indexOf(o)&&2===this.step&&this.mainBodyQuestionIds.push(o),i[t].questionId=o,i[t].hasDone=!0,this.isQuestionDone=!0,this.uploadLoading=!1);case 16:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),editItem:function(e,t){var a;a=1===this.step?this.personalQuestion:this.cardsQuestion;var i={content:a[e].content,isRequired:a[e].isRequired,answer:a[e].answer};sessionStorage.setItem("cancelData",r()(i)),a[e].hasDone=!1,this.isQuestionDone=!1},getId:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.cards.getQuestionnaireId();case 2:t=e.sent,this.questionnaireId=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),removeFile:function(){this.iconFile=""},handleIconSuccess:function(e,t){},exceedFile:function(){this.$message.error("图片只能上传一张!")},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type,a=e.size/1024<51;return t||this.$message.error("图片不符合规范，请检查后重新上传!"),a||this.$message.error("图片不符合规范，请检查后重新上传!"),t&&a},uploadIcon:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.cards.uploadIcon({iconFile:t.file,questionnaireId:this.questionnaireId});case 2:a=e.sent,this.endingData.iconFile=a?a.iconUrl:"";case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),dateChange:function(e){if(!(this.cardRuleData.effectiveTime.length<2)){var t=Date.parse(this.cardRuleData.effectiveTime[0]),a=Date.parse(this.cardRuleData.effectiveTime[1]),i=m()();t<i&&a<i?(this.isTimeError1=!0,this.isTimeError2=!1,this.isTimeError3=!1):t<i?(this.isTimeError1=!1,this.isTimeError2=!0,this.isTimeError3=!1):a<i?(this.isTimeError1=!1,this.isTimeError2=!1,this.isTimeError3=!0):(this.isTimeError1=!1,this.isTimeError2=!1,this.isTimeError3=!1)}}}},y=v,D=(a("67db"),a("2877")),w=Object(D["a"])(y,i,n,!1,null,"3d4bda1a",null);t["a"]=w.exports},d9d3:function(e,t,a){"use strict";var i=a("ad32"),n=a.n(i);n.a},dbc4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAa4AAABDCAMAAAGEgSHWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACEUExURf///9Lz5YnfuWnWpVbRm0jNklzTn9Hz4+779RW/dFTQmcvx4L/u2R/BenZ2dtzc3DMzM1RUVJiYmLq6uuD37d7163XZrZXiwCLDe/P8+DfJiELLj6bmy2XUpGLUobjr1KzpzXXYrYPdtZvjxIaGhtXV1a2trenp6cHBwS7FgybEfwAAAJGCUacAAAAsdFJOU/////////////////////////////////////////////////////////8Ax9YJjAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAC6dJREFUaEPtmwtz1LgShV0Bqu4srDQjwVLsUpeti2zz/3/hPed025Y9zyRkkkn8wcRyS7LUar0tNw/mbrNx133YEHc3TeKf7Xarm1Mw1jfFSwid8G8Xd825eO+Z1gOyufmXCfrN5TCTmzu6+qYJpTQBTqiIC24a/I+RvvSueUhaV+dhmVSRyAVbRZbE7kJrw95w0c4SKZKqy3EYCX/87mIYw+12L5RJOkpITelDT3PLzE3p7Nq0sLXLRzzWq0RlAvzWmBmcN2bS6fogPCXhImBpRWt1YDc5wvmKd4xvno5qymnroXpvAxR7eGKfNpvvSKaqYE8J07jzwnRRk9BBoQS9myoFfVloCwltDCpPiFDHmw7/AKo5BbmgLTT9onubYQkBv7dGjV8KKbKxqN10xZp6a9es1tTC1TW9JCVGSEpfevitPClzcz0lSon4vdouGxJasUHjo3HZ/WNM7wkRlwwtdmeP5RzDWvP5ecYZPB3yzkUCD7a08m4HRZGeEto9ol/0ZAyX2dO27BOZiPRBurvtDsk9QjVPBenwV2M9bgVS1bD/YIshhQ9DUk9dF5nCD0/qCmltGs026XhilIZSmqVFo3QFPW9KCXPWEmIoHS7okmnIEAq6ZXS8nMuEJmb08ex7OclBJ3ykrnoyxCXsrjmkILZ14RpAYka3nksqhd07BhH4YQwoGESQVtTjMTAkhO2zxpoDeEK1VqnNGkygnDLLOpkKMo8xijA1JIVJW256JILxrfmVOKiwMLqmPZYWq8Y8qZWVBZ/ffXh//wXFi+ajVfsBl946rk3NZ/eqYDc4DpTjXMTkAItUjm/JVvc7hbDgjxhdH8NnV2WB+04we/qBiEkB+lnJ2VfqAk3wH30oJNCL4Rgc3XZVClfjq+uxh/uPcIdI2dRGEW9MLxBxLyWgAC47zL3shn5ZpXF1XIsK7a7pWsMsuwk8857xoHxjqkpTZa+t0Fu6wXv7LOZ6JxUqIJtct8tfrsK/ulZa3bhersZPaTbeCvO/Vf52LTQiu1vItya03E8Iw9xP/bt2P6o9W84cQW87HxJDVE0X0ddgIOgYm39ai8FZNp+lZ1r0oK2V8cnh3ssjV2OJ+05Y75eGrZNS8EOymPE3miXbWhd6KKdTdjkejD0n84kbKYo1gIJpQq+9Gd4NS4GCcFGhEbiHq+X0/V64JjPcqwLZYVqmF3OFZBLm8yx6/FFRS5FOOeY9r8h6MD0EQlCvDC8sD7jesYUKQ1JLqKUgCJSaFh5dR71yxhrFU74HrszAVxf/VgZDXBtvaD/8dmVlZeXtcvf+/fsD68nbxjp58pq2OFwl55NLbx7XZ8LlNZonRV9X7k9psEY2hwLU3h7j+ozvYyvcqwarXs86mDLui2FcYuJyetAL/y14fq4JlKsyx/1GlMdaL9eAClE1W2Holct2F7Z68TMFfw5ckQUf3XeExc6MZm1yHNLLjARp0JXB4DbR9bGNgH3ce4YZADmNcaFXyNIOXrxp0qDKltP4HY8SXBtXY49ld59sWwlLJmRWRhjNAAcWTFQaS0FcEo0kJcHWq+i1cTUqPh7aZkP+XK+UtzTHqBc9tEmYeJaEQq0KIbHOc/ssekmFGYPQ/Ed8B1dVkW0tDHaQKKKjoN7URDvBO9tGhSS6/tdFKtT8Z1hhwnEMWe4Egbqy18+m0yMOBT0UqVABbf4w118e4jZxHeyi9yiu1uaDh7hNpAL6Pl03Xya1XoW93IHBeFTrxjdwXAm5oFb1GsL8b5Xh9RecWJ7UL8PM/2ZxLaSGDciOfCtC7jhitRrBMEpx0zmVEAI3dH0wG4bgJMfwR3vaDmJT0puU2/AMxf3gPhTMxhSH0fscuF+ve9A/eBN7fFdkuPeE7SN33HRGYviPWw29bUx9KaVt+RKCWdF1uEsNLnacBcM33yVA2Dbams9NSRji5cvHd3AmlBQj2CGYHrpymA/c6raB/lJcjyXuO2GHOfWGI2QqUnIr1dpsFzOL3hNwI1+28cxM817m1WyVYQOGKHqu6yXLUdCVFgJE7hEwdXD6cfuLmVW+EfesKCX1LaoisoWsEBiDx6OQ9053TtckyBEIf5BbePHVgeCN2UsWh0lArZeEUg5rAOkVqReeiJS9BVyKazLDvWr4Uor1R3ohOeatRw2JLFizCOuR8hUzrfsLAVjSwysYgizjARHFAxU6nRse9Cr0hDTr4W4vNGPq1XUIxCK8D65LhXvMQO4KM256IT+typWZYkl3PVdlyBsaTZ/QA7CJIHCiBgwke9LR83AzLBp6nhnjyhMBC88t20FoaBrScHQMz4GB7aXUffXaq4ou/r14Rq+LKyS+u+x18MmU+tNvV1ZWVlZWVlZW7sW3f2w6NfCB3wOvvESmncMFf3iAlRfDUVsZq8VeEEe+45hz0fmiuN1m/Ii/IQt2l5tm53s3fCs2oT2PAQSJM0ncjltremmoF4vEZGR37lXca8PtcRYPfhH+lnJktNFiZ5PfD1dWMGhXM+4Jc82tDqqdvFeMvia+jLNvL/MObaMu+7qlsDwzi78uWDeXS+ygujCRwpvYzGUBx8oQtP2bqge+ctwSF+KRzlO1LpUzYIdo5qqpWldQULOQG8aO7Azm2i7Mxa/sSdb39m8BN8PFeLSj8DO2qXmx7qNoZQEVsf7sd1sKCFPAezhTZYbxxoe/AYOhDps5aMWQyj8yevBK8apxI9wDj3gMDvzeBMwKOj5EG0gqY8zNhTs7YkQxO1MLRJvrpBXdikp70DU+nqAmyFpvgsOvKBcw4DTAnT6lktiOanOxQbBtBKv9KvOZuTIC7RJnk2wsHti8xkmiIlhHuTQXo6jzfAu4CU6xF9AER1BR1uYasKbjE3BcJ6JOyEqsK0S6ox3ZBwJZDeaCyeN2Nz6eNh4cb6GB+Qu8E9jJw+GDUvFTopXrc+z89cABY202/5Vw5fpUB/HYxy0a2xeF2dudWvejnotqpvG3BNUZNjNWbVDnf/JYeQbcAsLO1bjB7Dubg53l+krl2XALOF8l+zEY60DLIvJbeRbcBANmMHFsSebeK8/B7MA18aOG9bH5Gae/+G1DKDzU2mHZxNURv6nsMs+H81go6JLvymJFNRz25AFsP/rpy2KhB0zwlOyvYXU1+SkyIh5eKiM55MmcLaLxJCfPnfYZ2eR54dh0HVLWgW+eYmfuKaUGOrLq9MnOVEfqQb/CHNgp5W6IiFsWAP4NOv529uzFFrYvHKia3yHscDUVB9AQSvgRXB3ndWvkQm08LGhRhKlHwB6hUFY8qz7AWxWKnoDCnvl1KBoIWCsOwechmHJAc+lR/GVkILuJWNCWD8KwsBICjSfGhaVOoofkyWlmj8eXmUgPkzEpZGZR034nh77APooV/UlUOFAO9TF3c3PNMQlP1bOAFIyHzyXg2XsDN6yxKBw+iwXjHoBlEyBj4chryZ655FCTKT1NZq75M7M+v8BPD400avH8MTSyg3vlqOOlJDeXfrQ0PSzwk7BYBh/n/PFl9gvUC8XthbIw11ho1jFBZ3UvXqZtkLfs46Bb0cffKINsPR49zR9Fm1m9YZasfm+JfXtgOWDK/FlLRJnqGyGwNJcioDNkE9GHPbLraNxGny0APYcfdIzmuhZujjN44DMg321JLEqoujSX+hcbQdBV9lY6TYKAwVCZx25EhYgrAnOQQ7/ToQawrL20ACOntqWcZnWqTsyGR8tBUPn2IUbWJFhZpQzwmNLCGuyUlf7QY6K7VACzFOoK8oL2yu445VIYQnEHc4WemqXYl3Ycl5+IP90kR7Fl9DnQf3t5ow7iL9RhYaFoqRwHdTG1MehvwtT6bCGGmBUaMtrEuyGaFKOGP2Gcc7DvtK/lRkt7O4bDHjhUGKZl0WLHsLJC0tjHVJmW/FX6bddbkaOf8LRQJajB0Lj4OZT5VK0LUjxo0u7p6E9Z7MQ35ivPxsfFoVDyj62ZV14sX35+vbu7+267hisrKysrKy+Gpvk/9nsrnRzcc0AAAAAASUVORK5CYII="},e2e9:function(e,t,a){"use strict";a("3b2b"),a("a481");var i=[{startTime:"2018/10/1 0:00",endTime:"2018/10/1 23:59",value:"国庆节"},{startTime:"2018/10/31 0:00",endTime:"2018/10/31 23:59",value:"万圣节"},{startTime:"2018/11/22 0:00",endTime:"2018/11/22 23:59",value:"感恩节"},{startTime:"2018/12/22 0:00",endTime:"2018/12/22 23:59",value:"冬至"},{startTime:"2018/12/24 0:00",endTime:"2018/12/24 23:59",value:"平安夜"},{startTime:"2019/1/1 0:00",endTime:"2019/1/1 23:59",value:"元旦节"},{startTime:"2019/1/13 0:00",endTime:"2019/1/13 23:59",value:"腊八节"},{startTime:"2019/1/28 0:00",endTime:"2019/1/28 23:59",value:"小年"},{startTime:"2019/2/4 0:00",endTime:"2019/2/4 23:59",value:"除夕"},{startTime:"2019/2/5 0:00",endTime:"2019/2/5 23:59",value:"春节"},{startTime:"2019/2/14 0:00",endTime:"2019/2/14 23:59",value:"情人节"},{startTime:"2019/2/19 0:00",endTime:"2019/2/19 23:59",value:"元宵节"},{startTime:"2019/3/7 0:00",endTime:"2019/3/7 23:59",value:"女生节"},{startTime:"2019/3/8 0:00",endTime:"2019/3/8 23:59",value:"妇女节"},{startTime:"2019/4/1 0:00",endTime:"2019/4/1 23:59",value:"愚人节"},{startTime:"2019/5/1 0:00",endTime:"2019/5/1 23:59",value:"劳动节"}];Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},t["a"]={holidayList:i}},e983:function(e,t,a){"use strict";var i=a("16f6"),n=a.n(i);n.a},ed08:function(e,t){t.arrOptionsToObject=function(e){var t={};return e.forEach(function(e){t[e.key]=e}),t}},f50f:function(e,t,a){"use strict";var i=a("7048"),n=a.n(i);n.a},f569:function(e,t,a){"use strict";var i=a("a5a5"),n=a.n(i);n.a},f981:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"a",function(){return l});var i=a("cebc"),n=(a("7f7f"),a("96cf"),a("3b8d")),s=a("b775"),r={getCardsList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,o,l,c,u,p,d,m,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.title,i=t.status,n=t.isReward,r=t.page,o=void 0===r?1:r,l=t.size,c=void 0===l?20:l,u=t.field,p=t.order,d=t.cardId,m=t.position,f=void 0===m?0:m,e.next=3,Object(s["a"])({url:"exscene/questionnaire/getList",method:"get",params:{title:a,status:i,isReward:n,page:o,size:c,field:u,order:p,cardId:d,position:f}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getCardsAuditList:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,o,l,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.title,i=t.page,n=void 0===i?1:i,r=t.size,o=void 0===r?20:r,l=t.field,c=t.order,e.next=3,Object(s["a"])({url:"exscene/questionnaire/auditList",method:"get",params:{title:a,page:n,size:o,field:l,order:c}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),applyToShelf:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,e.next=3,Object(s["a"])({url:"exscene/questionnaire/onlineApply",method:"post",data:{questionnaireId:a}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),applyToOffShelf:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.reason,e.next=3,Object(s["a"])({url:"exscene/questionnaire/offlineApply",method:"post",data:{questionnaireId:a,reason:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),applyToDisable:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.reason,e.next=3,Object(s["a"])({url:"exscene/questionnaire/disableApply",method:"post",data:{questionnaireId:a,reason:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),downloadTextToExcel:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,e.next=3,Object(s["a"])({url:"exscene/downloadTextToExcel",method:"post",params:{questionnaireId:a},blob:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),importTextTranslationData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.importFile,e.next=3,Object(s["a"])({url:"exscene/importTextTranslationData",method:"post",binary:!0,data:{questionnaireId:a,importFile:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),audit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.reason,n=t.auditStatus,r=t.statusKey,e.next=3,Object(s["a"])({url:"exscene/questionnaire/auditing",method:"post",data:{questionnaireId:a,reason:i,approvalStatus:n,auditType:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),delete:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.operationType,n=void 0===i?1:i,r=t.questionId,e.next=3,Object(s["a"])({url:"exscene/questionnaire/delete",method:"post",data:{questionnaireId:a,operationType:n,questionId:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getQuestionnaireId:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({url:"exscene/questionnaire/getQuestionnaireId",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),uploadIcon:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.iconFile,i=t.questionnaireId,e.next=3,Object(s["a"])({url:"exscene/questionnaire/uploadIcon",method:"post",data:{iconFile:a,questionnaireId:i},binary:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),saveQuestion:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,o,l,c,u,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.questionId,n=t.content,r=t.type,o=t.language,l=void 0===o?0:o,c=t.isRequired,u=t.answer,p=t.remark,d=t.position,e.next=3,Object(s["a"])({url:"exscene/questionnaire/saveQuestion",method:"post",data:{questionnaireId:a,questionId:i,content:n,type:r,language:l,isRequired:c,answer:u,remark:p,position:d}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),saveQuestionnaire:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,o,l,c,u,p,d,m,f,h,g;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.translateLanguage,i=t.draftButtonPosition,n=t.operationType,r=t.questionnaireId,o=t.startTime,l=t.endTime,c=t.name,u=t.title,p=t.description,d=t.icon,m=t.isReward,f=t.cueWord,h=t.personalQuestionIds,g=t.mainBodyQuestionIds,e.next=3,Object(s["a"])({url:"exscene/questionnaire/saveQuestionnaire",method:"post",data:{translateLanguage:a,draftButtonPosition:i,operationType:n,questionnaireId:r,startTime:o,endTime:l,name:c,title:u,description:p,icon:d,isReward:m,cueWord:f,personalQuestionIds:h,mainBodyQuestionIds:g}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getDetail:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.language,e.next=3,Object(s["a"])({url:"exscene/questionnaire/getDetail",method:"get",params:{questionnaireId:a,language:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getStatisticalInfo:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.language,e.next=3,Object(s["a"])({url:"exscene/getStatisticalInfo",method:"get",params:{questionnaireId:a,language:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),getQuestionInfo:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.sex,n=t.age,r=t.profession,o=t.model,l=t.language,e.next=3,Object(s["a"])({url:"exscene/getQuestionInfo",method:"get",params:{questionnaireId:a,sex:i,age:n,profession:r,model:o,language:l}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),downloadQuestionDetail:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.language,n=t.start,r=t.end,e.next=3,Object(s["a"])({url:"exscene/downloadQuestionDetail",method:"post",params:{questionnaireId:a,language:i,start:n,end:r},blob:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),downloadTextQuestion:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.questionnaireId,i=t.questionId,n=t.start,r=t.end,e.next=3,Object(s["a"])({url:"exscene/downloadTextQuestion",method:"post",params:{questionnaireId:a,questionId:i,start:n,end:r},blob:!0});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},o=r,l=function(){return function(e){e.prototype.$api={cards:Object(i["a"])({},r)}}}()}}]);