(function(t){function e(e){for(var i,o,r=e[0],l=e[1],c=e[2],m=0,u=[];m<r.length;m++)o=r[m],s[o]&&u.push(s[o][0]),s[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);p&&p(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},n=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var p=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0a7d":function(t,e,a){"use strict";var i=a("2529"),s=a.n(i);s.a},1261:function(t,e,a){},2529:function(t,e,a){},"2b76":function(t,e,a){},"4b61":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"body-container"},[a("div",{staticClass:"bread-crumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right bread-crumb"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[a("span",{on:{click:t.goHome}},[t._v("tips管理")])]),t.isAdd?a("el-breadcrumb-item",[t._v("tips新增")]):t._e(),t.isAdd||!t.isTipsShow||t.isDetailPage?t._e():a("el-breadcrumb-item",[t._v("tips编辑")]),!t.isAdd&&t.isDetailPage?a("el-breadcrumb-item",[t._v("tips详情")]):t._e()],1)],1),t.isTableShow&&!t.isCheckPage?a("add-component",{on:{"table-event":t.tableEvent}}):t._e(),t.isTableShow?a("header-component",{attrs:{"is-checkpage":t.isCheckPage},on:{"header-event":t.headerEvent}}):t._e(),t.isTableShow?a("table-component",{attrs:{"data-list":t.dataList,"is-checkpage":t.isCheckPage},on:{"table-event":t.tableEvent}}):t._e(),t.isTableShow?a("footer-component",{attrs:{"data-total":t.dataTotal,"current-page":t.pageIndex,"page-size":t.pageSize},on:{"footer-event":t.footerEvent}}):t._e(),t.isTipsShow?a("tips-Component",{attrs:{"is-add":t.isAdd,"base-data":t.baseData,"is-detailpage":t.isDetailPage,"is-checkpage":t.isCheckPage},on:{"tips-event":t.tipsEvent}}):t._e()],1)},n=[],o=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-wrap"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addTips}},[t._v("创建新tips")])],1)}),r=[],l={methods:{addTips:function(){this.$emit("table-event",{type:"add-page",data:{name:this.tipsName,state:this.statusKey}})}}},c=l,p=(a("c6e7"),a("2877")),m=Object(p["a"])(c,o,r,!1,null,"01f53890",null);m.options.__file="AddComponent.vue";var u=m.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,border:"",height:"600"},on:{"sort-change":t.handleSortChange}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"ID","min-width":"80",sortable:"custom"}}),a("el-table-column",{attrs:{label:"icon",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"50px",height:"50px",margin:"auto"},attrs:{src:t.row.iconUrl,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"名称","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isCheckpage?t._e():a("el-button",{attrs:{type:"text"},on:{click:function(a){t.goDetailPage(e.row)}}},[t._v(t._s(e.row.name))]),t.isCheckpage?a("span",[t._v(t._s(e.row.name))]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"versionCode",label:"版本号","min-width":"100"}}),a("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.status?a("span",{staticStyle:{color:"gray"}},[t._v("草稿")]):t._e(),1===e.row.status?a("span",{staticStyle:{color:"Orange"}},[t._v("待审核")]):t._e(),2===e.row.status?a("span",{staticStyle:{color:"Orange"}},[t._v("待上架")]):t._e(),3===e.row.status?a("span",{staticStyle:{color:"Orange"}},[t._v("驳回")]):t._e(),4===e.row.status?a("span",{staticStyle:{color:"green"}},[t._v("已上架")]):t._e(),5===e.row.status?a("span",{staticStyle:{color:"black"}},[t._v("已下架")]):t._e(),6===e.row.status?a("span",{staticStyle:{color:"red"}},[t._v("已禁用")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间","min-width":"170",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间","min-width":"170",sortable:"custom"}}),a("el-table-column",{attrs:{prop:"modifier",label:"上次修改人","min-width":"150"}}),a("el-table-column",{attrs:{label:"操作","min-width":"270"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.shangjia(e.row)}}},[t._v("上架")]):t._e(),4===e.row.status?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.xiajia(e.row)}}},[t._v("下架")]):t._e(),4===e.row.status||5===e.row.status?a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){t.jinyong(e.row)}}},[t._v("禁用")]):t._e(),0===e.row.status||3===e.row.status||5===e.row.status||6===e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.goEditPage(e.row)}}},[t._v("编辑")]):t._e(),0===e.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除")]):t._e(),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.previewTest(e.row)}}},[t._v("预览测试")]),t.isCheckpage&&4===e.row.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.goCheckPage(e.row)}}},[t._v("发布")]):t._e()]}}])})],1),a("el-dialog",{attrs:{title:"下架申请",visible:t.xiajiaDialogVisible,width:"600px","before-close":t.xiajiaDialogClose,center:""},on:{"update:visible":function(e){t.xiajiaDialogVisible=e}}},[a("el-form",{ref:"xiajiaData",attrs:{model:t.xiajiaData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"下架原因",prop:"reason",rules:t.applyRules}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请填写下架原因",maxlength:"100"},model:{value:t.xiajiaData.reason,callback:function(e){t.$set(t.xiajiaData,"reason",e)},expression:"xiajiaData.reason"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t._v(t._s(t.xiajiaData.reason?t.xiajiaData.reason.length:0)+"/100")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.xiajiaDialogClose(!0)}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.xiajiaDialogClose()}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"输入测试IMEI",visible:t.testDialogVisible,width:"600px",center:""},on:{"update:visible":function(e){t.testDialogVisible=e}}},[a("div",{staticClass:"test-dialog"},[a("span",[t._v("输入1-20个IMEI码")]),a("div",{staticStyle:{display:"flex",margin:"20px"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入IMEI",clearable:""},model:{value:t.imeiTestValue,callback:function(e){t.imeiTestValue=e},expression:"imeiTestValue"}}),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.saveIMEI()}}},[t._v("添加")])],1),a("div",{staticStyle:{display:"flex",width:"100%",padding:"10px 20px","flex-wrap":"wrap"}},t._l(t.imeiList,function(e,i){return a("el-tag",{key:i,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:"",type:"info"},on:{close:function(e){t.deleteIMEI(i)}}},[t._v("\n          "+t._s(e)+"\n        ")])}))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.testDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.testBtn()}}},[t._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"禁用申请",visible:t.jinyongDialogVisible,width:"600px","before-close":t.jinyongDialogClose,center:""},on:{"update:visible":function(e){t.jinyongDialogVisible=e}}},[a("el-form",{ref:"jinyongData",attrs:{model:t.jinyongData,"label-width":"100px"}},[a("el-form-item",{attrs:{label:" 禁用原因",prop:"reason",rules:t.applyRules}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请填写禁用原因",maxlength:"100"},model:{value:t.jinyongData.reason,callback:function(e){t.$set(t.jinyongData,"reason",e)},expression:"jinyongData.reason"}})],1)],1),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t._v(t._s(t.jinyongData.reason?t.jinyongData.reason.length:0)+"/100")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.jinyongDialogClose(!0)}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.jinyongDialogClose()}}},[t._v("确 定")])],1)],1)],1)},h=[],g=(a("6762"),a("2fdb"),{name:"table-component",props:{isCheckpage:{type:Boolean,default:!1},dataList:{type:Array,default:function(){return[]}}},data:function(){var t=function(t,e,a){/^\s+$/.test(e)?a(new Error("不能输入全空格")):a()};return{testData:{},imeiTestValue:"",imeiList:[],testDialogVisible:!1,jinyongDialogVisible:!1,jinyongData:{},xiajiaDialogVisible:!1,xiajiaData:{},applyRules:[{required:!0,message:"内容不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}]}},methods:{saveIMEI:function(){this.imeiList.length>19?this.$confirm("只能输入1-20个IMEI","提示",{confirmButtonText:"确定",center:!0,type:"warning"}):this.imeiList.includes(this.imeiTestValue)?this.$confirm("IMEI码重复！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}):/^\d{15}$/.test(this.imeiTestValue)?this.imeiList.push(this.imeiTestValue):this.$confirm("IMEI码不符合要求！(15位数字)","提示",{confirmButtonText:"确定",center:!0,type:"warning"})},deleteIMEI:function(t){this.imeiList.splice(t,1)},testBtn:function(){var t=this;if(this.imeiList.length<1)return this.$confirm("请至少填入一个IMEI码","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1;this.uploadLoading=!0;var e={status:this.testData.status,name:this.testData.name,startTime:this.testData.startTime,endTime:this.testData.endTime,priority:this.testData.priority,iconUrl:this.testData.iconUrl,displayText:this.testData.displayText,textLink:this.testData.textLink,buttonName:this.testData.buttonName,buttonLink:this.testData.buttonLink,notice:this.testData.notice,imeis:this.imeiList.join(";")};this.$http.post("/scene/previewTips",e).then(function(e){0===e.data.code?(t.$message({type:"success",message:"预览推送成功!"}),t.uploadLoading=!1,t.testDialogVisible=!1):(t.uploadLoading=!1,t.testDialogVisible=!1,t.$message.error("预览推送失败!"))}).catch(function(){})},handleDelete:function(t){var e=this,a="是否确定删除“"+t.name+"”的草稿？";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var a={tipsId:t.tipsId,versionCode:t.versionCode};e.$http.post("/scene/delTips",a).then(function(t){t.data&&"0"==t.data.code?(e.refreshData(),e.$message({type:"success",message:"删除成功!"})):t.data.msg?e.$message.error(t.data.msg):e.$message.error("删除失败！")}).catch(function(){e.$message.error("删除失败！")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},goDataPage:function(t){this.$emit("table-event",{type:"data-page",data:t})},previewTest:function(t){this.testData=t,this.testDialogVisible=!0},goEditPage:function(t){var e=Date.parse(t.endTime);0!==t.status&&Date.now()>e?this.$confirm("活动已结束, 无法编辑！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}):this.$emit("table-event",{type:"edit-page",data:t})},jinyongDialogClose:function(t){var e=this;"function"===typeof t?(this.jinyongData={},t()):t?(this.jinyongData={},this.jinyongDialogVisible=!1):this.$refs["jinyongData"].validate(function(t){if(!t)return e.$message.warning("请按要求填写"),!1;var a={tipsId:e.jinyongData.tipsId,versionCode:e.jinyongData.versionCode,disableReason:e.jinyongData.reason};e.$http.post("/scene/disableTips",a).then(function(t){t.data&&"0"==t.data.code?(e.refreshData(),e.$message({type:"success",message:"禁用成功"}),e.xiajiaData={},e.jinyongDialogVisible=!1):t.data.msg?e.$message.error(t.data.msg):e.$message.error("禁用失败！")}).catch(function(){e.$message.error("禁用失败！")})})},jinyong:function(t){this.jinyongData=t,this.jinyongDialogVisible=!0},xiajiaDialogClose:function(t){var e=this;"function"===typeof t?(this.xiajiaData={},t()):t?(this.xiajiaData={},this.xiajiaDialogVisible=!1):this.$refs["xiajiaData"].validate(function(t){if(!t)return e.$message.warning("请按要求填写"),!1;var a={tipsId:e.xiajiaData.tipsId,versionCode:e.xiajiaData.versionCode,pulloffReason:e.xiajiaData.reason};e.$http.post("/scene/pulloffTips",a).then(function(t){t.data&&"0"==t.data.code?(e.refreshData(),e.$message({type:"success",message:"下架成功"}),e.xiajiaData={},e.xiajiaDialogVisible=!1):t.data.msg?e.$message.error(t.data.msg):e.$message.error("下架失败！")}).catch(function(){e.$message.error("下架失败！")})})},xiajia:function(t){this.xiajiaData=t,this.xiajiaDialogVisible=!0},shangjia:function(t){var e=this,a={tipsId:t.tipsId,versionCode:t.versionCode};this.$http.post("/scene/putawayTips",a).then(function(t){t.data&&"0"==t.data.code?(e.refreshData(),e.$message({type:"success",message:"上架成功"})):t.data.msg?e.$message.error(t.data.msg):e.$message.error("上架失败！")}).catch(function(){e.$message.error("上架失败！")})},goDetailPage:function(t){this.$emit("table-event",{type:"detail-page",data:t})},goCheckPage:function(t){this.$emit("table-event",{type:"check-page",data:t})},refreshData:function(){this.$emit("table-event",{type:"refresh-data"})},handleSortChange:function(t){var e=t.prop,a="";"ascending"===t.order?a="asc":"descending"===t.order&&(a="desc"),this.$emit("table-event",{type:"sortChange",data:{field:e,order:a}})}}}),b=g,f=(a("0a7d"),Object(p["a"])(b,d,h,!1,null,"37466e32",null));f.options.__file="TableComponent.vue";var D=f.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header-class"},[a("div",{staticClass:"left-input"},[a("el-input",{attrs:{placeholder:"名称",clearable:""},on:{change:t.searchData},model:{value:t.tipsName,callback:function(e){t.tipsName=e},expression:"tipsName"}})],1),a("el-select",{staticClass:"left-select",attrs:{clearable:"",placeholder:"状态"},on:{change:t.searchData},model:{value:t.statusKey,callback:function(e){t.statusKey=e},expression:"statusKey"}},t._l(t.statusList,function(t){return a("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),a("el-select",{staticClass:"left-select",attrs:{clearable:"",placeholder:"修改人"},on:{change:t.searchData},model:{value:t.modifyUserName,callback:function(e){t.modifyUserName=e},expression:"modifyUserName"}},t._l(t.nameList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),a("el-button",{staticClass:"left-button",attrs:{icon:"el-icon-search",type:"primary"},on:{click:t.searchData}},[t._v("搜索")])],1)},y=[],x={name:"header-component",props:{isCheckpage:{type:Boolean,default:!1}},data:function(){return{nameList:[],modifyUserName:"",tipsName:"",statusKey:"",statusList:[{key:0,name:"草稿"},{key:1,name:"待审核"},{key:2,name:"待上架"},{key:3,name:"驳回"},{key:4,name:"已上架"},{key:5,name:"已下架"},{key:6,name:"已禁用"}]}},mounted:function(){this.getModifyNameList()},methods:{searchData:function(){this.$emit("header-event",{type:"search-event",data:{name:this.tipsName,modifyUserName:this.modifyUserName,status:this.statusKey}})},getModifyNameList:function(){var t=this;this.$http.get("/scene/getModifier").then(function(e){0===e.data.code&&(t.nameList=e.data.data)}).catch(function(){})}}},k=x,_=(a("e5e1"),Object(p["a"])(k,v,y,!1,null,"5477e258",null));_.options.__file="HeaderComponent.vue";var C=_.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100,500,1e3],"page-size":t.pageSize,"pager-count":11,layout:"total, sizes, prev, pager, next, jumper",total:t.dataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},w=[],L=(a("c5f6"),{name:"footer-component",props:{dataTotal:Number,currentPage:Number,pageSize:Number},methods:{handleCurrentChange:function(t){this.$emit("footer-event",{type:"pageChange",data:t})},handleSizeChange:function(t){this.$emit("footer-event",{type:"sizeChange",data:t})}}}),N=L,j=(a("9a34"),Object(p["a"])(N,T,w,!1,null,"68af0c6b",null));j.options.__file="FooterComponent.vue";var S=j.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.uploadLoading,expression:"uploadLoading"}],staticClass:"tips-container"},[t.isEditPage?i("div",{staticClass:"maintitle-class box-class"},[t.isAdd?i("span",{staticClass:"main-title"},[t._v("创建新tips")]):i("span",{staticClass:"main-title"},[t._v("编辑tips")]),i("div",{staticClass:"steps-class"},[i("el-steps",{attrs:{active:t.stepNumber,"align-center":!0}},[i("el-step",{attrs:{title:"设置",icon:"el-icon-edit"}}),i("el-step",{attrs:{title:"确认",icon:"el-icon-upload"}}),i("el-step",{attrs:{title:"提交",icon:"el-icon-success"}})],1)],1)]):t._e(),t.isEditPage&&1===t.stepNumber?i("div",{staticClass:"rules-area box-class"},[i("span",{staticClass:"title-class"},[t._v("基本信息")]),t.isAdd?i("el-form",{ref:"nameData",staticClass:"text-over my-form",attrs:{"label-position":"left",model:t.nameData,"label-width":"130px",size:"small",rules:t.nameRules}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入该tips的名称，提交后不可再修改"},model:{value:t.nameData.name,callback:function(e){t.$set(t.nameData,"name",e)},expression:"nameData.name"}}),i("div",{staticStyle:{float:"right"}},[t._v(t._s(t.nameData.name?t.nameData.name.length:0)+"/10")])],1),t.isAdd?t._e():i("el-form-item",{attrs:{label:"版本号"}},[i("span",[t._v(t._s(t.nameData.versionCode))])])],1):i("el-form",{ref:"nameData",staticClass:"text-over my-form",attrs:{"label-position":"left",model:t.nameData,"label-width":"130px",size:"small"}},[i("el-form-item",{attrs:{label:"名称"}},[i("span",[t._v(t._s(t.nameData.name))])]),i("el-form-item",{attrs:{label:"版本号"}},[i("span",[t._v(t._s(t.nameData.versionCode))])])],1)],1):t._e(),t.isEditPage&&1===t.stepNumber?i("div",{staticClass:"rules-area box-class"},[i("span",{staticClass:"title-class"},[t._v("tips内容")]),i("el-form",{ref:"contentData",staticClass:"my-form",staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left",model:t.contentData,"label-width":"130px",size:"small",rules:t.contentRules}},[i("el-form-item",{attrs:{label:"有效时间：",prop:"time"}},[i("div",{staticClass:"time-box"},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){t.dateChange(!0)}},model:{value:t.contentData.time,callback:function(e){t.$set(t.contentData,"time",e)},expression:"contentData.time"}})],1),t.isTimeError1?i("el-alert",{attrs:{title:"失效时间需要在生效时间之后",type:"error",closable:!1}}):t._e(),t.isTimeError2?i("el-alert",{attrs:{title:"不可设置为过去时间",type:"error",closable:!1}}):t._e()],1),i("el-form-item",{attrs:{label:"优先级：",prop:"priority"}},[i("el-input",{attrs:{type:"text",placeholder:"请填写1至50的整数，“50”为优先级最高"},model:{value:t.contentData.priority,callback:function(e){t.$set(t.contentData,"priority",e)},expression:"contentData.priority"}})],1),i("el-form-item",{attrs:{label:"icon：",prop:"iconUrl"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/scene/uploadTipsIcon","http-request":t.uploadIcon,data:{tipsId:1},"show-file-list":!1,"on-success":t.handleIconSuccess,"before-upload":t.beforeIconUpload},model:{value:t.contentData.iconUrl,callback:function(e){t.$set(t.contentData,"iconUrl",e)},expression:"contentData.iconUrl"}},[t.contentData.iconUrl?i("img",{staticClass:"avatar",attrs:{src:t.contentData.iconUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),i("span",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("（支持jpg/png/jpeg格式，长宽比1：1，大小50k以内）")])],1),i("el-form-item",{attrs:{label:"显示内容：",prop:"displayText"}},[i("el-input",{attrs:{type:"text"},model:{value:t.contentData.displayText,callback:function(e){t.$set(t.contentData,"displayText",e)},expression:"contentData.displayText"}}),i("div",{staticStyle:{float:"right"}},[t._v(t._s(t.contentData.displayText?t.contentData.displayText.length:0)+"/20")])],1)],1),i("el-form",{ref:"textLinkData",staticClass:"my-form",staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left",model:t.textLinkData,"label-width":"130px",size:"small",rules:t.textLinkRules}},[i("el-form-item",{attrs:{label:"文字链接：",prop:"linkType"}},[i("div",[i("el-radio-group",{model:{value:t.textLinkData.linkType,callback:function(e){t.$set(t.textLinkData,"linkType",e)},expression:"textLinkData.linkType"}},[i("el-radio",{attrs:{label:1}},[t._v("无链接")]),i("el-radio",{staticClass:"radio-class",attrs:{label:2}},[t._v("跳转至APP、快应用、h5")])],1)],1)]),2===t.textLinkData.linkType?i("div",[i("el-form-item",{attrs:{label:"APP应用包名：",prop:"appPackageName"}},[i("el-input",{attrs:{type:"text",placeholder:"如：com.vivo.assistant"},model:{value:t.textLinkData.appPackageName,callback:function(e){t.$set(t.textLinkData,"appPackageName",e)},expression:"textLinkData.appPackageName"}})],1),t.textLinkData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"最低版本号：",prop:"appMinVersion"}},[i("el-input",{attrs:{type:"text",placeholder:"如：40100"},model:{value:t.textLinkData.appMinVersion,callback:function(e){t.$set(t.textLinkData,"appMinVersion",e)},expression:"textLinkData.appMinVersion"}}),i("div",{staticStyle:{float:"right"}},[t._v(t._s(t.textLinkData.appMinVersion?t.textLinkData.appMinVersion.length:0)+"/10")])],1):t._e(),t.textLinkData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"action：",prop:"action"}},[i("el-input",{attrs:{type:"text",placeholder:"如：android.intent.action.VIEW"},model:{value:t.textLinkData.action,callback:function(e){t.$set(t.textLinkData,"action",e)},expression:"textLinkData.action"}})],1):t._e(),t.textLinkData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"应用界面类名：",prop:"appInterfaceClassName"}},[i("el-input",{attrs:{type:"text",placeholder:"如：com.vivo.assistant.ui.ExpressMainActivity"},model:{value:t.textLinkData.appInterfaceClassName,callback:function(e){t.$set(t.textLinkData,"appInterfaceClassName",e)},expression:"textLinkData.appInterfaceClassName"}})],1):t._e(),t.textLinkData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"url：",prop:"url"}},[i("el-input",{attrs:{type:"text",placeholder:"如：tel:0800000123"},model:{value:t.textLinkData.url,callback:function(e){t.$set(t.textLinkData,"url",e)},expression:"textLinkData.url"}})],1):t._e(),i("el-form-item",{attrs:{label:"快应用链接：",prop:"cpFastLink"}},[i("el-input",{attrs:{type:"text",placeholder:"如：https://example.com/c-0eztul/#/ "},model:{value:t.textLinkData.cpFastLink,callback:function(e){t.$set(t.textLinkData,"cpFastLink",e)},expression:"textLinkData.cpFastLink"}})],1),i("el-form-item",{attrs:{label:"h5链接：",prop:"cpH5Link"}},[i("el-input",{attrs:{type:"text",placeholder:"如：http://example.com/index.html?from=xx "},model:{value:t.textLinkData.cpH5Link,callback:function(e){t.$set(t.textLinkData,"cpH5Link",e)},expression:"textLinkData.cpH5Link"}})],1)],1):t._e()],1)],1):t._e(),t.isEditPage&&1===t.stepNumber?i("div",{staticClass:"box-class"},[i("span",{staticClass:"title-class"},[t._v("按钮")]),t.btnDialogVisible?i("el-form",{ref:"btnData",staticClass:"my-form",staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left",model:t.btnData,"label-width":"130px",size:"small",rules:t.btnRules}},[i("el-form-item",{attrs:{label:"按钮名称：",prop:"buttonName"}},[i("el-input",{attrs:{placeholder:"如：买买买"},model:{value:t.btnData.buttonName,callback:function(e){t.$set(t.btnData,"buttonName",e)},expression:"btnData.buttonName"}}),i("div",{staticStyle:{float:"right"}},[t._v(t._s(t.btnData.buttonName?t.btnData.buttonName.length:0)+"/3")])],1),i("el-form-item",{attrs:{label:"APP应用包名：",prop:"appPackageName"}},[i("el-input",{attrs:{type:"text",placeholder:"如：com.vivo.assistant"},model:{value:t.btnData.appPackageName,callback:function(e){t.$set(t.btnData,"appPackageName",e)},expression:"btnData.appPackageName"}})],1),t.btnData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"最低版本号：",prop:"appMinVersion"}},[i("el-input",{attrs:{type:"text",placeholder:"如：40100"},model:{value:t.btnData.appMinVersion,callback:function(e){t.$set(t.btnData,"appMinVersion",e)},expression:"btnData.appMinVersion"}}),i("div",{staticStyle:{float:"right"}},[t._v(t._s(t.textLinkData.appMinVersion?t.textLinkData.appMinVersion.length:0)+"/10")])],1):t._e(),t.btnData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"action：",prop:"action"}},[i("el-input",{attrs:{type:"text",placeholder:"如：android.intent.action.VIEW"},model:{value:t.btnData.action,callback:function(e){t.$set(t.btnData,"action",e)},expression:"btnData.action"}})],1):t._e(),t.btnData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"应用界面类名：",prop:"appInterfaceClassName"}},[i("el-input",{attrs:{type:"text",placeholder:"如：com.vivo.assistant.ui.ExpressMainActivity"},model:{value:t.btnData.appInterfaceClassName,callback:function(e){t.$set(t.btnData,"appInterfaceClassName",e)},expression:"btnData.appInterfaceClassName"}})],1):t._e(),t.btnData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"url：",prop:"url"}},[i("el-input",{attrs:{type:"text",placeholder:"如：tel:0800000123"},model:{value:t.btnData.url,callback:function(e){t.$set(t.btnData,"url",e)},expression:"btnData.url"}})],1):t._e(),i("el-form-item",{attrs:{label:"快应用链接：",prop:"cpFastLink"}},[i("el-input",{attrs:{type:"text",placeholder:"如：https://example.com/c-0eztul/#/"},model:{value:t.btnData.cpFastLink,callback:function(e){t.$set(t.btnData,"cpFastLink",e)},expression:"btnData.cpFastLink"}})],1),i("el-form-item",{attrs:{label:"h5链接：",prop:"cpH5Link"}},[i("el-input",{attrs:{type:"text",placeholder:"如：http://example.com/index.html?from=xx "},model:{value:t.btnData.cpH5Link,callback:function(e){t.$set(t.btnData,"cpH5Link",e)},expression:"btnData.cpH5Link"}})],1)],1):t._e(),t.btnDialogVisible?i("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"danger"},on:{click:function(e){t.deleteBtn()}}},[t._v("删除")]):t._e(),t.btnDialogVisible?t._e():i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:"",plain:""},on:{click:function(e){t.addBtn()}}},[t._v("添加按钮"),i("i",{staticClass:"el-icon-plus el-icon--right"})])],1):t._e(),t.isEditPage&&1===t.stepNumber?i("div",{staticClass:"box-class"},[i("span",{staticClass:"title-class"},[t._v("通知")]),t.noticeDialogVisible?i("el-form",{ref:"noticeData",staticClass:"my-form",staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left",model:t.noticeData,"label-width":"130px",size:"small",rules:t.noticeRules}},[i("el-form-item",{attrs:{label:"通知标题：",prop:"title"}},[i("el-input",{attrs:{placeholder:"如：Jovi提醒您，天冷了，记得添衣~"},model:{value:t.noticeData.title,callback:function(e){t.$set(t.noticeData,"title",e)},expression:"noticeData.title"}}),i("div",{staticStyle:{float:"right"}},[t._v(t._s(t.noticeData.title?t.noticeData.title.length:0)+"/50")])],1),i("el-form-item",{attrs:{label:"通知内容：",prop:"content"}},[i("el-input",{attrs:{autosize:{minRows:1,maxRows:5},type:"textarea",placeholder:"如：点击可查看今日天气>>"},model:{value:t.noticeData.content,callback:function(e){t.$set(t.noticeData,"content",e)},expression:"noticeData.content"}}),i("div",{staticStyle:{float:"right"}},[t._v(t._s(t.noticeData.content?t.noticeData.content.length:0)+"/250")])],1),i("el-form-item",{attrs:{label:"出现时间：",prop:"startType"}},[i("el-radio-group",{model:{value:t.noticeData.startType,callback:function(e){t.$set(t.noticeData,"startType",e)},expression:"noticeData.startType"}},[i("el-radio",{attrs:{label:0}},[t._v("跟随tips出现")])],1)],1),i("el-form-item",{attrs:{label:"是否允许通知在21：00~次日7：00出现：",prop:"isAllowNotice","label-width":"300px"}},[i("div",{staticClass:"radio-input"},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.noticeData.isAllowNotice,callback:function(e){t.$set(t.noticeData,"isAllowNotice",e)},expression:"noticeData.isAllowNotice"}}),i("div",{staticClass:"radio-class"},[t._v(t._s(1===t.noticeData.isAllowNotice?"允许":"不允许"))])],1)]),i("el-form-item",{attrs:{label:"消失时间：",prop:"disappearType"}},[i("div",{staticClass:"radio-input"},[i("el-radio-group",{model:{value:t.noticeData.disappearType,callback:function(e){t.$set(t.noticeData,"disappearType",e)},expression:"noticeData.disappearType"}},[i("el-radio",{attrs:{label:0},on:{change:function(e){t.numberChange(1)}}},[t._v("跟随tips结束")]),i("el-radio",{staticClass:"radio-class",attrs:{label:1},on:{change:t.noticeRadio2Choose}},[t._v("通知出现")])],1),i("el-input",{staticClass:"input-class",staticStyle:{width:"70px"},attrs:{size:"mini",disabled:1!=t.noticeData.disappearType,maxlength:"5"},on:{change:t.numberChange},model:{value:t.noticeData.disappearTime,callback:function(e){t.$set(t.noticeData,"disappearTime",e)},expression:"noticeData.disappearTime"}}),i("div",{class:{"text-choose":1==t.noticeData.disappearType}},[t._v("分钟后")])],1),t.isNoticeTimeError?i("el-alert",{attrs:{title:"请输入1~10080之间的任意整数",type:"error",closable:!1}}):t._e()],1)],1):t._e(),t.noticeDialogVisible?i("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"danger"},on:{click:function(e){t.deleteNotice()}}},[t._v("删除")]):t._e(),t.noticeDialogVisible?t._e():i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:"",plain:""},on:{click:function(e){t.addNoticeButton()}}},[t._v("添加通知"),i("i",{staticClass:"el-icon-plus el-icon--right"})])],1):t._e(),2===t.stepNumber?i("div",{staticClass:"box-class"},[i("span",{staticClass:"title-class"},[t._v("基本信息")]),i("el-form",{ref:"nameData",staticClass:"text-over my-form",attrs:{"label-position":"left",model:t.nameData,"label-width":"130px",size:"small"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[t._v("\n        "+t._s(t.nameData.name)+"\n      ")])],1)],1):t._e(),2===t.stepNumber?i("div",{staticClass:"rules-area box-class"},[i("span",{staticClass:"title-class"},[t._v("tips内容")]),i("el-form",{ref:"contentData",staticClass:"my-form",staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left",model:t.contentData,"label-width":"130px",size:"small"}},[i("el-form-item",{staticStyle:{width:"594px"},attrs:{label:"有效时间："}},[t._v("\n        "+t._s(t.contentData.time[0]+" 至 "+t.contentData.time[1])+"\n      ")]),i("el-form-item",{attrs:{label:"优先级："}},[t._v("\n        "+t._s(t.contentData.priority)+"\n      ")]),i("el-form-item",{attrs:{label:"icon："}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,disabled:!0,"on-success":t.handleIconSuccess,"before-upload":t.beforeIconUpload}},[t.contentData.iconUrl?i("img",{staticClass:"avatar",attrs:{src:t.contentData.iconUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),i("el-form-item",{attrs:{label:"显示内容："}},[t._v("\n        "+t._s(t.contentData.displayText)+"\n      ")])],1),i("el-form",{ref:"textLinkData",staticClass:"text-over my-form",staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left",model:t.textLinkData,"label-width":"130px",size:"small"}},[i("el-form-item",{attrs:{label:"文字链接："}},[1===t.textLinkData.linkType?i("div",[t._v("无链接")]):t._e(),2===t.textLinkData.linkType?i("div",[t._v("跳转至APP、快应用、h5")]):t._e()]),2===t.textLinkData.linkType?i("el-form-item",{attrs:{label:"APP应用包名：",prop:"appPackageName"}},[t._v("\n        "+t._s(t.textLinkData.appPackageName)+"\n      ")]):t._e(),2===t.textLinkData.linkType&&t.textLinkData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"最低版本号："}},[t._v("\n        "+t._s(t.textLinkData.appMinVersion)+"\n      ")]):t._e(),2===t.textLinkData.linkType&&t.textLinkData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"action："}},[t._v("\n        "+t._s(t.textLinkData.action)+"\n      ")]):t._e(),2===t.textLinkData.linkType&&t.textLinkData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"应用界面类名："}},[t._v("\n        "+t._s(t.textLinkData.appInterfaceClassName)+"\n      ")]):t._e(),2===t.textLinkData.linkType&&t.textLinkData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"url："}},[t._v("\n        "+t._s(t.textLinkData.url)+"\n      ")]):t._e(),2===t.textLinkData.linkType?i("el-form-item",{attrs:{label:"快应用链接："}},[t._v("\n        "+t._s(t.textLinkData.cpFastLink)+"\n      ")]):t._e(),2===t.textLinkData.linkType?i("el-form-item",{attrs:{label:"h5链接："}},[t._v("\n        "+t._s(t.textLinkData.cpH5Link)+"\n      ")]):t._e()],1)],1):t._e(),t.btnDialogVisible&&2===t.stepNumber?i("div",{staticClass:"notice-area box-class"},[i("el-form",{staticClass:"text-over my-form",attrs:{"label-position":"left",model:t.btnData,"label-width":"130px",size:"small"}},[i("span",{staticClass:"title-class"},[t._v("按钮")]),i("el-form-item",{attrs:{label:"按钮名称："}},[t._v("\n        "+t._s(t.btnData.buttonName)+"\n      ")]),i("el-form-item",{attrs:{label:"APP应用包名："}},[t._v("\n        "+t._s(t.btnData.appPackageName)+"\n      ")]),t.btnData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"最低版本号："}},[t._v("\n        "+t._s(t.btnData.appMinVersion)+"\n      ")]):t._e(),t.btnData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"action："}},[t._v("\n        "+t._s(t.btnData.action)+"\n      ")]):t._e(),t.btnData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"应用界面类名："}},[t._v("\n        "+t._s(t.btnData.appInterfaceClassName)+"\n      ")]):t._e(),t.btnData.appPackageName?i("el-form-item",{staticClass:"to-right",attrs:{label:"url："}},[t._v("\n        "+t._s(t.btnData.url)+"\n      ")]):t._e(),i("el-form-item",{attrs:{label:"快应用链接："}},[t._v("\n        "+t._s(t.btnData.cpFastLink)+"\n      ")]),i("el-form-item",{attrs:{label:"h5链接：",prop:"cpH5Link"}},[t._v("\n        "+t._s(t.btnData.cpH5Link)+"\n      ")])],1)],1):t._e(),t.noticeDialogVisible&&2===t.stepNumber?i("div",{staticClass:"notice-area box-class"},[i("span",{staticClass:"title-class"},[t._v("通知")]),i("el-form",{staticClass:"text-over my-form",attrs:{"label-position":"left",model:t.noticeData,"label-width":"130px",size:"small"}},[i("el-form-item",{staticClass:"formitem-class",attrs:{label:"通知标题："}},[t._v("\n        "+t._s(t.noticeData.title)+"\n      ")]),i("el-form-item",{staticClass:"formitem-class",attrs:{label:"通知内容："}},[t._v("\n        "+t._s(t.noticeData.content)+"\n      ")]),i("el-form-item",{staticClass:"formitem-class",attrs:{label:"出现时间："}},[i("div",{staticClass:"radio-input"},[0===t.noticeData.startType?i("div",[t._v("跟随tips出现")]):t._e()])]),i("el-form-item",{staticClass:"formitem-class",attrs:{label:"是否允许通知在21：00~次日7：00出现：","label-width":"300px"}},[t._v("\n        "+t._s(1===t.noticeData.isAllowNotice?"允许":"不允许")+"\n      ")]),i("el-form-item",{staticClass:"formitem-class",attrs:{label:"消失时间：",prop:"disappearTime"}},[i("div",{staticClass:"radio-input"},[0===t.noticeData.disappearType?i("div",[t._v("跟随tips结束")]):t._e(),1===t.noticeData.disappearType?i("div",[t._v("通知出现")]):t._e(),1===t.noticeData.disappearType?i("div",[t._v(t._s(t.noticeData.disappearTime))]):t._e(),1===t.noticeData.disappearType?i("div",[t._v("分钟后")]):t._e()])])],1)],1):t._e(),3===t.stepNumber?i("div",{staticClass:"result-area box-class"},[i("img",{staticStyle:{width:"430px",height:"67px","margin-bottom":"20px"},attrs:{src:a("dbc4")}}),i("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){t.goHome()}}},[t._v("返回tips管理")])],1):t._e(),3===t.nowStatus&&t.isDetail?i("div",{staticClass:"notice-area box-class"},[i("span",{staticClass:"title-class"},[t._v("审核进度")]),0===t.approvalData.approvalTestStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-remove",staticStyle:{color:"#909399"}}),t._v("测试人员未审核")]):t._e(),1===t.approvalData.approvalTestStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-success",staticStyle:{color:"#409EFF"}}),t._v("测试人员审核：测试工程师"+t._s(t.approvalData.approvalTestUserName)+"审核通过")]):t._e(),2===t.approvalData.approvalTestStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-error",staticStyle:{color:"#f56c6c"}}),t._v("测试人员审核：测试工程师"+t._s(t.approvalData.approvalTestUserName)+"审核不通过原因为："+t._s(t.approvalData.approvalTestReason))]):t._e(),0===t.approvalData.approvalOperationStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-remove",staticStyle:{color:"#909399"}}),t._v("运营人员未审核")]):t._e(),1===t.approvalData.approvalOperationStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-success",staticStyle:{color:"#409EFF"}}),t._v("运营人员审核：运营经理"+t._s(t.approvalData.approvalOperationUserName)+"审核通过")]):t._e(),2===t.approvalData.approvalOperationStatus?i("div",{staticClass:"check-div"},[i("i",{staticClass:"el-icon-error",staticStyle:{color:"#f56c6c"}}),t._v("运营人员审核：运营经理"+t._s(t.approvalData.approvalOperationUserName)+"审核不通过原因为："+t._s(t.approvalData.approvalOperationReason))]):t._e()]):t._e(),5===t.nowStatus&&t.isDetail?i("div",{staticClass:"box-class"},[i("div",{staticClass:"reason-area"},[i("div",{staticStyle:{"font-size":"19px","font-weight":"bold","margin-bottom":"20px"}},[t._v("下架原因")]),i("div",[t._v(t._s(t.xiajiaReason))])])]):t._e(),6===t.nowStatus&&t.isDetail?i("div",{staticClass:"box-class"},[i("div",{staticClass:"reason-area"},[i("div",{staticStyle:{"font-size":"19px","font-weight":"bold","margin-bottom":"20px"}},[t._v("禁用原因")]),i("div",[t._v(t._s(t.jinyongReason))])])]):t._e(),t.isDetail?i("div",{staticClass:"buttons-area box-class"},[5===t.nowStatus?i("el-button",{staticClass:"button-class",attrs:{round:"",type:"warning"},on:{click:function(e){t.jinyong()}}},[t._v("禁用")]):t._e(),0===t.nowStatus||3===t.nowStatus||5===t.nowStatus||6===t.nowStatus?i("el-button",{staticClass:"button-class",attrs:{round:"",type:"primary"},on:{click:function(e){t.goEditPage()}}},[t._v("编辑")]):t._e(),i("el-button",{staticClass:"button-class",attrs:{round:"",type:"primary"},on:{click:function(e){t.goHome()}}},[t._v("返回")])],1):t._e(),t.isCheckpage?i("div",{staticClass:"buttons-area box-class"},[i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(e){t.previewTest()}}},[t._v("预览测试")]),i("el-button",{staticClass:"button2-class",attrs:{type:"primary",round:"",disabled:t.isExam},on:{click:function(e){t.passButton(!0)}}},[t._v("通过")]),i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:"",disabled:t.isExam},on:{click:function(e){t.passButton(!1)}}},[t._v("不通过")])],1):t._e(),t.isEditPage&&3!==t.stepNumber?i("div",{staticClass:"buttons-area box-class"},[1===t.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(e){t.cancelEditButton()}}},[t._v("取消编辑")]):t._e(),1===t.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(e){t.draftButton()}}},[t._v("保存为草稿")]):t._e(),1===t.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(e){t.nextStepButton()}}},[t._v("下一步")]):t._e(),2===t.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(e){t.lastStepButton()}}},[t._v("上一步")]):t._e(),2===t.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(e){t.previewTest()}}},[t._v("预览测试")]):t._e(),2===t.stepNumber?i("el-button",{staticClass:"button-class",attrs:{type:"primary",round:""},on:{click:function(e){t.saveButton()}}},[t._v("提交")]):t._e()],1):t._e(),i("el-dialog",{attrs:{title:"输入测试IMEI",visible:t.testDialogVisible,width:"600px",center:""},on:{"update:visible":function(e){t.testDialogVisible=e}}},[i("div",{staticClass:"test-dialog"},[i("span",[t._v("输入1-20个IMEI码")]),i("div",{staticStyle:{display:"flex",margin:"20px"}},[i("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入IMEI",clearable:""},model:{value:t.imeiTestValue,callback:function(e){t.imeiTestValue=e},expression:"imeiTestValue"}}),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.saveIMEI()}}},[t._v("添加")])],1),i("div",{staticStyle:{display:"flex",width:"100%",padding:"10px 20px","flex-wrap":"wrap"}},t._l(t.imeiList,function(e,a){return i("el-tag",{key:a,staticStyle:{"margin-right":"10px","margin-bottom":"10px"},attrs:{closable:"",type:"info"},on:{close:function(e){t.deleteIMEI(a)}}},[t._v("\n          "+t._s(e)+"\n        ")])}))]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.testDialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.testBtn()}}},[t._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"禁用申请",visible:t.jinyongDialogVisible,width:"600px","before-close":t.jinyongDialogClose,center:""},on:{"update:visible":function(e){t.jinyongDialogVisible=e}}},[i("el-form",{ref:"jinyongData",attrs:{model:t.baseData,"label-width":"100px"}},[i("el-form-item",{attrs:{label:" 禁用原因",prop:"reason",rules:t.applyRules}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:3},placeholder:"请填写禁用原因",maxlength:"100"},model:{value:t.baseData.reason,callback:function(e){t.$set(t.baseData,"reason",e)},expression:"baseData.reason"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t._v(t._s(t.baseData.reason?t.baseData.reason.length:0)+"/100")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.jinyongDialogClose(!0)}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.jinyongDialogClose()}}},[t._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"下架申请",visible:t.xiajiaDialogVisible,width:"600px","before-close":t.xiajiaDialogClose,center:""},on:{"update:visible":function(e){t.xiajiaDialogVisible=e}}},[i("el-form",{ref:"xiajiaData",attrs:{model:t.baseData,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"下架原因",prop:"reason",rules:t.applyRules}},[i("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",placeholder:"请填写下架原因",maxlength:"100"},model:{value:t.baseData.reason,callback:function(e){t.$set(t.baseData,"reason",e)},expression:"baseData.reason"}})],1)],1),i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t._v(t._s(t.baseData.reason?t.baseData.reason.length:0)+"/100")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.xiajiaDialogClose(!0)}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.xiajiaDialogClose()}}},[t._v("确 定")])],1)],1)],1)},$=[],P=(a("28a5"),a("a322")),I=(a("96cf"),a("3040")),E=(a("3b2b"),a("a481"),[{startTime:"2018/10/1 0:00",endTime:"2018/10/1 23:59",value:"国庆节"},{startTime:"2018/10/31 0:00",endTime:"2018/10/31 23:59",value:"万圣节"},{startTime:"2018/11/22 0:00",endTime:"2018/11/22 23:59",value:"感恩节"},{startTime:"2018/12/22 0:00",endTime:"2018/12/22 23:59",value:"冬至"},{startTime:"2018/12/24 0:00",endTime:"2018/12/24 23:59",value:"平安夜"},{startTime:"2019/1/1 0:00",endTime:"2019/1/1 23:59",value:"元旦节"},{startTime:"2019/1/13 0:00",endTime:"2019/1/13 23:59",value:"腊八节"},{startTime:"2019/1/28 0:00",endTime:"2019/1/28 23:59",value:"小年"},{startTime:"2019/2/4 0:00",endTime:"2019/2/4 23:59",value:"除夕"},{startTime:"2019/2/5 0:00",endTime:"2019/2/5 23:59",value:"春节"},{startTime:"2019/2/14 0:00",endTime:"2019/2/14 23:59",value:"情人节"},{startTime:"2019/2/19 0:00",endTime:"2019/2/19 23:59",value:"元宵节"},{startTime:"2019/3/7 0:00",endTime:"2019/3/7 23:59",value:"女生节"},{startTime:"2019/3/8 0:00",endTime:"2019/3/8 23:59",value:"妇女节"},{startTime:"2019/4/1 0:00",endTime:"2019/4/1 23:59",value:"愚人节"},{startTime:"2019/5/1 0:00",endTime:"2019/5/1 23:59",value:"劳动节"}]);Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var A={holidayList:E},B={name:"tips-component",props:{isCheckpage:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!1},isDetailpage:{type:Boolean,default:!1},baseData:{}},data:function(){var t=function(t,e,a){/^\s+$/.test(e)?a(new Error("不能输入全空格")):a()},e=function(t,e,a){/^[0-9]*$/.test(e)||a(new Error("请输入整数")),(e<1||e>50)&&a(new Error("输入区间1~50")),a()};return{isDetail:!1,approvalData:{},nowStatus:"",grayscaleDataTypes:[],excelFileName:"",excelFile:"",uploadLoading:!1,controlType:1,grayscaleType:1,downloadFileName:"",downloadFileUrl:"",isMantissaList1:!1,isMantissaList2:!1,imeiList:[],imeiTestValue:"",imeiData:{grayscaleDataType:"",releaseType:""},mantissaList1:[],mantissaList2:[],isNoticeTimeError:!1,isTimeError1:!1,isTimeError2:!1,startTimeDisabled:!1,testCardUrl:"",isExam:!1,xiajiaDialogVisible:!1,jinyongDialogVisible:!1,isEditPage:!0,examDialogVisible:!1,testImgSrc:"",testDialogVisible:!1,xiajiaReason:"",jinyongReason:"",bohuiReason:"",noticeData:{title:"",content:"",startType:0,endType:"",endTime:"",isAllowNotice:0,timeSwitch:!1},btnData:{linkType:2},noticeDialogVisible:!1,btnDialogVisible:!1,contentData:{icon:"",time:[],priority:"",content:""},textLinkData:{},nameData:{name:""},cardPreview:"",expandPreview:"",holidayList:A.holidayList,stepNumber:1,basicData:{peopleLabels:[],bindType:2},timeData:{type:0,startTime:"",endTime:"",holiday:""},textLinkRules:{linkType:[{required:!0,message:"请选择文字链接",trigger:"change"}],appPackageName:[{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:"包名不能含有中文",trigger:"blur"}],appMinVersion:[{type:"string",pattern:/^[0-9]*$/,message:"版本号须为整数",trigger:"blur"},{min:1,max:10,message:"字数超过限制",trigger:"change"},{min:1,max:10,message:"字数超过限制",trigger:"blur"}]},contentRules:{time:[{required:!0,message:"请选择有效时间",trigger:"blur"}],priority:[{required:!0,message:"请设置优先级",trigger:"blur"},{required:!0,validator:e,trigger:"blur"}],displayText:[{required:!0,message:"请输入显示内容",trigger:"blur"},{required:!0,validator:t,trigger:"blur"},{min:1,max:20,message:"字数超过限制",trigger:"change"},{min:1,max:20,message:"字数超过限制",trigger:"blur"}],iconUrl:[{required:!0,message:"请上传icon",trigger:"blur"}]},btnRules:{buttonName:[{required:!0,message:"请输入按钮名称",trigger:"blur"},{required:!0,validator:t,trigger:"blur"},{min:1,max:3,message:"字数超过限制",trigger:"change"},{min:1,max:3,message:"字数超过限制",trigger:"blur"}],appMinVersion:[{type:"string",pattern:/^[0-9]*$/,message:"版本号须为数字",trigger:"blur"},{min:1,max:10,message:"字数超过限制",trigger:"change"},{min:1,max:10,message:"字数超过限制",trigger:"blur"}],appPackageName:[{type:"string",pattern:/^[^\u4e00-\u9fa5]+$/,message:"包名不能含有中文",trigger:"blur"}]},nameRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"},{required:!0,validator:t,trigger:"blur"},{min:1,max:10,message:"字数超过限制",trigger:"change"},{min:1,max:10,message:"字数超过限制",trigger:"blur"}]},noticeRules:{title:[{required:!0,message:"请输入通知标题",trigger:"blur"},{required:!0,validator:t,trigger:"blur"},{min:1,max:50,message:"字数超过限制",trigger:"change"},{min:1,max:50,message:"字数超过限制",trigger:"blur"}],content:[{required:!0,message:"请输入通知内容",trigger:"blur"},{required:!0,validator:t,trigger:"blur"},{min:1,max:250,message:"字数超过限制",trigger:"change"},{min:1,max:250,message:"字数超过限制",trigger:"blur"}],disappearType:[{required:!0,message:"请选择消失时间",trigger:"change"}]},applyRules:[{required:!0,message:"内容不能为空",trigger:"blur"},{required:!0,validator:t,trigger:"blur"}]}},methods:{saveIMEI:function(){this.imeiList.length>19?this.$confirm("只能输入1-20个IMEI","提示",{confirmButtonText:"确定",center:!0,type:"warning"}):this.imeiList.includes(this.imeiTestValue)?this.$confirm("IMEI码重复！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}):/^\d{15}$/.test(this.imeiTestValue)?this.imeiList.push(this.imeiTestValue):this.$confirm("IMEI码不符合要求！(15位数字)","提示",{confirmButtonText:"确定",center:!0,type:"warning"})},deleteIMEI:function(t){this.imeiList.splice(t,1)},testBtn:function(){var t=this;if(this.imeiList.length<1)return this.$confirm("请至少填入一个IMEI码","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1;this.uploadLoading=!0;var e={status:this.baseData.status,name:this.nameData.name,startTime:this.contentData.time[0],endTime:this.contentData.time[1],priority:this.contentData.priority,iconUrl:this.contentData.iconUrl,displayText:this.contentData.displayText,textLink:this.textLinkData,buttonName:this.btnDialogVisible?this.btnData.buttonName:"",buttonLink:this.btnDialogVisible?this.btnData:void 0,notice:this.noticeDialogVisible?this.noticeData:void 0,imeis:this.imeiList.join(";")};this.$http.post("/scene/previewTips",e).then(function(e){0===e.data.code?(t.$message({type:"success",message:"预览推送成功!"}),t.uploadLoading=!1,t.testDialogVisible=!1):(t.uploadLoading=!1,t.testDialogVisible=!1,t.$message.error("预览推送失败!"))}).catch(function(){})},handleIconSuccess:function(t,e){this.contentData.iconUrl=URL.createObjectURL(e.raw)},beforeIconUpload:function(t){var e="image/jpeg"===t.type,a="image/png"===t.type,i=t.size/1024<51;return e||a||this.$message.error("图片不符合规范，请检查后重新上传"),i||this.$message.error("图片不符合规范，请检查后重新上传"),(e||a)&&i},uploadIcon:function(t){var e=this,a=new FormData;a.append("tipsId","tips_2"),a.append("iconFile",t.file),this.uploadLoading=!0,this.$http.post("/scene/uploadTipsIcon",a).then(function(t){0===t.data.code?(e.contentData.iconUrl=t.data.data&&t.data.data,e.contentData=JSON.parse(JSON.stringify(e.contentData)),e.uploadLoading=!1):(e.uploadLoading=!1,e.$message.error(t.data.msg))}).catch(function(){})},numberChange:function(t){if(/^\d+$/.test(t)){var e=Number(t);this.isNoticeTimeError=!(e>=1&&e<=10080)}else this.isNoticeTimeError=!0},dateChange:function(t){var e=Date.parse(this.contentData.time[0]),a=Date.parse(this.contentData.time[1]),i=Date.now();e<i?(this.isTimeError2=!0,this.isTimeError1=!1):a<i?(this.isTimeError2=!0,this.isTimeError1=!1):e>=a?(this.isTimeError1=!0,this.isTimeError2=!1):(this.isTimeError1=!1,this.isTimeError2=!1)},noticeRadio2Choose:function(){this.noticeData.disappearTime=120,this.noticeData=JSON.parse(JSON.stringify(this.noticeData))},handleDelete:function(){var t=this;console.log("shanchu");var e="是否确定删除“"+this.baseData.name+"”的草稿？";this.$confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var e={tipsId:t.baseData.tipsId,versionCode:t.baseData.versionCode};t.$http.post("/scene/delTips",e).then(function(e){e.data&&"0"==e.data.code?(t.$message({type:"success",message:"删除成功!"}),t.$emit("tips-event",{type:"home-page"})):e.data.msg?t.$message.error(e.data.msg):t.$message.error("删除失败！")}).catch(function(){t.$message.error("删除失败！")})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},xiajiaDialogClose:function(t){var e=this;"function"===typeof t?(this.baseData.reason="",t()):t?(this.baseData.reason="",this.xiajiaDialogVisible=!1):this.$refs["xiajiaData"].validate(function(t){if(!t)return e.$message.warning("请按要求填写"),!1;var a={tipsId:e.baseData.tipsId,versionCode:e.baseData.versionCode,pulloffReason:e.baseData.reason};e.$http.post("/scene/pulloffTips",a).then(function(t){t.data&&"0"==t.data.code?(e.$message({type:"success",message:"下架成功"}),e.xiajiaReason=e.baseData.reason,e.baseData.reason="",e.baseData.status=12,e.xiajiaDialogVisible=!1):t.data.msg?e.$message.error(t.data.msg):e.$message.error("下架失败！")}).catch(function(){e.$message.error("下架失败！")})})},xiajia:function(){this.xiajiaDialogVisible=!0},shangjia:function(){var t=this,e={tipsId:this.baseData.tipsId,versionCode:this.baseData.versionCode};this.$http.post("/scene/putawayTips",e).then(function(e){e.data&&"0"==e.data.code?(t.baseData.status=9,t.$message({type:"success",message:"上架成功"})):e.data.msg?t.$message.error(e.data.msg):t.$message.error("上架失败！")}).catch(function(){t.$message.error("上架失败！")})},jinyongDialogClose:function(t){var e=this;"function"===typeof t?(this.baseData.reason="",t()):t?(this.baseData.reason="",this.jinyongDialogVisible=!1):this.$refs["jinyongData"].validate(function(t){if(!t)return e.$message.warning("请按要求填写"),!1;var a={tipsId:e.baseData.tipsId,versionCode:e.baseData.versionCode,disableReason:e.baseData.reason};e.$http.post("/scene/disableTips",a).then(function(t){t.data&&"0"==t.data.code?(e.$message({type:"success",message:"禁用成功"}),e.jinyongReason=e.baseData.reason,e.baseData.reason="",e.baseData.status=-1,e.jinyongDialogVisible=!1):t.data.msg?e.$message.error(t.data.msg):e.$message.error("禁用失败！")}).catch(function(){e.$message.error("禁用失败！")})})},jinyong:function(){this.jinyongDialogVisible=!0},previewTest:function(){this.testDialogVisible=!0},goDataPage:function(){this.$emit("tips-event",{type:"data-page"})},goEditPage:function(){var t=Date.parse(this.baseData.endTime);0!==this.baseData.status&&Date.now()>t?this.$confirm("活动已结束, 无法编辑！","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning",center:!0}):(this.stepNumber=1,this.isEditPage=!0,this.isCheckpage=!1,this.isDetail=!1)},deleteNotice:function(){this.noticeData={title:"",content:"",startType:0,endType:"",endTime:"",timeSwitch:!1},this.noticeDialogVisible=!1},addNoticeButton:function(){this.noticeDialogVisible=!0},deleteBtn:function(){this.btnData={linkType:2},this.btnDialogVisible=!1},addBtn:function(){this.btnDialogVisible=!0},goHome:function(){this.$emit("tips-event",{type:"home-page"})},isEmpty:function(t){return"undefined"===typeof t||""===t||null===t},dataValidate:function(t){var e,a,i,s,n=!1;return this.$refs["nameData"]&&this.$refs["nameData"].validate(function(t){e=t}),this.$refs["contentData"].validate(function(t){a=t}),this.$refs["textLinkData"].validate(function(t){i=t}),s=!this.btnDialogVisible,this.btnDialogVisible&&this.$refs["btnData"].validate(function(t){s=t}),n=!this.noticeDialogVisible,this.noticeDialogVisible&&this.$refs["noticeData"].validate(function(t){n=t}),2!==this.textLinkData.linkType||this.textLinkData.appPackageName||this.textLinkData.cpFastLink||this.textLinkData.cpH5Link?2===this.textLinkData.linkType&&this.textLinkData.appPackageName&&!this.textLinkData.appMinVersion?(this.$confirm("跳转至应用包名则最低版本号必填！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1):2===this.textLinkData.linkType&&this.textLinkData.appPackageName&&!(this.textLinkData.action||this.textLinkData.appInterfaceClassName||this.textLinkData.url)?(this.$confirm("action、应用界面类名、url至少填一种！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1):this.btnDialogVisible&&!(this.btnData.appPackageName||this.btnData.cpFastLink||this.btnData.cpH5Link)?(this.$confirm("跳转链接至少填一种！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1):this.btnDialogVisible&&this.btnData.appPackageName&&!this.btnData.appMinVersion?(this.$confirm("跳转至应用包名则最低版本号必填！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1):this.btnDialogVisible&&this.btnData.appPackageName&&!(this.btnData.action||this.btnData.appInterfaceClassName||this.btnData.url)?(this.$confirm("action、应用界面类名、url至少填一种！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1):e&&a&&i&&s&&n:(this.$confirm("跳转链接至少填一种！","提示",{confirmButtonText:"确定",center:!0,type:"warning"}),!1)},draftButton:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.dataValidate(!0)){t.next=8;break}return t.next=3,this.hasSameData();case 3:if(!t.sent){t.next=7;break}this.$confirm("已有开始时间和优先级相同的tips，确定继续吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.prepareEditData(0)}).catch(function(){e.contentData.priority="",e.$message({type:"info",message:"已取消"})}),t.next=8;break;case 7:this.prepareEditData(0);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),hasSameData:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={tipsId:this.baseData.tipsId?this.baseData.tipsId:void 0,startTime:this.contentData.time[0],priority:this.contentData.priority},t.abrupt("return",new Promise(function(t){a.$http.post("/scene/judgeStartTimeAndPriority",e).then(function(e){e.data&&0==e.data.code?t(e.data.data):t(!1)}).catch(function(){t(!1)})}));case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),saveButton:function(){this.prepareEditData(1)},prepareEditData:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(e){var a,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a={linkType:2,appPackageName:this.btnData.appPackageName,appInterfaceClassName:this.btnData.appPackageName?this.btnData.appInterfaceClassName:void 0,appMinVersion:this.btnData.appPackageName?this.btnData.appMinVersion:void 0,action:this.btnData.appPackageName?this.btnData.action:void 0},Object(P["a"])(a,"appMinVersion",this.btnData.appPackageName?this.btnData.appMinVersion:void 0),Object(P["a"])(a,"url",this.btnData.appPackageName?this.btnData.url:void 0),Object(P["a"])(a,"cpFastLink",this.btnData.cpFastLink),Object(P["a"])(a,"cpH5Link",this.btnData.cpH5Link),i=a,s={tipsId:this.baseData.tipsId,status:e,versionCode:this.baseData.versionCode,name:this.nameData.name,startTime:this.contentData.time[0],endTime:this.contentData.time[1],priority:this.contentData.priority,iconUrl:this.contentData.iconUrl,displayText:this.contentData.displayText,textLink:this.textLinkData,buttonName:this.btnDialogVisible?this.btnData.buttonName:"",buttonLink:this.btnDialogVisible?i:void 0,notice:this.noticeDialogVisible?this.noticeData:void 0,imeis:this.imeiList.length>0?this.imeiList.join(";"):void 0},this.isAdd?this.addDataXhr(s):this.editDataXhr(s);case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),addDataXhr:function(t){var e=this;this.$http.post("/scene/addTips",t).then(function(t){e.uploadLoading=!1,t.data&&"0"==t.data.code?1===e.stepNumber?e.$message({type:"success",message:"草稿保存成功"}):e.stepNumber++:t.data.msg?e.$message.error(t.data.msg):e.$message.error("操作失败！")}).catch(function(){e.uploadLoading=!1,e.$message.error("操作失败！")})},editDataXhr:function(t){var e=this;this.$http.post("/scene/modifyTips",t).then(function(t){e.uploadLoading=!1,t.data&&"0"==t.data.code?1===e.stepNumber?e.$message({type:"success",message:"草稿编辑成功"}):e.stepNumber++:t.data.msg?e.$message.error(t.data.msg):e.$message.error("操作失败！")}).catch(function(){e.uploadLoading=!1,e.$message.error("操作失败！")})},lastStepButton:function(){this.stepNumber--},nextStepButton:function(){var t=Object(I["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.dataValidate(!1)){t.next=8;break}return t.next=3,this.hasSameData();case 3:if(!t.sent){t.next=7;break}this.$confirm("已有开始时间和优先级相同的tips，确定继续吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.stepNumber++}).catch(function(){e.contentData.priority="",e.$message({type:"info",message:"已取消"})}),t.next=8;break;case 7:this.stepNumber++;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),cancelEditButton:function(){var t=this;this.$confirm("是否确定取消编辑?","提示",{confirmButtonText:"确定",cancelButtonText:"返回",type:"warning",center:!0}).then(function(){t.$emit("tips-event",{type:"home-page"})}).catch(function(){})},getDataXhr:function(){var t=this,e={tipsId:this.baseData.tipsId,versionCode:this.baseData.versionCode};this.$http.post("/scene/getTipsDetail",e).then(function(e){if(e.data&&"0"==e.data.code&&e.data.data){var a=e.data.data;t.nameData.name=a.name,t.nameData.versionCode=a.versionCode,t.contentData.displayText=a.displayText,t.contentData.iconUrl=a.iconUrl,t.contentData.time=[a.startTime,a.endTime],t.contentData.priority=a.priority,t.textLinkData=a.textLink,t.textLinkData.appMinVersion=t.textLinkData.appMinVersion+"",t.noticeData=a.notice?a.notice:{},t.noticeDialogVisible=!!a.notice,t.btnData=a.buttonLink?a.buttonLink:{linkType:2},t.btnData.buttonName=a.buttonName,t.btnData.appMinVersion=t.btnData.appMinVersion+"",t.btnDialogVisible=!!a.buttonLink,t.nowStatus=a.status,t.jinyongReason=a.disableReason,t.xiajiaReason=a.pulloffReason,t.approvalData.approvalTestUserName=a.approvalTestUserName,t.approvalData.approvalTestStatus=a.approvalTestStatus,t.approvalData.approvalTestReason=a.approvalTestReason,t.approvalData.approvalOperationUserName=a.approvalOperationUserName,t.approvalData.approvalOperationStatus=a.approvalOperationStatus,t.approvalData.approvalOperationReason=a.approvalOperationReason,t.contentData=JSON.parse(JSON.stringify(t.contentData)),t.nameData=JSON.parse(JSON.stringify(t.nameData)),t.textLinkData=JSON.parse(JSON.stringify(t.textLinkData)),t.btnData=JSON.parse(JSON.stringify(t.btnData)),t.noticeData=JSON.parse(JSON.stringify(t.noticeData)),t.imeiList=a.previewImeis?a.previewImeis.split(";"):[],t.btnDialogVisible||t.deleteBtn(),a.buttonLink&&!a.buttonLink.appPackageName&&(t.btnData.appMinVersion=""),a.textLink&&!a.textLink.appPackageName&&(t.textLinkData.appMinVersion=""),t.noticeDialogVisible||t.deleteNotice()}}).catch(function(){})},getDisappearTime:function(t,e){var a=new Date(t),i=new Date(e),s=i.getTime()-a.getTime();if(s>0)return Math.round(s/6e4)}},mounted:function(){this.isDetail=this.isDetailpage,this.isDetailpage&&(this.isEditPage=!1,this.stepNumber=2),"undefined"!==typeof this.baseData.tipsId&&this.getDataXhr()},created:function(){}},R=B,M=(a("997d"),a("8e05"),a("6fc2"),Object(p["a"])(R,V,$,!1,null,"6e111901",null));M.options.__file="TipsComponent.vue";var O=M.exports,U={name:"app",components:{addComponent:u,tableComponent:D,headerComponent:C,footerComponent:S,tipsComponent:O},data:function(){return{isTipsShow:!1,isAdd:!1,isDetailPage:!1,isTableShow:!0,isCheckPage:!1,dataList:[],pageIndex:1,pageSize:20,dataTotal:0,searchName:"",searchModifyUser:"",searchType:"",searchState:"",searchField:"",searchOrder:"",baseData:{}}},methods:{goHome:function(){this.getDataXhr(),this.isTipsShow=!1,this.isAdd=!1,this.isCheckPage=!1,this.isDetailPage=!1,this.isTableShow=!0},tipsEvent:function(t){switch(t.type){case"home-page":this.goHome();break;case"data-page":break;default:break}},tableEvent:function(t){switch(t.type){case"data-page":break;case"add-page":this.baseData={},this.isTableShow=!1,this.isAdd=!0,this.isDetailPage=!1,this.isCheckPage=!1,this.isTipsShow=!0;break;case"edit-page":this.baseData=t.data,this.isAdd=!1,this.isTableShow=!1,this.isDetailPage=!1,this.isCheckPage=!1,this.isTipsShow=!0;break;case"detail-page":this.baseData=t.data,this.isAdd=!1,this.isTableShow=!1,this.isDetailPage=!0,this.isCheckPage=!1,this.isTipsShow=!0;break;case"check-page":this.baseData=t.data,this.isAdd=!1,this.isTableShow=!1,this.isDetailPage=!1,this.isCheckPage=!0,this.isTipsShow=!0;break;case"refresh-data":this.getDataXhr();break;case"sortChange":this.searchOrder=t.data.order,this.searchField=t.data.field,this.getDataXhr();break;default:break}},headerEvent:function(t){this.searchData(t.data)},searchData:function(t){this.searchName=t.name,this.searchType=t.type,this.searchState=t.status,this.searchModifyUser=t.modifyUserName,this.pageIndex=1,this.getDataXhr()},getDataXhr:function(){var t=this,e={name:""===this.searchName?void 0:this.searchName,modifier:""===this.searchModifyUser?void 0:this.searchModifyUser,status:""===this.searchState?void 0:this.searchState,field:""===this.searchField?void 0:this.searchField,order:""===this.searchOrder?void 0:this.searchOrder,page:this.pageIndex,size:this.pageSize};this.$http.post("/scene/getTipsList",e).then(function(e){t.dataTotal=e.data.data&&e.data.data.totalElements,t.dataList=e.data.data&&e.data.data.content}).catch(function(){})},footerEvent:function(t){switch(t.type){case"pageChange":this.pageIndex=t.data,this.getDataXhr();break;case"sizeChange":this.pageIndex=1,this.pageSize=t.data,this.getDataXhr();break;default:break}}},created:function(){this.isCheckPage&&(this.searchState=3),this.getDataXhr()}},z=U,F=(a("58c2"),Object(p["a"])(z,s,n,!1,null,"d7896260",null));F.options.__file="App.vue";var q,X=F.exports,H=a("5c96"),J=a.n(H),K=a("bc3a"),Z=a.n(K);q=Z.a.create({baseURL:location.origin});var W=q;a("0fae");i["default"].use(J.a),i["default"].config.productionTip=!1,i["default"].prototype.$http=W,new i["default"]({render:function(t){return t(X)}}).$mount("#app")},"58c2":function(t,e,a){"use strict";var i=a("bb0f"),s=a.n(i);s.a},"6fc2":function(t,e,a){"use strict";var i=a("1261"),s=a.n(i);s.a},"8e05":function(t,e,a){"use strict";var i=a("9f6f"),s=a.n(i);s.a},"997d":function(t,e,a){"use strict";var i=a("4b61"),s=a.n(i);s.a},"9a34":function(t,e,a){"use strict";var i=a("ef21"),s=a.n(i);s.a},"9f6f":function(t,e,a){},b239:function(t,e,a){},bb0f:function(t,e,a){},c6e7:function(t,e,a){"use strict";var i=a("2b76"),s=a.n(i);s.a},dbc4:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAa4AAABDCAMAAAGEgSHWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACEUExURf///9Lz5YnfuWnWpVbRm0jNklzTn9Hz4+779RW/dFTQmcvx4L/u2R/BenZ2dtzc3DMzM1RUVJiYmLq6uuD37d7163XZrZXiwCLDe/P8+DfJiELLj6bmy2XUpGLUobjr1KzpzXXYrYPdtZvjxIaGhtXV1a2trenp6cHBwS7FgybEfwAAAJGCUacAAAAsdFJOU/////////////////////////////////////////////////////////8Ax9YJjAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAC6dJREFUaEPtmwtz1LgShV0Bqu4srDQjwVLsUpeti2zz/3/hPed025Y9zyRkkkn8wcRyS7LUar0tNw/mbrNx133YEHc3TeKf7Xarm1Mw1jfFSwid8G8Xd825eO+Z1gOyufmXCfrN5TCTmzu6+qYJpTQBTqiIC24a/I+RvvSueUhaV+dhmVSRyAVbRZbE7kJrw95w0c4SKZKqy3EYCX/87mIYw+12L5RJOkpITelDT3PLzE3p7Nq0sLXLRzzWq0RlAvzWmBmcN2bS6fogPCXhImBpRWt1YDc5wvmKd4xvno5qymnroXpvAxR7eGKfNpvvSKaqYE8J07jzwnRRk9BBoQS9myoFfVloCwltDCpPiFDHmw7/AKo5BbmgLTT9onubYQkBv7dGjV8KKbKxqN10xZp6a9es1tTC1TW9JCVGSEpfevitPClzcz0lSon4vdouGxJasUHjo3HZ/WNM7wkRlwwtdmeP5RzDWvP5ecYZPB3yzkUCD7a08m4HRZGeEto9ol/0ZAyX2dO27BOZiPRBurvtDsk9QjVPBenwV2M9bgVS1bD/YIshhQ9DUk9dF5nCD0/qCmltGs026XhilIZSmqVFo3QFPW9KCXPWEmIoHS7okmnIEAq6ZXS8nMuEJmb08ex7OclBJ3ykrnoyxCXsrjmkILZ14RpAYka3nksqhd07BhH4YQwoGESQVtTjMTAkhO2zxpoDeEK1VqnNGkygnDLLOpkKMo8xijA1JIVJW256JILxrfmVOKiwMLqmPZYWq8Y8qZWVBZ/ffXh//wXFi+ajVfsBl946rk3NZ/eqYDc4DpTjXMTk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"},e5e1:function(t,e,a){"use strict";var i=a("b239"),s=a.n(i);s.a},ef21:function(t,e,a){}});
//# sourceMappingURL=app.4591fcdb.js.map